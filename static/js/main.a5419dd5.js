/*! For license information please see main.a5419dd5.js.LICENSE.txt */
(()=>{"use strict";var e={49:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,E={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)N.call(t,s)&&!_.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:E.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+T(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),I(a,t,s,"",(function(e){return e}))):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+T(o=e[c],c);l+=I(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,s,u=i+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],s=0;return I(e,r,"","",(function(e){return t.call(n,e,s++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},P={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:E};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return j(e,(function(){t++})),t},toArray:function(e){return j(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=E.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!_.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},119:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(345)},340:(e,t,n)=>{e.exports=n(761)},345:(e,t,n)=>{var r=n(950),s=n(340);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var V=!1;function U(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case N:return"Portal";case k:return"Profiler";case _:return"StrictMode";case I:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,Ee=null,_e=null;function ke(e){if(e=ws(e)){if("function"!==typeof Ne)throw Error(i(280));var t=e.stateNode;t&&(t=Es(t),Ne(e.stateNode,e.type,t))}}function Se(e){Ee?_e?_e.push(e):_e=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=_e;if(_e=Ee=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Te(e,t){return e(t)}function Ie(){}var je=!1;function Ae(e,t,n){if(je)return e(t,n);je=!0;try{return Te(e,t,n)}finally{je=!1,(null!==Ee||null!==_e)&&(Ie(),Ce())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=Es(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Re=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){Re=!1}function Oe(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ve=null,Ue={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,s,i,a,o,l){Le=!1,Me=null,Oe.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(i(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return He(s),e;if(a===r)return He(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=s.unstable_scheduleCallback,Qe=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,Xe=s.unstable_requestPaint,Je=s.unstable_now,$e=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=dt(o):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~s)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Nt,Et,_t,kt,St=!1,Ct=[],Tt=null,It=null,jt=null,At=new Map,Dt=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=ws(t))&&Nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mt(e){var t=xs(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void kt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ws(n))&&Nt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){St=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==It&&Ft(It)&&(It=null),null!==jt&&Ft(jt)&&(jt=null),At.forEach(Vt),Dt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==It&&zt(It,e),null!==jt&&zt(jt,e),At.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var qt=x.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var s=bt,i=qt.transition;qt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=s,qt.transition=i}}function Kt(e,t,n,r){var s=bt,i=qt.transition;qt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=s,qt.transition=i}}function Gt(e,t,n,r){if(Ht){var s=Yt(e,t,n,r);if(null===s)Kr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,s),!0;case"dragenter":return It=Lt(It,e,t,n,r,s),!0;case"mouseover":return jt=Lt(jt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return At.set(i,Lt(At.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Dt.set(i,Lt(Dt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==s;){var i=ws(s);if(null!==i&&wt(i),null===(i=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=xs(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,s="value"in Jt?Jt.value:Jt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(un),hn=M({},un,{view:0,detail:0}),fn=sn(hn),pn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=sn(pn),gn=sn(M({},pn,{dataTransfer:0})),vn=sn(M({},hn,{relatedTarget:0})),yn=sn(M({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=M({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(bn),wn=sn(M({},un,{data:0})),Nn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return kn}var Cn=M({},hn,{key:function(e){if(e.key){var t=Nn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(Cn),In=sn(M({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),jn=sn(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=sn(M({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=M({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Dn),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Vn=String.fromCharCode(32),Un=!1;function zn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Gn(e,t,n,r){Se(r),0<(t=Qr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Yn=null;function Xn(e){Ur(e,0)}function Jn(e){if(G(Ns(e)))return e}function $n(e,t){if("change"===e)return t}var Zn=!1;if(u){var er;if(u){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Qn&&(Qn.detachEvent("onpropertychange",sr),Yn=Qn=null)}function sr(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];Gn(t,Yn,e,we(e)),Ae(Xn,t)}}function ir(e,t,n){"focusin"===e?(rr(),Yn=n,(Qn=t).attachEvent("onpropertychange",sr)):"focusout"===e&&rr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function or(e,t){if("click"===e)return Jn(t)}function lr(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!cr(e[s],t[s]))return!1}return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&mr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=hr(n,i);var a=hr(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=u&&"documentMode"in document&&11>=document.documentMode,yr=null,br=null,xr=null,wr=!1;function Nr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&ur(xr,r)||(xr=r,0<(r=Qr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},kr={},Sr={};function Cr(e){if(kr[e])return kr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Cr("animationend"),Ir=Cr("animationiteration"),jr=Cr("animationstart"),Ar=Cr("transitionend"),Dr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Dr.set(e,t),l(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Lr=Rr[Or];Pr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(Ir,"onAnimationIteration"),Pr(jr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Vr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Vr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Vr(s,o,c),i=l}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function zr(e,t){var n=t[vs];void 0===n&&(n=t[vs]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[qr]){e[qr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Br("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Xt(t)){case 1:var s=Wt;break;case 4:s=Kt;break;default:s=Gt}n=s.bind(null,t,n,e),s=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=xs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Ae((function(){var r=i,s=we(n),a=[];e:{var o=Dr.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=vn;break;case"focusout":c="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=jn;break;case Tr:case Ir:case jr:l=yn;break;case Ar:l=An;break;case"scroll":l=fn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=De(p,h))&&u.push(Gr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!xs(c)&&!c[gs])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xs(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Ns(l),f=null==c?o:Ns(c),(o=new u(m,p+"leave",l,n,s)).target=d,o.relatedTarget=f,m=null,xs(s)===r&&((u=new u(h,p+"enter",c,n,s)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Yr(f))p++;for(f=0,m=h;m;m=Yr(m))f++;for(;0<p-f;)u=Yr(u),p--;for(;0<f-p;)h=Yr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Yr(u),h=Yr(h)}u=null}else u=null;null!==l&&Xr(a,o,l,u,!1),null!==c&&null!==d&&Xr(a,d,c,u,!0)}if("select"===(l=(o=r?Ns(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=$n;else if(Wn(o))if(Zn)g=lr;else{g=ar;var v=ir}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=or);switch(g&&(g=g(e,r))?Gn(a,g,n,s):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?Ns(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(yr=v,br=r,xr=null);break;case"focusout":xr=br=yr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,Nr(a,n,s);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":Nr(a,n,s)}var y;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(y=en()):($t="value"in(Jt=s)?Jt.value:Jt.textContent,qn=!0)),0<(v=Qr(r,b)).length&&(b=new wn(b,e,null,n,s),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Bn(n))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Vn);case"textInput":return(e=t.data)===Vn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),Zt=$t=Jt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(s=new wn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=y))}Ur(a,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=De(e,n))&&r.unshift(Gr(e,i,s)),null!=(i=De(e,t))&&r.push(Gr(e,i,s))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=De(n,i))&&a.unshift(Gr(n,l,o)):s||null!=(l=De(n,i))&&a.push(Gr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Jr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace($r,"")}function es(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(i(425))}function ts(){}var ns=null,rs=null;function ss(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var is="function"===typeof setTimeout?setTimeout:void 0,as="function"===typeof clearTimeout?clearTimeout:void 0,os="function"===typeof Promise?Promise:void 0,ls="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof os?function(e){return os.resolve(null).then(e).catch(cs)}:is;function cs(e){setTimeout((function(){throw e}))}function us(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Bt(t)}function ds(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fs=Math.random().toString(36).slice(2),ps="__reactFiber$"+fs,ms="__reactProps$"+fs,gs="__reactContainer$"+fs,vs="__reactEvents$"+fs,ys="__reactListeners$"+fs,bs="__reactHandles$"+fs;function xs(e){var t=e[ps];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gs]||n[ps]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hs(e);null!==e;){if(n=e[ps])return n;e=hs(e)}return t}n=(e=n).parentNode}return null}function ws(e){return!(e=e[ps]||e[gs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ns(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Es(e){return e[ms]||null}var _s=[],ks=-1;function Ss(e){return{current:e}}function Cs(e){0>ks||(e.current=_s[ks],_s[ks]=null,ks--)}function Ts(e,t){ks++,_s[ks]=e.current,e.current=t}var Is={},js=Ss(Is),As=Ss(!1),Ds=Is;function Rs(e,t){var n=e.type.contextTypes;if(!n)return Is;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ps(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Os(){Cs(As),Cs(js)}function Ls(e,t,n){if(js.current!==Is)throw Error(i(168));Ts(js,t),Ts(As,n)}function Ms(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,q(e)||"Unknown",s));return M({},n,r)}function Fs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Is,Ds=js.current,Ts(js,e),Ts(As,As.current),!0}function Vs(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ms(e,t,Ds),r.__reactInternalMemoizedMergedChildContext=e,Cs(As),Cs(js),Ts(js,e)):Cs(As),Ts(As,n)}var Us=null,zs=!1,Bs=!1;function qs(e){null===Us?Us=[e]:Us.push(e)}function Hs(){if(!Bs&&null!==Us){Bs=!0;var e=0,t=bt;try{var n=Us;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Us=null,zs=!1}catch(s){throw null!==Us&&(Us=Us.slice(e+1)),Ge(Ze,Hs),s}finally{bt=t,Bs=!1}}return null}var Ws=[],Ks=0,Gs=null,Qs=0,Ys=[],Xs=0,Js=null,$s=1,Zs="";function ei(e,t){Ws[Ks++]=Qs,Ws[Ks++]=Gs,Gs=e,Qs=t}function ti(e,t,n){Ys[Xs++]=$s,Ys[Xs++]=Zs,Ys[Xs++]=Js,Js=e;var r=$s;e=Zs;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,$s=1<<32-at(t)+s|n<<s|r,Zs=i+e}else $s=1<<i|n<<s|r,Zs=e}function ni(e){null!==e.return&&(ei(e,1),ti(e,1,0))}function ri(e){for(;e===Gs;)Gs=Ws[--Ks],Ws[Ks]=null,Qs=Ws[--Ks],Ws[Ks]=null;for(;e===Js;)Js=Ys[--Xs],Ys[Xs]=null,Zs=Ys[--Xs],Ys[Xs]=null,$s=Ys[--Xs],Ys[Xs]=null}var si=null,ii=null,ai=!1,oi=null;function li(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ci(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,si=e,ii=ds(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,si=e,ii=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Js?{id:$s,overflow:Zs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,si=e,ii=null,!0);default:return!1}}function ui(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function di(e){if(ai){var t=ii;if(t){var n=t;if(!ci(e,t)){if(ui(e))throw Error(i(418));t=ds(n.nextSibling);var r=si;t&&ci(e,t)?li(r,n):(e.flags=-4097&e.flags|2,ai=!1,si=e)}}else{if(ui(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,si=e}}}function hi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;si=e}function fi(e){if(e!==si)return!1;if(!ai)return hi(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ss(e.type,e.memoizedProps)),t&&(t=ii)){if(ui(e))throw pi(),Error(i(418));for(;t;)li(e,t),t=ds(t.nextSibling)}if(hi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ii=ds(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ii=null}}else ii=si?ds(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=ii;e;)e=ds(e.nextSibling)}function mi(){ii=si=null,ai=!1}function gi(e){null===oi?oi=[e]:oi.push(e)}var vi=x.ReactCurrentBatchConfig;function yi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function bi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xi(e){return(0,e._init)(e._payload)}function wi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&xi(i)===t.type)?((r=s(t,n.props)).ref=yi(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=yi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=yi(e,null,t),n.return=e,n;case N:return(t=Uc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Mc(t,e.mode,n,null)).return=e,t;bi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case N:return n.key===s?u(e,t,n,r):null;case D:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||O(n))return null!==s?null:d(e,t,n,r,null);bi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case D:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,s,null);bi(t,r)}return null}function m(s,i,o,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(s,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(s,d),i=a(v,i,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(s,d),ai&&ei(s,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(s,o[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return ai&&ei(s,m),c}for(d=r(s,d);m<o.length;m++)null!==(g=p(d,s,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(s,e)})),ai&&ei(s,m),c}function g(s,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(s,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(s,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(s,m),ai&&ei(s,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(s,y.value,c))&&(o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return ai&&ei(s,g),u}for(m=r(s,m);!y.done;g++,y=l.next())null!==(y=p(m,s,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(s,e)})),ai&&ei(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&xi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=yi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===E?((i=Mc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Lc(a.type,a.key,a.props,null,r.mode,l)).ref=yi(r,i,a),l.return=r,r=l)}return o(r);case N:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Uc(a,r.mode,l)).return=r,r=i}return o(r);case D:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(O(a))return g(r,i,a,l);bi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Vc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var Ni=wi(!0),Ei=wi(!1),_i=Ss(null),ki=null,Si=null,Ci=null;function Ti(){Ci=Si=ki=null}function Ii(e){var t=_i.current;Cs(_i),e._currentValue=t}function ji(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ai(e,t){ki=e,Ci=Si=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function Di(e){var t=e._currentValue;if(Ci!==e)if(e={context:e,memoizedValue:t,next:null},null===Si){if(null===ki)throw Error(i(308));Si=e,ki.dependencies={lanes:0,firstContext:e}}else Si=Si.next=e;return t}var Ri=null;function Pi(e){null===Ri?Ri=[e]:Ri.push(e)}function Oi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Pi(t)):(n.next=s.next,s.next=n),t.interleaved=n,Li(e,r)}function Li(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mi=!1;function Fi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ui(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&jl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Li(e,n)}return null===(s=r.interleaved)?(t.next=t,Pi(r)):(t.next=s.next,s.next=t),r.interleaved=t,Li(e,n)}function Bi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function qi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hi(e,t,n,r){var s=e.updateQueue;Mi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Mi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=d}}function Wi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Ki={},Gi=Ss(Ki),Qi=Ss(Ki),Yi=Ss(Ki);function Xi(e){if(e===Ki)throw Error(i(174));return e}function Ji(e,t){switch(Ts(Yi,t),Ts(Qi,e),Ts(Gi,Ki),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cs(Gi),Ts(Gi,t)}function $i(){Cs(Gi),Cs(Qi),Cs(Yi)}function Zi(e){Xi(Yi.current);var t=Xi(Gi.current),n=le(t,e.type);t!==n&&(Ts(Qi,e),Ts(Gi,n))}function ea(e){Qi.current===e&&(Cs(Gi),Cs(Qi))}var ta=Ss(0);function na(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=[];function sa(){for(var e=0;e<ra.length;e++)ra[e]._workInProgressVersionPrimary=null;ra.length=0}var ia=x.ReactCurrentDispatcher,aa=x.ReactCurrentBatchConfig,oa=0,la=null,ca=null,ua=null,da=!1,ha=!1,fa=0,pa=0;function ma(){throw Error(i(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function va(e,t,n,r,s,a){if(oa=a,la=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?eo:to,e=n(r,s),ha){a=0;do{if(ha=!1,fa=0,25<=a)throw Error(i(301));a+=1,ua=ca=null,t.updateQueue=null,ia.current=no,e=n(r,s)}while(ha)}if(ia.current=Za,t=null!==ca&&null!==ca.next,oa=0,ua=ca=la=null,da=!1,t)throw Error(i(300));return e}function ya(){var e=0!==fa;return fa=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ua?la.memoizedState=ua=e:ua=ua.next=e,ua}function xa(){if(null===ca){var e=la.alternate;e=null!==e?e.memoizedState:null}else e=ca.next;var t=null===ua?la.memoizedState:ua.next;if(null!==t)ua=t,ca=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ca=e).memoizedState,baseState:ca.baseState,baseQueue:ca.baseQueue,queue:ca.queue,next:null},null===ua?la.memoizedState=ua=e:ua=ua.next=e}return ua}function wa(e,t){return"function"===typeof t?t(e):t}function Na(e){var t=xa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ca,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((oa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,la.lanes|=d,Fl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,cr(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,la.lanes|=a,Fl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ea(e){var t=xa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);cr(a,t.memoizedState)||(wo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function _a(){}function ka(e,t){var n=la,r=xa(),s=t(),a=!cr(r.memoizedState,s);if(a&&(r.memoizedState=s,wo=!0),r=r.queue,Ma(Ta.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ua&&1&ua.memoizedState.tag){if(n.flags|=2048,Da(9,Ca.bind(null,n,r,s,t),void 0,null),null===Al)throw Error(i(349));0!==(30&oa)||Sa(n,t,s)}return s}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=la.updateQueue)?(t={lastEffect:null,stores:null},la.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ca(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&ja(e)}function Ta(e,t,n){return n((function(){Ia(t)&&ja(e)}))}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cr(e,n)}catch(r){return!0}}function ja(e){var t=Li(e,1);null!==t&&sc(t,e,1,-1)}function Aa(e){var t=ba();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,la,e),[t.memoizedState,e]}function Da(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=la.updateQueue)?(t={lastEffect:null,stores:null},la.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ra(){return xa().memoizedState}function Pa(e,t,n,r){var s=ba();la.flags|=e,s.memoizedState=Da(1|t,n,void 0,void 0===r?null:r)}function Oa(e,t,n,r){var s=xa();r=void 0===r?null:r;var i=void 0;if(null!==ca){var a=ca.memoizedState;if(i=a.destroy,null!==r&&ga(r,a.deps))return void(s.memoizedState=Da(t,n,i,r))}la.flags|=e,s.memoizedState=Da(1|t,n,i,r)}function La(e,t){return Pa(8390656,8,e,t)}function Ma(e,t){return Oa(2048,8,e,t)}function Fa(e,t){return Oa(4,2,e,t)}function Va(e,t){return Oa(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4,4,Ua.bind(null,t,e),n)}function Ba(){}function qa(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ha(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&oa)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(cr(n,t)||(n=mt(),la.lanes|=n,Fl|=n,e.baseState=!0),t)}function Ka(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=aa.transition;aa.transition={};try{e(!1),t()}finally{bt=n,aa.transition=r}}function Ga(){return xa().memoizedState}function Qa(e,t,n){var r=rc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))Ja(t,n);else if(null!==(n=Oi(e,t,n,r))){sc(n,e,r,nc()),$a(n,t,r)}}function Ya(e,t,n){var r=rc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ja(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,cr(o,a)){var l=t.interleaved;return null===l?(s.next=s,Pi(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Oi(e,t,s,r))&&(sc(n,e,r,s=nc()),$a(n,t,r))}}function Xa(e){var t=e.alternate;return e===la||null!==t&&t===la}function Ja(e,t){ha=da=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $a(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Za={readContext:Di,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},eo={readContext:Di,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:Di,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qa.bind(null,la,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:Aa,useDebugValue:Ba,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=Aa(!1),t=e[0];return e=Ka.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=la,s=ba();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Al)throw Error(i(349));0!==(30&oa)||Sa(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,La(Ta.bind(null,r,a,e),[e]),r.flags|=2048,Da(9,Ca.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ba(),t=Al.identifierPrefix;if(ai){var n=Zs;t=":"+t+"R"+(n=($s&~(1<<32-at($s)-1)).toString(32)+n),0<(n=fa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},to={readContext:Di,useCallback:qa,useContext:Di,useEffect:Ma,useImperativeHandle:za,useInsertionEffect:Fa,useLayoutEffect:Va,useMemo:Ha,useReducer:Na,useRef:Ra,useState:function(){return Na(wa)},useDebugValue:Ba,useDeferredValue:function(e){return Wa(xa(),ca.memoizedState,e)},useTransition:function(){return[Na(wa)[0],xa().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:Ga,unstable_isNewReconciler:!1},no={readContext:Di,useCallback:qa,useContext:Di,useEffect:Ma,useImperativeHandle:za,useInsertionEffect:Fa,useLayoutEffect:Va,useMemo:Ha,useReducer:Ea,useRef:Ra,useState:function(){return Ea(wa)},useDebugValue:Ba,useDeferredValue:function(e){var t=xa();return null===ca?t.memoizedState=e:Wa(t,ca.memoizedState,e)},useTransition:function(){return[Ea(wa)[0],xa().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:Ga,unstable_isNewReconciler:!1};function ro(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function so(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nc(),s=rc(e),i=Ui(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,s))&&(sc(t,e,s,r),Bi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nc(),s=rc(e),i=Ui(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,s))&&(sc(t,e,s,r),Bi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nc(),r=rc(e),s=Ui(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=zi(e,s,r))&&(sc(t,e,r,n),Bi(t,e,r))}};function ao(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(s,i))}function oo(e,t,n){var r=!1,s=Is,i=t.contextType;return"object"===typeof i&&null!==i?i=Di(i):(s=Ps(t)?Ds:js.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Rs(e,s):Is),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function lo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function co(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Fi(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Di(i):(i=Ps(t)?Ds:js.current,s.context=Rs(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(so(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&io.enqueueReplaceState(s,s.state,null),Hi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function uo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function ho(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var po="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=Ui(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Gl=r),fo(0,t)},n}function go(e,t,n){(n=Ui(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){fo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){fo(0,t),"function"!==typeof r&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new po;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ui(-1,1)).tag=2,zi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var xo=x.ReactCurrentOwner,wo=!1;function No(e,t,n,r){t.child=null===e?Ei(t,null,n,r):Ni(t,e.child,n,r)}function Eo(e,t,n,r,s){n=n.render;var i=t.ref;return Ai(t,s),r=va(e,t,n,r,i,s),n=ya(),null===e||wo?(ai&&n&&ni(t),t.flags|=1,No(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ko(e,t,s))}function _o(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Pc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ko(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return Ko(e,t,s)}return t.flags|=1,(e=Oc(i,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Ko(e,t,s);0!==(131072&e.flags)&&(wo=!0)}}return To(e,t,n,r,s)}function So(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ts(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ts(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ts(Ol,Pl),Pl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ts(Ol,Pl),Pl|=r;return No(e,t,s,n),t.child}function Co(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function To(e,t,n,r,s){var i=Ps(n)?Ds:js.current;return i=Rs(t,i),Ai(t,s),n=va(e,t,n,r,i,s),r=ya(),null===e||wo?(ai&&r&&ni(t),t.flags|=1,No(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ko(e,t,s))}function Io(e,t,n,r,s){if(Ps(n)){var i=!0;Fs(t)}else i=!1;if(Ai(t,s),null===t.stateNode)Wo(e,t),oo(t,n,r),co(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Di(c):c=Rs(t,c=Ps(n)?Ds:js.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&lo(t,a,r,c),Mi=!1;var h=t.memoizedState;a.state=h,Hi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||As.current||Mi?("function"===typeof u&&(so(t,n,u,r),l=t.memoizedState),(o=Mi||ao(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Vi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:ro(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Di(l):l=Rs(t,l=Ps(n)?Ds:js.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&lo(t,a,r,l),Mi=!1,h=t.memoizedState,a.state=h,Hi(t,r,a,s);var p=t.memoizedState;o!==d||h!==p||As.current||Mi?("function"===typeof f&&(so(t,n,f,r),p=t.memoizedState),(c=Mi||ao(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return jo(e,t,n,r,i,s)}function jo(e,t,n,r,s,i){Co(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Vs(t,n,!1),Ko(e,t,i);r=t.stateNode,xo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ni(t,e.child,null,i),t.child=Ni(t,null,o,i)):No(e,t,o,i),t.memoizedState=r.state,s&&Vs(t,n,!0),t.child}function Ao(e){var t=e.stateNode;t.pendingContext?Ls(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ls(0,t.context,!1),Ji(e,t.containerInfo)}function Do(e,t,n,r,s){return mi(),gi(s),t.flags|=256,No(e,t,n,r),t.child}var Ro,Po,Oo,Lo,Mo={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vo(e,t,n){var r,s=t.pendingProps,a=ta.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ts(ta,1&a),null===e)return di(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Fc(l,s,0,null),e=Mc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Fo(n),t.memoizedState=Mo,e):Uo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=ho(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Fc({mode:"visible",children:r.children},s,0,null),(a=Mc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Ni(t,e.child,null,o),t.child.memoizedState=Fo(o),t.memoizedState=Mo,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=ho(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=Al)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Li(e,s),sc(r,e,s,-1))}return vc(),zo(e,t,o,r=ho(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ii=ds(s.nextSibling),si=t,ai=!0,oi=null,null!==e&&(Ys[Xs++]=$s,Ys[Xs++]=Zs,Ys[Xs++]=Js,$s=e.id,Zs=e.overflow,Js=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Oc(r,o):(o=Mc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Fo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,s}return e=(o=e.child).sibling,s=Oc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Uo(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&gi(r),Ni(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ji(e.return,t,n)}function qo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ho(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(No(e,t,r.children,n),0!==(2&(r=ta.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ts(ta,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===na(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),qo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===na(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}qo(t,!0,n,null,i);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ko(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yo(e,t,n){var r=t.pendingProps;switch(ri(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:case 17:return Ps(t.type)&&Os(),Qo(t),null;case 3:return r=t.stateNode,$i(),Cs(As),Cs(js),sa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oi&&(lc(oi),oi=null))),Po(e,t),Qo(t),null;case 5:ea(t);var s=Xi(Yi.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Qo(t),null}if(e=Xi(Gi.current),fi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ps]=t,r[ms]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(s=0;s<Mr.length;s++)zr(Mr[s],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":X(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":se(r,a),zr("invalid",r)}for(var l in ye(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&es(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&es(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=ts)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ps]=t,e[ms]=r,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),s=r;break;case"iframe":case"object":case"embed":zr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Mr.length;s++)zr(Mr[s],e);s=r;break;case"source":zr("error",e),s=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),s=r;break;case"details":zr("toggle",e),s=r;break;case"input":X(e,r),s=Y(e,r),zr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),zr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),zr("invalid",e)}for(a in ye(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&zr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=ts)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Xi(Yi.current),Xi(Gi.current),fi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ps]=t,(a=r.nodeValue!==n)&&null!==(e=si))switch(e.tag){case 3:es(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&es(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ps]=t,t.stateNode=r}return Qo(t),null;case 13:if(Cs(ta),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ii&&0!==(1&t.mode)&&0===(128&t.flags))pi(),mi(),t.flags|=98560,a=!1;else if(a=fi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[ps]=t}else mi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qo(t),a=!1}else null!==oi&&(lc(oi),oi=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ta.current)?0===Ll&&(Ll=3):vc())),null!==t.updateQueue&&(t.flags|=4),Qo(t),null);case 4:return $i(),Po(e,t),null===e&&Hr(t.stateNode.containerInfo),Qo(t),null;case 10:return Ii(t.type._context),Qo(t),null;case 19:if(Cs(ta),null===(a=t.memoizedState))return Qo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Go(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=na(e))){for(t.flags|=128,Go(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ts(ta,1&ta.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Hl&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=na(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ai)return Qo(t),null}else 2*Je()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=ta.current,Ts(ta,r?1&n|2:1&n),t):(Qo(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Qo(t),6&t.subtreeFlags&&(t.flags|=8192)):Qo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Xo(e,t){switch(ri(t),t.tag){case 1:return Ps(t.type)&&Os(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $i(),Cs(As),Cs(js),sa(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ea(t),null;case 13:if(Cs(ta),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));mi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cs(ta),null;case 4:return $i(),null;case 10:return Ii(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Oo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Xi(Gi.current);var i,a=null;switch(n){case"input":s=Y(e,s),r=Y(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=ts)}for(u in ye(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Lo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,$o=!1,Zo="function"===typeof WeakSet?WeakSet:Set,el=null;function tl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function nl(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var rl=!1;function sl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&nl(t,n,i)}s=s.next}while(s!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ps],delete t[ms],delete t[vs],delete t[ys],delete t[bs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ll(e){return 5===e.tag||3===e.tag||4===e.tag}function cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ll(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ts));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}var hl=null,fl=!1;function pl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:$o||tl(n,t);case 6:var r=hl,s=fl;hl=null,pl(e,t,n),fl=s,null!==(hl=r)&&(fl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(fl?(e=hl,n=n.stateNode,8===e.nodeType?us(e.parentNode,n):1===e.nodeType&&us(e,n),Bt(e)):us(hl,n.stateNode));break;case 4:r=hl,s=fl,hl=n.stateNode.containerInfo,fl=!0,pl(e,t,n),hl=r,fl=s;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&nl(n,t,a),s=s.next}while(s!==r)}pl(e,t,n);break;case 1:if(!$o&&(tl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sc(n,t,o)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?($o=(r=$o)||null!==n.memoizedState,pl(e,t,n),$o=r):pl(e,t,n);break;default:pl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zo),t.forEach((function(t){var r=jc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,fl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===hl)throw Error(i(160));ml(a,o,s),hl=null,fl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){Sc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vl(t,e),bl(e),4&r){try{sl(3,e,e.return),il(3,e)}catch(g){Sc(e,e.return,g)}try{sl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:vl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return);break;case 5:if(vl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(s,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):b(s,d,h,u)}switch(l){case"input":$(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[ms]=a}catch(g){Sc(e,e.return,g)}}break;case 6:if(vl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){Sc(e,e.return,g)}}break;case 3:if(vl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:vl(t,e),bl(e);break;case 13:vl(t,e),bl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(ql=Je())),4&r&&gl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($o=(u=$o)||d,vl(t,e),$o=u):vl(t,e),bl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(el=e,d=e.child;null!==d;){for(h=el=d;null!==el;){switch(p=(f=el).child,f.tag){case 0:case 11:case 14:case 15:sl(4,f,f.return);break;case 1:tl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){El(h);continue}}null!==p?(p.return=f,el=p):El(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vl(t,e),bl(e),4&r&&gl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ll(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),dl(e,cl(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;ul(e,cl(e),a);break;default:throw Error(i(161))}}catch(Kn){Sc(e,e.return,Kn)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){el=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==el;){var s=el,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Jo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Jo;var c=$o;if(Jo=a,($o=l)&&!c)for(el=s;null!==el;)l=(a=el).child,22===a.tag&&null!==a.memoizedState?_l(s):null!==l?(l.return=a,el=l):_l(s);for(;null!==i;)el=i,wl(i,t,n),i=i.sibling;el=s,Jo=o,$o=c}Nl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,el=i):Nl(e)}}function Nl(e){for(;null!==el;){var t=el;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$o)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ro(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Wi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(i(163))}$o||512&t.flags&&al(t)}catch(f){Sc(t,t.return,f)}}if(t===e){el=null;break}if(null!==(n=t.sibling)){n.return=t.return,el=n;break}el=t.return}}function El(e){for(;null!==el;){var t=el;if(t===e){el=null;break}var n=t.sibling;if(null!==n){n.return=t.return,el=n;break}el=t.return}}function _l(e){for(;null!==el;){var t=el;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(Kn){Sc(t,n,Kn)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(Kn){Sc(t,s,Kn)}}var i=t.return;try{al(t)}catch(Kn){Sc(t,i,Kn)}break;case 5:var a=t.return;try{al(t)}catch(Kn){Sc(t,a,Kn)}}}catch(Kn){Sc(t,t.return,Kn)}if(t===e){el=null;break}var o=t.sibling;if(null!==o){o.return=t.return,el=o;break}el=t.return}}var kl,Sl=Math.ceil,Cl=x.ReactCurrentDispatcher,Tl=x.ReactCurrentOwner,Il=x.ReactCurrentBatchConfig,jl=0,Al=null,Dl=null,Rl=0,Pl=0,Ol=Ss(0),Ll=0,Ml=null,Fl=0,Vl=0,Ul=0,zl=null,Bl=null,ql=0,Hl=1/0,Wl=null,Kl=!1,Gl=null,Ql=null,Yl=!1,Xl=null,Jl=0,$l=0,Zl=null,ec=-1,tc=0;function nc(){return 0!==(6&jl)?Je():-1!==ec?ec:ec=Je()}function rc(e){return 0===(1&e.mode)?1:0!==(2&jl)&&0!==Rl?Rl&-Rl:null!==vi.transition?(0===tc&&(tc=mt()),tc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function sc(e,t,n,r){if(50<$l)throw $l=0,Zl=null,Error(i(185));vt(e,n,r),0!==(2&jl)&&e===Al||(e===Al&&(0===(2&jl)&&(Vl|=n),4===Ll&&cc(e,Rl)),ic(e,r),1===n&&0===jl&&0===(1&t.mode)&&(Hl=Je()+500,zs&&Hs()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Al?Rl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zs=!0,qs(e)}(uc.bind(null,e)):qs(uc.bind(null,e)),ls((function(){0===(6&jl)&&Hs()})),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(ec=-1,tc=0,0!==(6&jl))throw Error(i(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Al?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var s=jl;jl|=2;var a=gc();for(Al===e&&Rl===t||(Wl=null,Hl=Je()+500,pc(e,t));;)try{xc();break}catch(l){mc(e,l)}Ti(),Cl.current=a,jl=s,null!==Dl?t=0:(Al=null,Rl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(r=s,t=oc(e,s))),1===t)throw n=Ml,pc(e,0),cc(e,r),ic(e,Je()),n;if(6===t)cc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!cr(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=yc(e,r))&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t))throw n=Ml,pc(e,0),cc(e,r),ic(e,Je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Ec(e,Bl,Wl);break;case 3:if(cc(e,r),(130023424&r)===r&&10<(t=ql+500-Je())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){nc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=is(Ec.bind(null,e,Bl,Wl),t);break}Ec(e,Bl,Wl);break;case 4:if(cc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=is(Ec.bind(null,e,Bl,Wl),r);break}Ec(e,Bl,Wl);break;default:throw Error(i(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bl,Bl=n,null!==t&&lc(t)),e}function lc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function cc(e,t){for(t&=~Ul,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&jl))throw Error(i(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,pc(e,0),cc(e,t),ic(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,Bl,Wl),ic(e,Je()),null}function dc(e,t){var n=jl;jl|=1;try{return e(t)}finally{0===(jl=n)&&(Hl=Je()+500,zs&&Hs())}}function hc(e){null!==Xl&&0===Xl.tag&&0===(6&jl)&&_c();var t=jl;jl|=1;var n=Il.transition,r=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=r,Il.transition=n,0===(6&(jl=t))&&Hs()}}function fc(){Pl=Ol.current,Cs(Ol)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,as(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(ri(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Os();break;case 3:$i(),Cs(As),Cs(js),sa();break;case 5:ea(r);break;case 4:$i();break;case 13:case 19:Cs(ta);break;case 10:Ii(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Al=e,Dl=e=Oc(e.current,null),Rl=Pl=t,Ll=0,Ml=null,Ul=Vl=Fl=0,Bl=zl=null,null!==Ri){for(t=0;t<Ri.length;t++)if(null!==(r=(n=Ri[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Ri=null}return e}function mc(e,t){for(;;){var n=Dl;try{if(Ti(),ia.current=Za,da){for(var r=la.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}da=!1}if(oa=0,ua=ca=la=null,ha=!1,fa=0,Tl.current=null,null===n||null===n.return){Ll=1,Ml=t,Dl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=yo(o);if(null!==p){p.flags&=-257,bo(p,o,l,0,t),1&p.mode&&vo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){vo(a,u,t),vc();break e}c=Error(i(426))}else if(ai&&1&l.mode){var v=yo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),bo(v,o,l,0,t),gi(uo(c,l));break e}}a=c=uo(c,l),4!==Ll&&(Ll=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,qi(a,mo(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ql||!Ql.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,qi(a,go(a,l,t));break e}}a=a.return}while(null!==a)}Nc(n)}catch(x){t=x,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function gc(){var e=Cl.current;return Cl.current=Za,null===e?Za:e}function vc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Al||0===(268435455&Fl)&&0===(268435455&Vl)||cc(Al,Rl)}function yc(e,t){var n=jl;jl|=2;var r=gc();for(Al===e&&Rl===t||(Wl=null,pc(e,t));;)try{bc();break}catch(s){mc(e,s)}if(Ti(),jl=n,Cl.current=r,null!==Dl)throw Error(i(261));return Al=null,Rl=0,Ll}function bc(){for(;null!==Dl;)wc(Dl)}function xc(){for(;null!==Dl&&!Ye();)wc(Dl)}function wc(e){var t=kl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?Nc(e):Dl=t,Tl.current=null}function Nc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Pl)))return void(Dl=n)}else{if(null!==(n=Xo(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Ll=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Ec(e,t,n){var r=bt,s=Il.transition;try{Il.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Xl);if(0!==(6&jl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Al&&(Dl=Al=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Ac(tt,(function(){return _c(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Il.transition,Il.transition=null;var o=bt;bt=1;var l=jl;jl|=4,Tl.current=null,function(e,t){if(ns=Ht,mr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(cn){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rs={focusedElem:e,selectionRange:n},Ht=!1,el=t;null!==el;)if(e=(t=el).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,el=e;else for(;null!==el;){t=el;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ro(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(cn){Sc(t,t.return,cn)}if(null!==(e=t.sibling)){e.return=t.return,el=e;break}el=t.return}m=rl,rl=!1}(e,n),yl(n,e),gr(rs),Ht=!!ns,rs=ns=null,e.current=n,xl(n,e,s),Xe(),jl=l,bt=o,Il.transition=a}else e.current=n;if(Yl&&(Yl=!1,Xl=e,Jl=s),a=e.pendingLanes,0===a&&(Ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Kl)throw Kl=!1,e=Gl,Gl=null,e;0!==(1&Jl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Zl?$l++:($l=0,Zl=e):$l=0,Hs()}(e,t,n,r)}finally{Il.transition=s,bt=r}return null}function _c(){if(null!==Xl){var e=xt(Jl),t=Il.transition,n=bt;try{if(Il.transition=null,bt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Jl=0,0!==(6&jl))throw Error(i(331));var s=jl;for(jl|=4,el=e.current;null!==el;){var a=el,o=a.child;if(0!==(16&el.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(el=u;null!==el;){var d=el;switch(d.tag){case 0:case 11:case 15:sl(8,d,a)}var h=d.child;if(null!==h)h.return=d,el=h;else for(;null!==el;){var f=(d=el).sibling,p=d.return;if(ol(d),d===u){el=null;break}if(null!==f){f.return=p,el=f;break}el=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}el=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,el=o;else e:for(;null!==el;){if(0!==(2048&(a=el).flags))switch(a.tag){case 0:case 11:case 15:sl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,el=y;break e}el=a.return}}var b=e.current;for(el=b;null!==el;){var x=(o=el).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,el=x;else e:for(o=b;null!==el;){if(0!==(2048&(l=el).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(N){Sc(l,l.return,N)}if(l===o){el=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,el=w;break e}el=l.return}}if(jl=s,Hs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(N){}r=!0}return r}finally{bt=n,Il.transition=t}}return!1}function kc(e,t,n){e=zi(e,t=mo(0,t=uo(n,t),1),1),t=nc(),null!==e&&(vt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ql||!Ql.has(r))){t=zi(t,e=go(t,e=uo(n,e),1),1),e=nc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Rl&n)===n&&(4===Ll||3===Ll&&(130023424&Rl)===Rl&&500>Je()-ql?pc(e,0):Ul|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=nc();null!==(e=Li(e,t))&&(vt(e,t,n),ic(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function jc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return Ge(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Dc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case E:return Mc(n.children,s,a,t);case _:o=8,s|=8;break;case k:return(e=Rc(12,n,t,2|s)).elementType=k,e.lanes=a,e;case I:return(e=Rc(13,n,t,s)).elementType=I,e.lanes=a,e;case j:return(e=Rc(19,n,t,s)).elementType=j,e.lanes=a,e;case R:return Fc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case T:o=11;break e;case A:o=14;break e;case D:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Rc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Vc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,s,i,a,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fi(i),e}function qc(e){if(!e)return Is;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ps(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ps(n))return Ms(e,n,t)}return t}function Hc(e,t,n,r,s,i,a,o,l){return(e=Bc(n,r,!0,e,0,i,0,o,l)).context=qc(null),n=e.current,(i=Ui(r=nc(),s=rc(n))).callback=void 0!==t&&null!==t?t:null,zi(n,i,s),e.current.lanes=s,vt(e,s,r),ic(e,r),e}function Wc(e,t,n,r){var s=t.current,i=nc(),a=rc(s);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ui(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zi(s,t,a))&&(sc(e,s,a,i),Bi(e,s,a)),a}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||As.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:Ao(t),mi();break;case 5:Zi(t);break;case 1:Ps(t.type)&&Fs(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ts(_i,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ts(ta,1&ta.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Vo(e,t,n):(Ts(ta,1&ta.current),null!==(e=Ko(e,t,n))?e.sibling:null);Ts(ta,1&ta.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ho(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ts(ta,ta.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Ko(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,ai&&0!==(1048576&t.flags)&&ti(t,Qs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wo(e,t),e=t.pendingProps;var s=Rs(t,js.current);Ai(t,n),s=va(null,t,r,e,s,n);var a=ya();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ps(r)?(a=!0,Fs(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Fi(t),s.updater=io,t.stateNode=s,s._reactInternals=t,co(t,r,e,n),t=jo(null,t,r,!0,a,n)):(t.tag=0,ai&&a&&ni(t),No(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===A)return 14}return 2}(r),e=ro(r,e),s){case 0:t=To(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=Eo(null,t,r,e,n);break e;case 14:t=_o(null,t,r,ro(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,To(e,t,r,s=t.elementType===r?s:ro(r,s),n);case 1:return r=t.type,s=t.pendingProps,Io(e,t,r,s=t.elementType===r?s:ro(r,s),n);case 3:e:{if(Ao(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Vi(e,t),Hi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Do(e,t,r,n,s=uo(Error(i(423)),t));break e}if(r!==s){t=Do(e,t,r,n,s=uo(Error(i(424)),t));break e}for(ii=ds(t.stateNode.containerInfo.firstChild),si=t,ai=!0,oi=null,n=Ei(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mi(),r===s){t=Ko(e,t,n);break e}No(e,t,r,n)}t=t.child}return t;case 5:return Zi(t),null===e&&di(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ss(r,s)?o=null:null!==a&&ss(r,a)&&(t.flags|=32),Co(e,t),No(e,t,o,n),t.child;case 6:return null===e&&di(t),null;case 13:return Vo(e,t,n);case 4:return Ji(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ni(t,null,r,n):No(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,Eo(e,t,r,s=t.elementType===r?s:ro(r,s),n);case 7:return No(e,t,t.pendingProps,n),t.child;case 8:case 12:return No(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Ts(_i,r._currentValue),r._currentValue=o,null!==a)if(cr(a.value,o)){if(a.children===s.children&&!As.current){t=Ko(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Ui(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),ji(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ji(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}No(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ai(t,n),r=r(s=Di(s)),t.flags|=1,No(e,t,r,n),t.child;case 14:return s=ro(r=t.type,t.pendingProps),_o(e,t,r,s=ro(r.type,s),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ro(r,s),Wo(e,t),t.tag=1,Ps(r)?(e=!0,Fs(t)):e=!1,Ai(t,n),oo(t,r,s),co(t,r,s,n),jo(null,t,r,!0,e,n);case 19:return Ho(e,t,n);case 22:return So(e,t,n)}throw Error(i(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function eu(){}function tu(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Kc(a);o.call(e)}}Wc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Kc(a);i.call(e)}}var a=Hc(t,r,e,0,null,!1,0,"",eu);return e._reactRootContainer=a,e[gs]=a.current,Hr(8===e.nodeType?e.parentNode:e),hc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Kc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",eu);return e._reactRootContainer=l,e[gs]=l.current,Hr(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,l,n,r)})),l}(n,t,e,s,r);return Kc(a)}Jc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Wc(e,t,null,null)},Jc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[gs]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Je()),0===(6&jl)&&(Hl=Je()+500,Hs()))}break;case 13:hc((function(){var t=Li(e,1);if(null!==t){var n=nc();sc(t,e,1,n)}})),Qc(e,1)}},Nt=function(e){if(13===e.tag){var t=Li(e,134217728);if(null!==t)sc(t,e,134217728,nc());Qc(e,134217728)}},Et=function(e){if(13===e.tag){var t=rc(e),n=Li(e,t);if(null!==n)sc(n,e,t,nc());Qc(e,t)}},_t=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ne=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Es(r);if(!s)throw Error(i(90));G(r),$(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=dc,Ie=hc;var nu={usingClientEntryPoint:!1,Events:[ws,Ns,Es,Se,Ce,dc]},ru={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},su={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{st=iu.inject(su),it=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(i(299));var n=!1,r="",s=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,s),e[gs]=t.current,Hr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(i(200));return tu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,s,0,a,o),e[gs]=t.current,Hr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Jc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(i(200));return tu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(i(40));return!!e._reactRootContainer&&(hc((function(){tu(null,null,e,!1,(function(){e._reactRootContainer=null,e[gs]=null}))})),!0)},t.unstable_batchedUpdates=dc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return tu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},352:(e,t,n)=>{var r=n(119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},414:(e,t,n)=>{e.exports=n(654)},654:(e,t,n)=>{var r=n(950),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},761:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,R(N);else{var t=r(u);null!==t&&P(w,t.startTime-e)}}function N(e,n){m=!1,g&&(g=!1,y(S),S=-1),p=!0;var i=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),x(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&P(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,_=!1,k=null,S=-1,C=5,T=-1;function I(){return!(t.unstable_now()-T<C)}function j(){if(null!==k){var e=t.unstable_now();T=e;var n=!0;try{n=k(!0,e)}finally{n?E():(_=!1,k=null)}}else _=!1}if("function"===typeof b)E=function(){b(j)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=j,E=function(){D.postMessage(null)}}else E=function(){v(j,0)};function R(e){k=e,_||(_=!0,E())}function P(e,n){S=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(y(S),S=-1):g=!0,P(w,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,R(N))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{e.exports=n(49)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(950),s=n(352);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const h=["color","size","strokeWidth","absoluteStrokeWidth","children"];var f=(e,t)=>{const n=(0,r.forwardRef)(((n,s)=>{let{color:i="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:f}=n,p=u(n,h);return(0,r.createElement)("svg",c(c({ref:s},d),{},{width:a,height:a,stroke:i,strokeWidth:l?24*Number(o)/Number(a):o,className:"lucide lucide-".concat((m=e,m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},p),[...t.map((e=>{let[t,n]=e;return(0,r.createElement)(t,n)})),...(Array.isArray(f)?f:[f])||[]]);var m}));return n.displayName="".concat(e),n};const p=f("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),m=f("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),g=f("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),v=f("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),y=f("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),b=f("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),x=f("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),w=f("Car",[["path",{d:"M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2",key:"l5np60"}],["circle",{cx:"6.5",cy:"16.5",r:"2.5",key:"ae40ju"}],["circle",{cx:"16.5",cy:"16.5",r:"2.5",key:"1smtlt"}]]),N=f("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),E=f("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),_=f("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),k=f("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),S=f("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),C=f("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),T=f("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),I=f("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),j=f("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),A=f("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),D=f("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var R=n(414);const P=["children","className","variant","size","interactive","loading"],O=["title","value","icon","change","changeType","color","className"],L=["title","value","target","icon","color","className"],M=e=>{let{children:t,className:n="",variant:r="default",size:s="md",interactive:i=!1,loading:a=!1}=e,o=u(e,P);const l=i?"cursor-pointer hover:scale-[1.02] hover:shadow-glass-lg":"",d="\n    ".concat("glass-card transition-all duration-300","\n    ").concat({default:"",elevated:"shadow-glass-lg hover:shadow-glass-xl",flat:"shadow-soft border border-gray-200",gradient:"bg-gradient-to-br from-white/80 to-white/60",dark:"bg-gray-800/80 text-white border-gray-700/50"}[r],"\n    ").concat({sm:"p-4 rounded-xl",md:"p-6 rounded-2xl",lg:"p-8 rounded-3xl",xl:"p-10 rounded-3xl"}[s],"\n    ").concat(l,"\n    ").concat(n,"\n  ").trim();return a?(0,R.jsx)("div",c(c({className:d},o),{},{children:(0,R.jsxs)("div",{className:"animate-pulse",children:[(0,R.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),(0,R.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),(0,R.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})})):(0,R.jsx)("div",c(c({className:d},o),{},{children:t}))},F=e=>{let{title:t,value:n,icon:r,change:s,changeType:i="positive",color:a="blue",className:o=""}=e,l=u(e,O);return(0,R.jsxs)(M,c(c({variant:"elevated",className:"stat-card ".concat(o)},l),{},{children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,R.jsx)("div",{className:"p-3 rounded-2xl bg-gradient-to-r ".concat({blue:"from-blue-500 to-blue-600",green:"from-green-500 to-green-600",orange:"from-orange-500 to-orange-600",purple:"from-purple-500 to-purple-600",red:"from-red-500 to-red-600",cyan:"from-cyan-500 to-cyan-600"}[a]," shadow-lg"),children:(0,R.jsx)(r,{className:"text-white",size:24})}),(0,R.jsxs)("div",{className:"text-right",children:[(0,R.jsx)("div",{className:"text-3xl font-bold gradient-text",children:n}),s&&(0,R.jsx)("div",{className:"text-sm font-semibold mt-1 ".concat({positive:"text-green-600",negative:"text-red-600",neutral:"text-gray-600"}[i]),children:s})]})]}),(0,R.jsx)("div",{children:(0,R.jsx)("p",{className:"text-gray-700 font-semibold",children:t})})]}))},V=e=>{let{title:t,value:n,target:r,icon:s,color:i="blue",className:a=""}=e,o=u(e,L);const l=r?Math.round(n/r*100):0,d={blue:{gradient:"from-blue-500 to-blue-600",bg:"bg-blue-100",text:"text-blue-600"},green:{gradient:"from-green-500 to-green-600",bg:"bg-green-100",text:"text-green-600"},orange:{gradient:"from-orange-500 to-orange-600",bg:"bg-orange-100",text:"text-orange-600"},purple:{gradient:"from-purple-500 to-purple-600",bg:"bg-purple-100",text:"text-purple-600"}}[i];return(0,R.jsxs)(M,c(c({className:a},o),{},{children:[(0,R.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,R.jsx)("div",{className:"p-3 rounded-2xl ".concat(d.bg),children:(0,R.jsx)(s,{className:d.text,size:20})}),(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsx)("h3",{className:"font-semibold text-gray-800",children:t}),(0,R.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,R.jsx)("span",{className:"text-2xl font-bold gradient-text",children:n}),r&&(0,R.jsxs)("span",{className:"text-gray-500 text-sm",children:["/ ",r]})]})]})]}),r&&(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,R.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Progression"}),(0,R.jsxs)("span",{className:"text-sm font-bold text-gray-800",children:[l,"%"]})]}),(0,R.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,R.jsx)("div",{className:"h-2 rounded-full bg-gradient-to-r ".concat(d.gradient," transition-all duration-1000"),style:{width:"".concat(Math.min(l,100),"%")}})})]})]}))},U=M,z=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},B={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(z(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new q;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class q extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const H=function(e){return function(e){const t=z(e);return B.encodeByteArray(t,!0)}(e).replace(/\./g,"")},W=function(e){try{return B.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function K(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const G=()=>{try{return K().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/pronet",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALLOWED_ORIGINS:"http://localhost:3000,https://votre-domaine.com",REACT_APP_API_BASE_URL:"https://sheets.googleapis.com/v4/spreadsheets",REACT_APP_API_TIMEOUT:"10000",REACT_APP_AUTO_BACKUP_INTERVAL:"3600000",REACT_APP_BACKUP_STORAGE:"local",REACT_APP_BUILD_OPTIMIZE:"true",REACT_APP_CACHE_DURATION:"300000",REACT_APP_CDN_URL:"https://cdn.votre-domaine.com",REACT_APP_COMPRESS_ASSETS:"true",REACT_APP_CORS_ORIGINS:"http://localhost:3000,https://votre-domaine.com",REACT_APP_DATE_FORMAT:"DD/MM/YYYY",REACT_APP_DEFAULT_CURRENCY:"EUR",REACT_APP_DEFAULT_LANGUAGE:"fr",REACT_APP_DEFAULT_PAYMENT_TERM:"30",REACT_APP_DEFAULT_THEME:"light",REACT_APP_DEFAULT_VAT_RATE:"20",REACT_APP_ENABLE_DEBUG_MODE:"false",REACT_APP_ENABLE_GOOGLE_SHEETS:"true",REACT_APP_ENABLE_NOTIFICATIONS:"true",REACT_APP_ENABLE_OFFLINE_MODE:"true",REACT_APP_ENABLE_PWA:"true",REACT_APP_ENCRYPTION_KEY:"your-32-char-encryption-key-here",REACT_APP_ENVIRONMENT:"development",REACT_APP_FIREBASE_API_KEY:"AIzaSyBzeWurVuCR9QT08C96qEB7xpyYjoZ6I-U",REACT_APP_FIREBASE_APP_ID:"1:974831664860:web:770524f7cbe2c5a392fe19",REACT_APP_FIREBASE_AUTH_DOMAIN:"unicom-e678a.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://unicom-e678a-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-YEDR17FP92",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"974831664860",REACT_APP_FIREBASE_PROJECT_ID:"unicom-e678a",REACT_APP_FIREBASE_STORAGE_BUCKET:"unicom-e678a.firebasestorage.app",REACT_APP_GA_TRACKING_ID:"GA-XXXXXXXXX",REACT_APP_GOOGLE_API_KEY:"AIzaSyDmcH5D5W1KtJntZfDugeBUQE-kfVcACnw",REACT_APP_GOOGLE_CLIENT_ID:"670558860135-nc1s3gt6hhrdi5755p3k4clgnevh9abe.apps.googleusercontent.com",REACT_APP_GOOGLE_CLIENT_SECRET:"your-google-client-secret-here",REACT_APP_GOOGLE_SHEET_ID:"1nWN6YLdEigEsX2pomB61s9ww-fjpODIL-t7CLPSMPtI",REACT_APP_HOTJAR_ID:"your-hotjar-id",REACT_APP_MAINTENANCE_ALERT_KM:"5000",REACT_APP_MAX_PHOTOS_PER_SERVICE:"10",REACT_APP_MAX_PHOTO_SIZE:"5242880",REACT_APP_NAME:"AutoCare Pro Dashboard",REACT_APP_NOTIFICATION_SOUND:"true",REACT_APP_PAYMENT_REMINDER_DAYS:"7,3,1",REACT_APP_PHOTO_QUALITY:"0.8",REACT_APP_PWA_DESCRIPTION:"Dashboard professionnel pour gestion de flotte",REACT_APP_PWA_NAME:"AutoCare Pro",REACT_APP_SENTRY_DSN:"https://your-sentry-dsn-here",REACT_APP_SMTP_HOST:"smtp.gmail.com",REACT_APP_SMTP_PASS:"your-app-password",REACT_APP_SMTP_PORT:"587",REACT_APP_SMTP_USER:"your-email@gmail.com",REACT_APP_TIMEZONE:"Europe/Paris",REACT_APP_VERSION:"2.1.0",REACT_APP_WEBHOOK_URL:"https://your-webhook-endpoint.com/notify"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&W(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Q=e=>{var t,n;return null===(n=null===(t=G())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Y=e=>{const t=Q(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},X=()=>{var e;return null===(e=G())||void 0===e?void 0:e.config},J=e=>{var t;return null===(t=G())||void 0===t?void 0:t["_".concat(e)]};class ${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Z(e){return e.endsWith(".cloudworkstations.dev")}async function ee(e){return(await fetch(e,{credentials:"include"})).ok}function te(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[H(JSON.stringify({alg:"none",type:"JWT"})),H(JSON.stringify(i)),""].join(".")}const ne={};let re=!1;function se(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Z(window.location.host)||ne[e]===t||ne[e]||re)return;function n(e){return"__firebase__banner__".concat(e)}ne[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(ne))ne[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{re=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function ie(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ae(){var e;const t=null===(e=G())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function oe(){return!ae()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function le(){try{return"object"===typeof indexedDB}catch(e){return!1}}class ce extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ue.prototype.create)}}class ue{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(de,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new ce(n,i,t)}}const de=/\{\$([^}]+)}/g;function he(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(fe(n)&&fe(i)){if(!he(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function fe(e){return null!==e&&"object"===typeof e}function pe(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function me(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function ge(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ve{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ye),void 0===r.error&&(r.error=ye),void 0===r.complete&&(r.complete=ye);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function ye(){}function be(e){return e&&e._delegate?e._delegate:e}class xe{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const we="[DEFAULT]";class Ne{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new $;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:we})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===we?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we;return this.component?this.component.multipleInstances?e:we:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ee{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ne(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const _e=[];var ke;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ke||(ke={}));const Se={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Ce=ke.INFO,Te={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Ie=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Te[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class je{constructor(e){this.name=e,this._logLevel=Ce,this._logHandler=Ie,this._userLogHandler=null,_e.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Se[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...t),this._logHandler(this,ke.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...t),this._logHandler(this,ke.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.INFO,...t),this._logHandler(this,ke.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.WARN,...t),this._logHandler(this,ke.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...t),this._logHandler(this,ke.ERROR,...t)}}let Ae,De;const Re=new WeakMap,Pe=new WeakMap,Oe=new WeakMap,Le=new WeakMap,Me=new WeakMap;let Fe={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Pe.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Oe.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ze(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ve(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(De||(De=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Be(this),n),ze(Re.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ze(e.apply(Be(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(Be(this),t,...r);return Oe.set(i,t.sort?t.sort():[t]),ze(i)}}function Ue(e){return"function"===typeof e?Ve(e):(e instanceof IDBTransaction&&function(e){if(Pe.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)}));Pe.set(e,t)}(e),t=e,(Ae||(Ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Fe):e);var t}function ze(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(ze(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&Re.set(t,e)})).catch((()=>{})),Me.set(t,e),t}(e);if(Le.has(e))return Le.get(e);const t=Ue(e);return t!==e&&(Le.set(e,t),Me.set(t,e)),t}const Be=e=>Me.get(e);const qe=["get","getKey","getAll","getAllKeys","count"],He=["put","add","delete","clear"],We=new Map;function Ke(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(We.get(t))return We.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=He.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!qe.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return We.set(t,i),i}Fe=(e=>c(c({},e),{},{get:(t,n,r)=>Ke(t,n)||e.get(t,n,r),has:(t,n)=>!!Ke(t,n)||e.has(t,n)}))(Fe);class Ge{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Qe="@firebase/app",Ye="0.13.1",Xe=new je("@firebase/app"),Je="@firebase/app-compat",$e="@firebase/analytics-compat",Ze="@firebase/analytics",et="@firebase/app-check-compat",tt="@firebase/app-check",nt="@firebase/auth",rt="@firebase/auth-compat",st="@firebase/database",it="@firebase/data-connect",at="@firebase/database-compat",ot="@firebase/functions",lt="@firebase/functions-compat",ct="@firebase/installations",ut="@firebase/installations-compat",dt="@firebase/messaging",ht="@firebase/messaging-compat",ft="@firebase/performance",pt="@firebase/performance-compat",mt="@firebase/remote-config",gt="@firebase/remote-config-compat",vt="@firebase/storage",yt="@firebase/storage-compat",bt="@firebase/firestore",xt="@firebase/ai",wt="@firebase/firestore-compat",Nt="firebase",Et="[DEFAULT]",_t={[Qe]:"fire-core",[Je]:"fire-core-compat",[Ze]:"fire-analytics",[$e]:"fire-analytics-compat",[tt]:"fire-app-check",[et]:"fire-app-check-compat",[nt]:"fire-auth",[rt]:"fire-auth-compat",[st]:"fire-rtdb",[it]:"fire-data-connect",[at]:"fire-rtdb-compat",[ot]:"fire-fn",[lt]:"fire-fn-compat",[ct]:"fire-iid",[ut]:"fire-iid-compat",[dt]:"fire-fcm",[ht]:"fire-fcm-compat",[ft]:"fire-perf",[pt]:"fire-perf-compat",[mt]:"fire-rc",[gt]:"fire-rc-compat",[vt]:"fire-gcs",[yt]:"fire-gcs-compat",[bt]:"fire-fst",[wt]:"fire-fst-compat",[xt]:"fire-vertex","fire-js":"fire-js",[Nt]:"fire-js-all"},kt=new Map,St=new Map,Ct=new Map;function Tt(e,t){try{e.container.addComponent(t)}catch(n){Xe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function It(e){const t=e.name;if(Ct.has(t))return Xe.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ct.set(t,e);for(const n of kt.values())Tt(n,e);for(const n of St.values())Tt(n,e);return!0}function jt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function At(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Dt=new ue("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Rt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new xe("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dt.create("app-deleted",{appName:this._name})}}const Pt="11.9.0";function Ot(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Et,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!==typeof s||!s)throw Dt.create("bad-app-name",{appName:String(s)});if(n||(n=X()),!n)throw Dt.create("no-options");const i=kt.get(s);if(i){if(he(n,i.options)&&he(r,i.config))return i;throw Dt.create("duplicate-app",{appName:s})}const a=new Ee(s);for(const l of Ct.values())a.addComponent(l);const o=new Rt(n,r,a);return kt.set(s,o),o}function Lt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et;const t=kt.get(e);if(!t&&e===Et&&X())return Ot();if(!t)throw Dt.create("no-app",{appName:e});return t}function Mt(e,t,n){var r;let s=null!==(r=_t[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Xe.warn(e.join(" "))}It(new xe("".concat(s,"-version"),(()=>({library:s,version:t})),"VERSION"))}const Ft="firebase-heartbeat-store";let Vt=null;function Ut(){return Vt||(Vt=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ze(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(ze(a.result),e.oldVersion,e.newVersion,ze(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{i&&e.addEventListener("close",(()=>i())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ft)}catch(n){console.warn(n)}}}).catch((e=>{throw Dt.create("idb-open",{originalErrorMessage:e.message})}))),Vt}async function zt(e,t){try{const n=(await Ut()).transaction(Ft,"readwrite"),r=n.objectStore(Ft);await r.put(t,Bt(e)),await n.done}catch(n){if(n instanceof ce)Xe.warn(n.message);else{const e=Dt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Xe.warn(e.message)}}}function Bt(e){return"".concat(e.name,"!").concat(e.options.appId)}class qt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Wt(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ht();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Xe.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ht(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),Kt(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Kt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=H(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Xe.warn(t),""}}}function Ht(){return(new Date).toISOString().substring(0,10)}class Wt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!le()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Ut()).transaction(Ft),n=await t.objectStore(Ft).get(Bt(e));return await t.done,n}catch(t){if(t instanceof ce)Xe.warn(t.message);else{const e=Dt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Xe.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return zt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return zt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Kt(e){return H(JSON.stringify({version:2,heartbeats:e})).length}var Gt;Gt="",It(new xe("platform-logger",(e=>new Ge(e)),"PRIVATE")),It(new xe("heartbeat",(e=>new qt(e)),"PRIVATE")),Mt(Qe,Ye,Gt),Mt(Qe,Ye,"esm2017"),Mt("fire-js","");var Qt,Yt,Xt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Jt={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var s=y(n,1),i=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=y(r,1),n=y(n,1)}return t=f(e,s.j(t)),new m(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new m(s,e)}function v(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),m=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,p(n,2*s+2*i),n[2*s+2*i+1]+=l*g,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*m,p(n,2*s+2*i+1),n[2*s+2*i+2]+=l*m,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Yt=Jt.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},Qt=Jt.Integer=r}).apply("undefined"!==typeof Xt?Xt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var $t,Zt,en,tn,nn,rn,sn,an,on="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ln={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof on&&on];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,(function(e,t){return t}))}}));var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){s.setTimeout((()=>{throw e}),0)}function _(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var k=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new S),(e=>e.reset()));class S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,T=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=k.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},j=()=>{const e=s.Promise.resolve(void 0);C=()=>{e.then(A)}};var A=()=>{for(var e;e=_();){try{e.h.call(e.g)}catch(n){E(n)}var t=k;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function D(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,R);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function V(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=q(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new V(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),W={};function K(e,t,n,r,s){if(r&&r.once)return Q(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)K(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!1,r,s)}function G(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Q(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!0,r,s)}function Y(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Y(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(i=e.g[t],n,r,s))&&(U(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,s)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):U(e)}}}function J(e){return e in W?W[e]:W[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){D.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var s=t;w(t=new R(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,D),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){D.call(this),this.h=e,this.g={}}d(le,D);var ce=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){R.call(this,"d")}function be(){R.call(this,"c")}d(ye,R),d(be,R);var xe={},we=null;function Ne(){return we=we||new ne}function Ee(e){R.call(this,xe.La,e)}function _e(e){const t=Ne();re(t,new Ee(t))}function ke(e,t){R.call(this,xe.STAT_EVENT,e),this.stat=t}function Se(e){const t=Ne();re(t,new ke(t,e))}function Ce(e,t){R.call(this,xe.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){e()}),t)}function Ie(){this.g=!0}function je(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}xe.La="serverreachability",d(Ee,R),xe.STAT_EVENT="statevent",d(ke,R),xe.Ma="timingevent",d(Ce,R),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Ae,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(Pe,pe),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Ae=new Pe;var Me={},Fe={};function Ve(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),qe(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=En(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=K(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_e(),function(e,t,n,r,s,i){e.info((function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function We(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||yn(e.j,e)}function Ge(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;vn(n),Xt(n)}pn(n),Se(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else xn(n,11)}else if((e.K||n.g==e)&&vn(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=Nn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(We(o),qe(o)),r.g=a}else fn(r);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||xn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?xn(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}_e()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Wt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=Wt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=h||7==t||_e(),We(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Kt(this.g);e="";var i=r.length,a=4==Wt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),Ge(this),Ke(this);break e}je(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==h&&(this.s=4,Se(14),n=!1),je(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Se(15),je(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}je(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),mn(d),d.M=!0,Se(11))}}else je(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else je(this.i,this.l,o,null),Qe(this,o);4==h&&Ge(this),this.o&&!this.J&&(4==h?yn(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Wt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=N(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),Ge(this),Ke(this)}}}catch(h){}},Oe.prototype.cancel=function(){this.J=!0,Ge(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(_e(),Se(17)),Ge(this),this.s=2,Ke(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function at(e){return new it(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(Nt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),kt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,xt)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,xt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Nt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Et(e,t){Nt(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _t(e,t){return Nt(e),t=St(e,t),e.g.has(t)}function kt(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(St(e,t),h(n)),e.h+=n.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Tt(){this.g=new fe}function It(e,t,n){const r=n||"";try{rt(e,(function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))}))}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function jt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){Nt(this),this.i=null,e=St(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Nt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Nt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Nt(this);let t=[];if("string"===typeof e)_t(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Nt(this),this.i=null,_t(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(jt,pe),jt.prototype.g=function(){return new At(this.l,this.j)},jt.prototype.i=(mt={},function(){return mt}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Pt(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ft=/^https?$/i,Vt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),qt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Wt(e)||2!=e.Z()))if(e.u&&4==Wt(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Wt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(st)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Ft.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Wt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Ht(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function Ht(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Wt(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Jt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),dn(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=En(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}wn(e)}function Xt(e){e.g&&(mn(e),e.g.cancel(),e.g=null)}function Jt(e){Xt(e),e.u&&(s.clearTimeout(e.u),e.u=null),vn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function cn(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||j(),T||(C(),T=!0),I.add(t,e),e.B=0}}function un(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),dn(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,r,t)}function dn(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),a=!1;else try{It(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function fn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||j(),T||(C(),T=!0),I.add(t,e),e.v=0}}function pn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),bn(e,e.v)),e.v++,!0)}function mn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function gn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),dn(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ue(n,e)}function vn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function yn(e,t){var n=null;if(e.g==t){vn(e),mn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=Ne(),new Ce(r,n)),cn(e)}else fn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),bn(e,e.B)),e.B++,!0))}(e,t)||2==r&&pn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:xn(e,5);break;case 4:xn(e,10);break;case 3:xn(e,6);break;default:xn(e,2)}}function bn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function xn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(s.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ct(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ct(0,0,!1,t)}))}(r.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),wn(e),Jt(e)}function wn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function Nn(e,t,n){var r=n instanceof it?at(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new it(null);r&&ot(a,r),t&&(a.g=t),i&&lt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),dn(e,r),r}function En(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new jt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function _n(){}function kn(){}function Sn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new In(this)}function Cn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Tn(){be.call(this),this.status=1}function In(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?me(this.o):me(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Ut(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Vt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Ut(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Se(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Nn(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Oe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),w(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,s,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),dn(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Ot(i)))+"&"+t:this.m&&Lt(n,this.m,i)),et(this.h,s),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),s.T=!0,Ve(s,n,null)):Ve(s,n,t),this.G=2}}else 3==this.G&&(e?un(this,e):0==this.i.length||Je(this.h)||un(this))},e.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Xt(this),gn(this))},e.Za=function(){null!=this.C&&(this.C=null,Xt(this),pn(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=_n.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},kn.prototype.g=function(e,t){return new Sn(e,t)},d(Sn,ne),Sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){Yt(this.g)},Sn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&cn(t)},Sn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,Sn.aa.N.call(this)},d(Cn,ye),d(Tn,be),d(In,_n),In.prototype.ua=function(){re(this.g,"a")},In.prototype.ta=function(e){re(this.g,new Cn(e))},In.prototype.sa=function(e){re(this.g,new Tn)},In.prototype.ra=function(){re(this.g,"b")},kn.prototype.createWebChannel=kn.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,an=ln.createWebChannelTransport=function(){return new kn},sn=ln.getStatEventTarget=function(){return Ne()},rn=ln.Event=xe,nn=ln.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,tn=ln.ErrorCode=De,Re.COMPLETE="complete",en=ln.EventType=Re,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Zt=ln.WebChannel=ge,ln.FetchXmlHttpFactory=jt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,$t=ln.XhrIo=Mt}).apply("undefined"!==typeof on?on:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const cn="@firebase/firestore",un="4.7.17";class dn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");let hn="11.9.0";const fn=new je("@firebase/firestore");function pn(){return fn.logLevel}function mn(e){if(fn.logLevel<=ke.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(yn);fn.debug("Firestore (".concat(hn,"): ").concat(e),...s)}}function gn(e){if(fn.logLevel<=ke.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(yn);fn.error("Firestore (".concat(hn,"): ").concat(e),...s)}}function vn(e){if(fn.logLevel<=ke.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(yn);fn.warn("Firestore (".concat(hn,"): ").concat(e),...s)}}function yn(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function bn(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,xn(e,r,n)}function xn(e,t,n){let r="FIRESTORE (".concat(hn,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw gn(r),new Error(r)}function wn(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||xn(t,s,r)}function Nn(e,t){return e}const En={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _n extends ce{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class kn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Sn{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Cn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(dn.UNAUTHENTICATED)))}shutdown(){}}class Tn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class In{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wn(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new kn,e.enqueueRetryable((()=>r(this.currentUser)))};const i=()=>{const t=s;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{mn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(mn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new kn)}}),0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(mn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(wn("string"==typeof t.accessToken,31837,{l:t}),new Sn(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wn(null===e||"string"==typeof e,2055,{h:e}),new dn(e)}}class jn{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class An{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new jn(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Dn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rn{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,At(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){wn(void 0===this.o,3512);const n=e=>{null!=e.error&&mn("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,mn("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{mn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):mn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Dn(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(wn("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Dn(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Pn(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function On(){return new TextEncoder}class Ln{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Pn(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Mn(e,t){return e<t?-1:e>t?1:0}function Fn(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return Mn(r,s);{const i=On(),a=Un(i.encode(Vn(e,n)),i.encode(Vn(t,n)));return 0!==a?a:Mn(r,s)}}n+=r>65535?2:1}return Mn(e.length,t.length)}function Vn(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Un(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Mn(e[n],t[n]);return Mn(e.length,t.length)}function zn(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const Bn=-62135596800,qn=1e6;class Hn{static now(){return Hn.fromMillis(Date.now())}static fromDate(e){return Hn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*qn);return new Hn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _n(En.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _n(En.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Bn)throw new _n(En.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _n(En.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qn}_compareTo(e){return this.seconds===e.seconds?Mn(this.nanoseconds,e.nanoseconds):Mn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Bn;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Wn{static fromTimestamp(e){return new Wn(e)}static min(){return new Wn(new Hn(0,0))}static max(){return new Wn(new Hn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Kn="__name__";class Gn{constructor(e,t,n){void 0===t?t=0:t>e.length&&bn(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&bn(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Gn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gn?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Gn.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Mn(e.length,t.length)}static compareSegments(e,t){const n=Gn.isNumericId(e),r=Gn.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Gn.extractNumericId(e).compare(Gn.extractNumericId(t)):Fn(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qt.fromString(e.substring(4,e.length-2))}}class Qn extends Gn{construct(e,t,n){return new Qn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new _n(En.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter((e=>e.length>0)))}return new Qn(e)}static emptyPath(){return new Qn([])}}const Yn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xn extends Gn{construct(e,t,n){return new Xn(e,t,n)}static isValidIdentifier(e){return Yn.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Kn}static keyField(){return new Xn([Kn])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new _n(En.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new _n(En.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new _n(En.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new _n(En.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xn(t)}static emptyPath(){return new Xn([])}}class Jn{constructor(e){this.path=e}static fromPath(e){return new Jn(Qn.fromString(e))}static fromName(e){return new Jn(Qn.fromString(e).popFirst(5))}static empty(){return new Jn(Qn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Jn(new Qn(e.slice()))}}const $n=-1;class Zn{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Zn.UNKNOWN_ID=-1;function er(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Wn.fromTimestamp(1e9===r?new Hn(n+1,0):new Hn(n,r));return new nr(s,Jn.empty(),t)}function tr(e){return new nr(e.readTime,e.key,$n)}class nr{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new nr(Wn.min(),Jn.empty(),$n)}static max(){return new nr(Wn.max(),Jn.empty(),$n)}}function rr(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Jn.comparator(e.documentKey,t.documentKey),0!==n?n:Mn(e.largestBatchId,t.largestBatchId))}const sr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ir{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ar(e){if(e.code!==En.FAILED_PRECONDITION||e.message!==sr)throw e;mn("LocalStore","Unexpectedly lost primary lease")}class or{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&bn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new or(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof or?t:or.resolve(t)}catch(e){return or.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):or.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):or.reject(t)}static resolve(e){return new or(((t,n)=>{t(e)}))}static reject(e){return new or(((t,n)=>{n(e)}))}static waitFor(e){return new or(((t,n)=>{let r=0,s=0,i=!1;e.forEach((e=>{++r,e.next((()=>{++s,i&&s===r&&t()}),(e=>n(e)))})),i=!0,s===r&&t()}))}static or(e){let t=or.resolve(!1);for(const n of e)t=t.next((e=>e?or.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new or(((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next((e=>{i[l]=e,++a,a===s&&n(i)}),(e=>r(e)))}}))}static doWhile(e,t){return new or(((n,r)=>{const s=()=>{!0===e()?t().next((()=>{s()}),r):n()};s()}))}}function lr(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cr(e){return"IndexedDbTransactionError"===e.name}class ur{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}ur.le=-1;const dr=-1;function hr(e){return null==e}function fr(e){return 0===e&&1/e==-1/0}function pr(e){return"number"==typeof e&&Number.isInteger(e)&&!fr(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const mr="\x01";function gr(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=yr(t)),t=vr(e.get(n),t);return yr(t)}function vr(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case mr:n+="\x01\x11";break;default:n+=t}}return n}function yr(e){return e+mr+"\x01"}const br="remoteDocuments",xr="owner",wr="mutationQueues",Nr="mutations";const Er="documentMutations",_r="remoteDocumentsV14",kr="remoteDocumentGlobal",Sr="targets",Cr="targetDocuments",Tr="targetGlobal",Ir="collectionParents",jr="clientMetadata",Ar="bundles",Dr="namedQueries",Rr="indexConfiguration",Pr="indexState",Or="indexEntries",Lr="documentOverlays",Mr="globals",Fr=[wr,Nr,Er,br,Sr,xr,Tr,Cr,jr,kr,Ir,Ar,Dr],Vr=[wr,Nr,Er,_r,Sr,xr,Tr,Cr,jr,kr,Ir,Ar,Dr,Lr],Ur=Vr,zr=[...Ur,Rr,Pr,Or];function Br(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function qr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Hr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Wr{constructor(e,t){this.comparator=e,this.root=t||Gr.EMPTY}insert(e,t){return new Wr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gr.BLACK,null,null))}remove(e){return new Wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kr(this.root,e,this.comparator,!0)}}class Kr{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gr{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Gr.RED,this.left=null!=r?r:Gr.EMPTY,this.right=null!=s?s:Gr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Gr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Gr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Gr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw bn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw bn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw bn(27949);return e+(this.isRed()?0:1)}}Gr.EMPTY=null,Gr.RED=!0,Gr.BLACK=!1,Gr.EMPTY=new class{constructor(){this.size=0}get key(){throw bn(57766)}get value(){throw bn(16141)}get color(){throw bn(16727)}get left(){throw bn(29726)}get right(){throw bn(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new Gr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qr{constructor(e){this.comparator=e,this.data=new Wr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yr(this.data.getIterator())}getIteratorFrom(e){return new Yr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Qr))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qr(this.comparator);return t.data=e,t}}class Yr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Xr{constructor(e){this.fields=e,e.sort(Xn.comparator)}static empty(){return new Xr([])}unionWith(e){let t=new Qr(Xn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Xr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zn(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Jr extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Jr("Invalid base64 string: "+e):e}}(e);return new $r(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new $r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$r.EMPTY_BYTE_STRING=new $r("");const Zr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(e){if(wn(!!e,39018),"string"==typeof e){let t=0;const n=Zr.exec(e);if(wn(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ts(e.seconds),nanos:ts(e.nanos)}}function ts(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ns(e){return"string"==typeof e?$r.fromBase64String(e):$r.fromUint8Array(e)}const rs="server_timestamp",ss="__type__",is="__previous_value__",as="__local_write_time__";function os(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[ss])||void 0===n?void 0:n.stringValue)===rs}function ls(e){const t=e.mapValue.fields[is];return os(t)?ls(t):t}function cs(e){const t=es(e.mapValue.fields[as].timestampValue);return new Hn(t.seconds,t.nanos)}class us{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const ds="(default)";class hs{constructor(e,t){this.projectId=e,this.database=t||ds}static empty(){return new hs("","")}get isDefaultDatabase(){return this.database===ds}isEqual(e){return e instanceof hs&&e.projectId===this.projectId&&e.database===this.database}}const fs="__type__",ps="__max__",ms={mapValue:{fields:{__type__:{stringValue:ps}}}},gs="__vector__",vs="value";function ys(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?os(e)?4:Os(e)?9007199254740991:Rs(e)?10:11:bn(28295,{value:e})}function bs(e,t){if(e===t)return!0;const n=ys(e);if(n!==ys(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return cs(e).isEqual(cs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=es(e.timestampValue),r=es(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ns(e.bytesValue).isEqual(ns(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ts(e.geoPointValue.latitude)===ts(t.geoPointValue.latitude)&&ts(e.geoPointValue.longitude)===ts(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ts(e.integerValue)===ts(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ts(e.doubleValue),r=ts(t.doubleValue);return n===r?fr(n)===fr(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return zn(e.arrayValue.values||[],t.arrayValue.values||[],bs);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Br(n)!==Br(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!bs(n[s],r[s])))return!1;return!0}(e,t);default:return bn(52216,{left:e})}}function xs(e,t){return void 0!==(e.values||[]).find((e=>bs(e,t)))}function ws(e,t){if(e===t)return 0;const n=ys(e),r=ys(t);if(n!==r)return Mn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mn(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ts(e.integerValue||e.doubleValue),r=ts(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ns(e.timestampValue,t.timestampValue);case 4:return Ns(cs(e),cs(t));case 5:return Fn(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ns(e),r=ns(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Mn(n[s],r[s]);if(0!==e)return e}return Mn(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Mn(ts(e.latitude),ts(t.latitude));return 0!==n?n:Mn(ts(e.longitude),ts(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Es(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a[vs])||void 0===n?void 0:n.arrayValue,c=null===(r=o[vs])||void 0===r?void 0:r.arrayValue,u=Mn((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Es(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ms.mapValue&&t===ms.mapValue)return 0;if(e===ms.mapValue)return 1;if(t===ms.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Fn(r[a],i[a]);if(0!==e)return e;const t=ws(n[r[a]],s[i[a]]);if(0!==t)return t}return Mn(r.length,i.length)}(e.mapValue,t.mapValue);default:throw bn(23264,{Pe:n})}}function Ns(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Mn(e,t);const n=es(e),r=es(t),s=Mn(n.seconds,r.seconds);return 0!==s?s:Mn(n.nanos,r.nanos)}function Es(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=ws(n[s],r[s]);if(e)return e}return Mn(n.length,r.length)}function _s(e){return ks(e)}function ks(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=es(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ns(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Jn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ks(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(ks(e.fields[s]));return n+"}"}(e.mapValue):bn(61005,{value:e})}function Ss(e){switch(ys(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ls(e);return t?16+Ss(t):16;case 5:return 2*e.stringValue.length;case 6:return ns(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Ss(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return qr(e.fields,((e,n)=>{t+=e.length+Ss(n)})),t}(e.mapValue);default:throw bn(13486,{value:e})}}function Cs(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ts(e){return!!e&&"integerValue"in e}function Is(e){return!!e&&"arrayValue"in e}function js(e){return!!e&&"nullValue"in e}function As(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ds(e){return!!e&&"mapValue"in e}function Rs(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[fs])||void 0===n?void 0:n.stringValue)===gs}function Ps(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return qr(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Ps(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ps(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Os(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ps}class Ls{constructor(e){this.value=e}static empty(){return new Ls({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ds(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ps(t)}setAll(e){let t=Xn.emptyPath(),n={},r=[];e.forEach(((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Ps(e):r.push(s.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Ds(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ds(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){qr(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Ls(Ps(this.value))}}function Ms(e){const t=[];return qr(e.fields,((e,n)=>{const r=new Xn([e]);if(Ds(n)){const e=Ms(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Xr(t)}class Fs{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Fs(e,0,Wn.min(),Wn.min(),Wn.min(),Ls.empty(),0)}static newFoundDocument(e,t,n,r){return new Fs(e,1,t,Wn.min(),n,r,0)}static newNoDocument(e,t){return new Fs(e,2,t,Wn.min(),Wn.min(),Ls.empty(),0)}static newUnknownDocument(e,t){return new Fs(e,3,t,Wn.min(),Wn.min(),Ls.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Wn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ls.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ls.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Vs{constructor(e,t){this.position=e,this.inclusive=t}}function Us(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?Jn.comparator(Jn.fromName(a.referenceValue),n.key):ws(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function zs(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!bs(e.position[n],t.position[n]))return!1;return!0}class Bs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function qs(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Hs{}class Ws extends Hs{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Zs(e,t,n):"array-contains"===t?new ri(e,n):"in"===t?new si(e,n):"not-in"===t?new ii(e,n):"array-contains-any"===t?new ai(e,n):new Ws(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ei(e,n):new ti(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(ws(t,this.value)):null!==t&&ys(this.value)===ys(t)&&this.matchesComparison(ws(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return bn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ks extends Hs{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Ks(e,t)}matches(e){return Gs(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Gs(e){return"and"===e.op}function Qs(e){return Ys(e)&&Gs(e)}function Ys(e){for(const t of e.filters)if(t instanceof Ks)return!1;return!0}function Xs(e){if(e instanceof Ws)return e.field.canonicalString()+e.op.toString()+_s(e.value);if(Qs(e))return e.filters.map((e=>Xs(e))).join(",");{const t=e.filters.map((e=>Xs(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Js(e,t){return e instanceof Ws?function(e,t){return t instanceof Ws&&e.op===t.op&&e.field.isEqual(t.field)&&bs(e.value,t.value)}(e,t):e instanceof Ks?function(e,t){return t instanceof Ks&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Js(n,t.filters[r])),!0)}(e,t):void bn(19439)}function $s(e){return e instanceof Ws?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(_s(e.value))}(e):e instanceof Ks?function(e){return e.op.toString()+" {"+e.getFilters().map($s).join(" ,")+"}"}(e):"Filter"}class Zs extends Ws{constructor(e,t,n){super(e,t,n),this.key=Jn.fromName(n.referenceValue)}matches(e){const t=Jn.comparator(e.key,this.key);return this.matchesComparison(t)}}class ei extends Ws{constructor(e,t){super(e,"in",t),this.keys=ni("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ti extends Ws{constructor(e,t){super(e,"not-in",t),this.keys=ni("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ni(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Jn.fromName(e.referenceValue)))}class ri extends Ws{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Is(t)&&xs(t.arrayValue,this.value)}}class si extends Ws{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xs(this.value.arrayValue,t)}}class ii extends Ws{constructor(e,t){super(e,"not-in",t)}matches(e){if(xs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!xs(this.value.arrayValue,t)}}class ai extends Ws{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Is(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>xs(this.value.arrayValue,e)))}}class oi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Ie=null}}function li(e){return new oi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ci(e){const t=Nn(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Xs(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),hr(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>_s(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>_s(e))).join(",")),t.Ie=e}return t.Ie}function ui(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!qs(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Js(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zs(e.startAt,t.startAt)&&zs(e.endAt,t.endAt)}function di(e){return Jn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class hi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function fi(e,t,n,r,s,i,a,o){return new hi(e,t,n,r,s,i,a,o)}function pi(e){return new hi(e)}function mi(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function gi(e){return null!==e.collectionGroup}function vi(e){const t=Nn(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ee.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Qr(Xn.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new Bs(r,n))})),e.has(Xn.keyField().canonicalString())||t.Ee.push(new Bs(Xn.keyField(),n))}return t.Ee}function yi(e){const t=Nn(e);return t.de||(t.de=bi(t,vi(e))),t.de}function bi(e,t){if("F"===e.limitType)return li(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Bs(e.field,t)}));const n=e.endAt?new Vs(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Vs(e.startAt.position,e.startAt.inclusive):null;return li(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function xi(e,t){const n=e.filters.concat([t]);return new hi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function wi(e,t,n){return new hi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ni(e,t){return ui(yi(e),yi(t))&&e.limitType===t.limitType}function Ei(e){return"".concat(ci(yi(e)),"|lt:").concat(e.limitType)}function _i(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>$s(e))).join(", "),"]")),hr(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>_s(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>_s(e))).join(",")),"Target(".concat(t,")")}(yi(e)),"; limitType=").concat(e.limitType,")")}function ki(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Jn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of vi(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Us(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,vi(e),t))&&!(e.endAt&&!function(e,t,n){const r=Us(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,vi(e),t))}(e,t)}function Si(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ci(e){return(t,n)=>{let r=!1;for(const s of vi(e)){const e=Ti(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Ti(e,t,n){const r=e.field.isKeyField()?Jn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?ws(r,s):bn(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return bn(19790,{direction:e.dir})}}class Ii{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){qr(this.inner,((t,n)=>{for(const[r,s]of n)e(r,s)}))}isEmpty(){return Hr(this.inner)}size(){return this.innerSize}}const ji=new Wr(Jn.comparator);function Ai(){return ji}const Di=new Wr(Jn.comparator);function Ri(){let e=Di;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Pi(e){let t=Di;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Oi(){return Mi()}function Li(){return Mi()}function Mi(){return new Ii((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Fi=new Wr(Jn.comparator),Vi=new Qr(Jn.comparator);function Ui(){let e=Vi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const zi=new Qr(Mn);function Bi(){return zi}function qi(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fr(t)?"-0":t}}function Hi(e){return{integerValue:""+e}}function Wi(e,t){return pr(t)?Hi(t):qi(e,t)}class Ki{constructor(){this._=void 0}}function Gi(e,t,n){return e instanceof Xi?function(e,t){const n={fields:{[ss]:{stringValue:rs},[as]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&os(t)&&(t=ls(t)),t&&(n.fields[is]=t),{mapValue:n}}(n,t):e instanceof Ji?$i(e,t):e instanceof Zi?ea(e,t):function(e,t){const n=Yi(e,t),r=na(n)+na(e.Re);return Ts(n)&&Ts(e.Re)?Hi(r):qi(e.serializer,r)}(e,t)}function Qi(e,t,n){return e instanceof Ji?$i(e,t):e instanceof Zi?ea(e,t):n}function Yi(e,t){return e instanceof ta?function(e){return Ts(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Xi extends Ki{}class Ji extends Ki{constructor(e){super(),this.elements=e}}function $i(e,t){const n=ra(t);for(const r of e.elements)n.some((e=>bs(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Zi extends Ki{constructor(e){super(),this.elements=e}}function ea(e,t){let n=ra(t);for(const r of e.elements)n=n.filter((e=>!bs(e,r)));return{arrayValue:{values:n}}}class ta extends Ki{constructor(e,t){super(),this.serializer=e,this.Re=t}}function na(e){return ts(e.integerValue||e.doubleValue)}function ra(e){return Is(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class sa{constructor(e,t){this.field=e,this.transform=t}}class ia{constructor(e,t){this.version=e,this.transformResults=t}}class aa{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new aa}static exists(e){return new aa(void 0,e)}static updateTime(e){return new aa(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oa(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class la{}function ca(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ba(e.key,aa.none()):new pa(e.key,e.data,aa.none());{const n=e.data,r=Ls.empty();let s=new Qr(Xn.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new ma(e.key,r,new Xr(s.toArray()),aa.none())}}function ua(e,t,n){e instanceof pa?function(e,t,n){const r=e.value.clone(),s=va(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ma?function(e,t,n){if(!oa(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=va(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(ga(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function da(e,t,n,r){return e instanceof pa?function(e,t,n,r){if(!oa(e.precondition,t))return n;const s=e.value.clone(),i=ya(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof ma?function(e,t,n,r){if(!oa(e.precondition,t))return n;const s=ya(e.fieldTransforms,r,t),i=t.data;return i.setAll(ga(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return oa(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ha(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Yi(r.transform,e||null);null!=s&&(null===n&&(n=Ls.empty()),n.set(r.field,s))}return n||null}function fa(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&zn(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ji&&t instanceof Ji||e instanceof Zi&&t instanceof Zi?zn(e.elements,t.elements,bs):e instanceof ta&&t instanceof ta?bs(e.Re,t.Re):e instanceof Xi&&t instanceof Xi}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class pa extends la{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ma extends la{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ga(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function va(e,t,n){const r=new Map;wn(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,Qi(a,o,n[s]))}return r}function ya(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Gi(e,i,t))}return r}class ba extends la{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xa extends la{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wa{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ua(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=da(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=da(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Li();return this.mutations.forEach((r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=ca(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Wn.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ui())}isEqual(e){return this.batchId===e.batchId&&zn(this.mutations,e.mutations,((e,t)=>fa(e,t)))&&zn(this.baseMutations,e.baseMutations,((e,t)=>fa(e,t)))}}class Na{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){wn(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=Fi;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Na(e,t,n,r)}}class Ea{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class _a{constructor(e,t){this.count=e,this.unchangedNames=t}}var ka,Sa;function Ca(e){switch(e){case En.OK:return bn(64938);case En.CANCELLED:case En.UNKNOWN:case En.DEADLINE_EXCEEDED:case En.RESOURCE_EXHAUSTED:case En.INTERNAL:case En.UNAVAILABLE:case En.UNAUTHENTICATED:return!1;case En.INVALID_ARGUMENT:case En.NOT_FOUND:case En.ALREADY_EXISTS:case En.PERMISSION_DENIED:case En.FAILED_PRECONDITION:case En.ABORTED:case En.OUT_OF_RANGE:case En.UNIMPLEMENTED:case En.DATA_LOSS:return!0;default:return bn(15467,{code:e})}}function Ta(e){if(void 0===e)return gn("GRPC error has no .code"),En.UNKNOWN;switch(e){case ka.OK:return En.OK;case ka.CANCELLED:return En.CANCELLED;case ka.UNKNOWN:return En.UNKNOWN;case ka.DEADLINE_EXCEEDED:return En.DEADLINE_EXCEEDED;case ka.RESOURCE_EXHAUSTED:return En.RESOURCE_EXHAUSTED;case ka.INTERNAL:return En.INTERNAL;case ka.UNAVAILABLE:return En.UNAVAILABLE;case ka.UNAUTHENTICATED:return En.UNAUTHENTICATED;case ka.INVALID_ARGUMENT:return En.INVALID_ARGUMENT;case ka.NOT_FOUND:return En.NOT_FOUND;case ka.ALREADY_EXISTS:return En.ALREADY_EXISTS;case ka.PERMISSION_DENIED:return En.PERMISSION_DENIED;case ka.FAILED_PRECONDITION:return En.FAILED_PRECONDITION;case ka.ABORTED:return En.ABORTED;case ka.OUT_OF_RANGE:return En.OUT_OF_RANGE;case ka.UNIMPLEMENTED:return En.UNIMPLEMENTED;case ka.DATA_LOSS:return En.DATA_LOSS;default:return bn(39323,{code:e})}}(Sa=ka||(ka={}))[Sa.OK=0]="OK",Sa[Sa.CANCELLED=1]="CANCELLED",Sa[Sa.UNKNOWN=2]="UNKNOWN",Sa[Sa.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Sa[Sa.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Sa[Sa.NOT_FOUND=5]="NOT_FOUND",Sa[Sa.ALREADY_EXISTS=6]="ALREADY_EXISTS",Sa[Sa.PERMISSION_DENIED=7]="PERMISSION_DENIED",Sa[Sa.UNAUTHENTICATED=16]="UNAUTHENTICATED",Sa[Sa.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Sa[Sa.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Sa[Sa.ABORTED=10]="ABORTED",Sa[Sa.OUT_OF_RANGE=11]="OUT_OF_RANGE",Sa[Sa.UNIMPLEMENTED=12]="UNIMPLEMENTED",Sa[Sa.INTERNAL=13]="INTERNAL",Sa[Sa.UNAVAILABLE=14]="UNAVAILABLE",Sa[Sa.DATA_LOSS=15]="DATA_LOSS";let Ia=null;const ja=new Qt([4294967295,4294967295],0);function Aa(e){const t=On().encode(e),n=new Yt;return n.update(t),new Uint8Array(n.digest())}function Da(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Qt([n,r],0),new Qt([s,i],0)]}class Ra{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Pa("Invalid padding: ".concat(t));if(n<0)throw new Pa("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Pa("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Pa("Invalid padding when bitmap length is 0: ".concat(t));this.pe=8*e.length-t,this.ye=Qt.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(Qt.fromNumber(n)));return 1===r.compare(ja)&&(r=new Qt([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=Aa(e),[n,r]=Da(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);if(!this.be(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Ra(s,r,t);return n.forEach((e=>i.insert(e))),i}insert(e){if(0===this.pe)return;const t=Aa(e),[n,r]=Da(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Pa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Oa{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,La.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Oa(Wn.min(),r,new Wr(Mn),Ai(),Ui())}}class La{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new La(n,t,Ui(),Ui(),Ui())}}class Ma{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class Fa{constructor(e,t){this.targetId=e,this.Ce=t}}class Va{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$r.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ua{constructor(){this.Fe=0,this.Me=qa(),this.xe=$r.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ui(),t=Ui(),n=Ui();return this.Me.forEach(((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:bn(38017,{changeType:s})}})),new La(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=qa()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,wn(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class za{constructor(e){this.ze=e,this.je=new Map,this.He=Ai(),this.Je=Ba(),this.Ye=Ba(),this.Ze=new Wr(Mn)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:bn(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const s=r.target;if(di(s))if(0===n){const e=new Jn(s.path);this.tt(t,e,Fs.newNoDocument(e,Wn.min()))}else wn(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),s=n?this.lt(n,e,r):1;if(0!==s){this.st(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==Ia||Ia.ht(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.Ce,this.ze.Pt(),n,s))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=ns(n).toUint8Array()}catch(e){if(e instanceof Jr)return vn("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Ra(i,r,s)}catch(e){return vn(e instanceof Pa?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.pe?null:a}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const s=this.ze.Pt(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const s=this._t(r);if(s){if(n.current&&di(s.target)){const t=new Jn(s.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,Fs.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=Ui();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new Oa(e,t,this.Ze,this.He,n);return this.He=Ai(),this.Je=Ba(),this.Ye=Ba(),this.Ze=new Wr(Mn),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Ua,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Qr(Mn),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Qr(Mn),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||mn("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Ua),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Ba(){return new Wr(Jn.comparator)}function qa(){return new Wr(Jn.comparator)}const Ha={asc:"ASCENDING",desc:"DESCENDING"},Wa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ka={and:"AND",or:"OR"};class Ga{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qa(e,t){return e.useProto3Json||hr(t)?t:{value:t}}function Ya(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Xa(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ja(e,t){return Ya(e,t.toTimestamp())}function $a(e){return wn(!!e,49232),Wn.fromTimestamp(function(e){const t=es(e);return new Hn(t.seconds,t.nanos)}(e))}function Za(e,t){return eo(e,t).canonicalString()}function eo(e,t){const n=function(e){return new Qn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function to(e){const t=Qn.fromString(e);return wn(No(t),10190,{key:t.toString()}),t}function no(e,t){return Za(e.databaseId,t.path)}function ro(e,t){const n=to(t);if(n.get(1)!==e.databaseId.projectId)throw new _n(En.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _n(En.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Jn(oo(n))}function so(e,t){return Za(e.databaseId,t)}function io(e){const t=to(e);return 4===t.length?Qn.emptyPath():oo(t)}function ao(e){return new Qn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function oo(e){return wn(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function lo(e,t,n){return{name:no(e,t),fields:n.value.mapValue.fields}}function co(e,t){let n;if(t instanceof pa)n={update:lo(e,t.key,t.value)};else if(t instanceof ba)n={delete:no(e,t.key)};else if(t instanceof ma)n={update:lo(e,t.key,t.data),updateMask:wo(t.fieldMask)};else{if(!(t instanceof xa))return bn(16599,{ft:t.type});n={verify:no(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Xi)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ji)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Zi)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ta)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw bn(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ja(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:bn(27497)}(e,t.precondition)),n}function uo(e,t){return{documents:[so(e,t.path)]}}function ho(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=so(e,s);const i=function(e){if(0!==e.length)return xo(Ks.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:yo(e.field),direction:mo(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Qa(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:s}}function fo(e){let t=io(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){wn(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=po(e);return t instanceof Ks&&Qs(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new Bs(bo(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,hr(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Vs(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Vs(n,t)}(n.endAt)),fi(t,s,a,i,o,"F",l,c)}function po(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=bo(e.unaryFilter.field);return Ws.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=bo(e.unaryFilter.field);return Ws.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=bo(e.unaryFilter.field);return Ws.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=bo(e.unaryFilter.field);return Ws.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return bn(61313);default:return bn(60726)}}(e):void 0!==e.fieldFilter?function(e){return Ws.create(bo(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return bn(58110);default:return bn(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ks.create(e.compositeFilter.filters.map((e=>po(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return bn(1026)}}(e.compositeFilter.op))}(e):bn(30097,{filter:e})}function mo(e){return Ha[e]}function go(e){return Wa[e]}function vo(e){return Ka[e]}function yo(e){return{fieldPath:e.canonicalString()}}function bo(e){return Xn.fromServerFormat(e.fieldPath)}function xo(e){return e instanceof Ws?function(e){if("=="===e.op){if(As(e.value))return{unaryFilter:{field:yo(e.field),op:"IS_NAN"}};if(js(e.value))return{unaryFilter:{field:yo(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(As(e.value))return{unaryFilter:{field:yo(e.field),op:"IS_NOT_NAN"}};if(js(e.value))return{unaryFilter:{field:yo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(e.field),op:go(e.op),value:e.value}}}(e):e instanceof Ks?function(e){const t=e.getFilters().map((e=>xo(e)));return 1===t.length?t[0]:{compositeFilter:{op:vo(e.op),filters:t}}}(e):bn(54877,{filter:e})}function wo(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function No(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Eo{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wn.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Wn.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:$r.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Eo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Eo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _o{constructor(e){this.wt=e}}function ko(e){const t=fo({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?wi(t,t.limit,"L"):t}class So{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(ts(e.integerValue));else if("doubleValue"in e){const n=ts(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),fr(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=es(n)),t.Ot("".concat(n.seconds||"")),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(ns(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?Os(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Rs(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):bn(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const s=e.fields||{};this.Mt(t,53);const i=vs,a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(ts(a)),this.Nt(i,t),this.Ct(s[i],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),Jn.fromName(e).path.forEach((e=>{this.Mt(t,60),this.Kt(e,t)}))}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}So.Wt=new So;class Co{constructor(){this.Cn=new To}addToCollectionParentIndex(e,t){return this.Cn.add(t),or.resolve()}getCollectionParents(e,t){return or.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return or.resolve()}deleteFieldIndex(e,t){return or.resolve()}deleteAllFieldIndexes(e){return or.resolve()}createTargetIndexes(e,t){return or.resolve()}getDocumentsMatchingTarget(e,t){return or.resolve(null)}getIndexType(e,t){return or.resolve(0)}getFieldIndexes(e,t){return or.resolve([])}getNextCollectionGroupToUpdate(e){return or.resolve(null)}getMinOffset(e,t){return or.resolve(nr.min())}getMinOffsetFromCollectionGroup(e,t){return or.resolve(nr.min())}updateCollectionGroup(e,t,n){return or.resolve()}updateIndexEntries(e,t){return or.resolve()}}class To{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Qr(Qn.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Qr(Qn.comparator)).toArray()}}new Uint8Array(0);const Io={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jo=41943040;class Ao{static withCacheSize(e){return new Ao(e,Ao.DEFAULT_COLLECTION_PERCENTILE,Ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Ao.DEFAULT_COLLECTION_PERCENTILE=10,Ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ao.DEFAULT=new Ao(jo,Ao.DEFAULT_COLLECTION_PERCENTILE,Ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ao.DISABLED=new Ao(-1,0,0);class Do{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Do(0)}static lr(){return new Do(-1)}}const Ro="LruGarbageCollector",Po=1048576;function Oo(e,t){let[n,r]=e,[s,i]=t;const a=Mn(n,s);return 0===a?Mn(r,i):a}class Lo{constructor(e){this.Er=e,this.buffer=new Qr(Oo),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Oo(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Mo{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Vr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return null!==this.Vr}mr(e){mn(Ro,"Garbage collection scheduled in ".concat(e,"ms")),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){cr(e)?mn(Ro,"Ignoring IndexedDB error during garbage collection: ",e):await ar(e)}await this.mr(3e5)}))}}class Fo{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return or.resolve(ur.le);const n=new Lo(t);return this.gr.forEachTarget(e,(e=>n.Rr(e.sequenceNumber))).next((()=>this.gr.yr(e,(e=>n.Rr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.gr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(mn("LruGarbageCollector","Garbage collection skipped; disabled"),or.resolve(Io)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(mn("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Io):this.wr(e,t)))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(mn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),pn()<=ke.DEBUG&&mn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),or.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e}))))}}function Vo(e,t){return new Fo(e,t)}class Uo{constructor(){this.changes=new Ii((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?or.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zo{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bo{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&da(n.mutation,e,Xr.empty(),Hn.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ui()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ui();const r=Oi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Ri();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Oi();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ui())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let s=Ai();const i=Mi(),a=Mi();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof ma)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),da(a.mutation,t,a.mutation.getFieldMask(),Hn.now())):i.set(t.key,Xr.empty())})),this.recalculateAndSaveOverlays(e,s).next((e=>(e.forEach(((e,t)=>i.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new zo(t,null!==(n=i.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=Mi();let r=new Wr(((e,t)=>e-t)),s=Ui();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const s of e)s.keys().forEach((e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||Xr.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||Ui()).add(e);r=r.insert(s.batchId,o)}))})).next((()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Li();l.forEach((e=>{if(!s.has(e)){const r=ca(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}})),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return or.waitFor(i)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Jn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gi(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):or.resolve(Oi());let a=$n,o=s;return i.next((t=>or.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?or.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,s))).next((()=>this.computeViews(e,o,t,Ui()))).next((e=>({batchId:a,changes:Pi(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Jn(t)).next((e=>{let t=Ri();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=Ri();return this.indexManager.getCollectionParents(e,s).next((a=>or.forEach(a,(a=>{const o=function(e,t){return new hi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r)))).next((e=>{s.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Fs.newInvalidDocument(r)))}));let n=Ri();return e.forEach(((e,r)=>{const i=s.get(e);void 0!==i&&da(i.mutation,r,Xr.empty(),Hn.now()),ki(t,r)&&(n=n.insert(e,r))})),n}))}}class qo{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return or.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:$a(e.createTime)}}(t)),or.resolve()}getNamedQuery(e,t){return or.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(e){return{name:e.name,query:ko(e.bundledQuery),readTime:$a(e.readTime)}}(t)),or.resolve()}}class Ho{constructor(){this.overlays=new Wr(Jn.comparator),this.Qr=new Map}getOverlay(e,t){return or.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Oi();return or.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),or.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Qr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Qr.delete(n)),or.resolve()}getOverlaysForCollection(e,t,n){const r=Oi(),s=t.length+1,i=new Jn(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return or.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Wr(((e,t)=>e-t));const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Oi(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Oi(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return or.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Qr.get(r.largestBatchId).delete(n.key);this.Qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ea(t,n));let s=this.Qr.get(t);void 0===s&&(s=Ui(),this.Qr.set(t,s)),this.Qr.set(t,s.add(n.key))}}class Wo{constructor(){this.sessionToken=$r.EMPTY_BYTE_STRING}getSessionToken(e){return or.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,or.resolve()}}class Ko{constructor(){this.$r=new Qr(Go.Ur),this.Kr=new Qr(Go.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const n=new Go(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.zr(new Go(e,t))}jr(e,t){e.forEach((e=>this.removeReference(e,t)))}Hr(e){const t=new Jn(new Qn([])),n=new Go(t,e),r=new Go(t,e+1),s=[];return this.Kr.forEachInRange([n,r],(e=>{this.zr(e),s.push(e.key)})),s}Jr(){this.$r.forEach((e=>this.zr(e)))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Jn(new Qn([])),n=new Go(t,e),r=new Go(t,e+1);let s=Ui();return this.Kr.forEachInRange([n,r],(e=>{s=s.add(e.key)})),s}containsKey(e){const t=new Go(e,0),n=this.$r.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Go{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Jn.comparator(e.key,t.key)||Mn(e.Zr,t.Zr)}static Wr(e,t){return Mn(e.Zr,t.Zr)||Jn.comparator(e.key,t.key)}}class Qo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Qr(Go.Ur)}checkEmpty(e){return or.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new wa(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Xr=this.Xr.add(new Go(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return or.resolve(i)}lookupMutationBatch(e,t){return or.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ti(n),s=r<0?0:r;return or.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return or.resolve(0===this.mutationQueue.length?dr:this.nr-1)}getAllMutationBatches(e){return or.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Go(t,0),r=new Go(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([n,r],(e=>{const t=this.ei(e.Zr);s.push(t)})),or.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Qr(Mn);return t.forEach((e=>{const t=new Go(e,0),r=new Go(e,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([t,r],(e=>{n=n.add(e.Zr)}))})),or.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Jn.isDocumentKey(s)||(s=s.child(""));const i=new Go(new Jn(s),0);let a=new Qr(Mn);return this.Xr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Zr)),!0)}),i),or.resolve(this.ni(a))}ni(e){const t=[];return e.forEach((e=>{const n=this.ei(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){wn(0===this.ri(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Xr;return or.forEach(t.mutations,(r=>{const s=new Go(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Xr=n}))}sr(e){}containsKey(e,t){const n=new Go(t,0),r=this.Xr.firstAfterOrEqual(n);return or.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,or.resolve()}ri(e,t){return this.ti(e)}ti(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Yo{constructor(e){this.ii=e,this.docs=new Wr(Jn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return or.resolve(n?n.document.mutableCopy():Fs.newInvalidDocument(t))}getEntries(e,t){let n=Ai();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Fs.newInvalidDocument(e))})),or.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Ai();const i=t.path,a=new Jn(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||rr(tr(a),n)<=0||(r.has(a.key)||ki(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return or.resolve(s)}getAllFromCollectionGroup(e,t,n,r){bn(9500)}si(e,t){return or.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Xo(this)}getSize(e){return or.resolve(this.size)}}class Xo extends Uo{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(n)})),or.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}class Jo{constructor(e){this.persistence=e,this.oi=new Ii((e=>ci(e)),ui),this.lastRemoteSnapshotVersion=Wn.min(),this.highestTargetId=0,this._i=0,this.ai=new Ko,this.targetCount=0,this.ui=Do.cr()}forEachTarget(e,t){return this.oi.forEach(((e,n)=>t(n))),or.resolve()}getLastRemoteSnapshotVersion(e){return or.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return or.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),or.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),or.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Do(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,or.resolve()}updateTargetData(e,t){return this.Tr(t),or.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,or.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.oi.forEach(((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.oi.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),or.waitFor(s).next((()=>r))}getTargetCount(e){return or.resolve(this.targetCount)}getTargetData(e,t){const n=this.oi.get(t)||null;return or.resolve(n)}addMatchingKeys(e,t,n){return this.ai.Gr(t,n),or.resolve()}removeMatchingKeys(e,t,n){this.ai.jr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach((t=>{s.push(r.markPotentiallyOrphaned(e,t))})),or.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),or.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ai.Yr(t);return or.resolve(n)}containsKey(e,t){return or.resolve(this.ai.containsKey(t))}}class $o{constructor(e,t){this.ci={},this.overlays={},this.li=new ur(0),this.hi=!1,this.hi=!0,this.Pi=new Wo,this.referenceDelegate=e(this),this.Ti=new Jo(this),this.indexManager=new Co,this.remoteDocumentCache=function(e){return new Yo(e)}((e=>this.referenceDelegate.Ii(e))),this.serializer=new _o(t),this.Ei=new qo(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ho,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ci[e.toKey()];return n||(n=new Qo(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,n){mn("MemoryPersistence","Starting transaction:",e);const r=new Zo(this.li.next());return this.referenceDelegate.di(),n(r).next((e=>this.referenceDelegate.Ai(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ri(e,t){return or.or(Object.values(this.ci).map((n=>()=>n.containsKey(e,t))))}}class Zo extends ir{constructor(e){super(),this.currentSequenceNumber=e}}class el{constructor(e){this.persistence=e,this.Vi=new Ko,this.mi=null}static fi(e){return new el(e)}get gi(){if(this.mi)return this.mi;throw bn(60996)}addReference(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),or.resolve()}removeReference(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),or.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),or.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach((e=>this.gi.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.gi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return or.forEach(this.gi,(n=>{const r=Jn.fromPath(n);return this.pi(e,r).next((e=>{e||t.removeEntry(r,Wn.min())}))})).next((()=>(this.mi=null,t.apply(e))))}updateLimboDocument(e,t){return this.pi(e,t).next((e=>{e?this.gi.delete(t.toString()):this.gi.add(t.toString())}))}Ii(e){return 0}pi(e,t){return or.or([()=>or.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class tl{constructor(e,t){this.persistence=e,this.yi=new Ii((e=>gr(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Vo(this,t)}static fi(e,t){return new tl(e,t)}di(){}Ai(e){return or.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}br(e){let t=0;return this.yr(e,(e=>{t++})).next((()=>t))}yr(e,t){return or.forEach(this.yi,((n,r)=>this.Dr(e,n,r).next((e=>e?or.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.si(e,(r=>this.Dr(e,r,t).next((e=>{e||(n++,s.removeEntry(r,Wn.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),or.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),or.resolve()}removeReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),or.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),or.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ss(e.data.value)),t}Dr(e,t,n){return or.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.yi.get(t);return or.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class nl{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ds=n,this.As=r}static Rs(e,t){let n=Ui(),r=Ui();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new nl(e,t.fromCache,n,r)}}class rl{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class sl{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=oe()?8:lr(ie())>0?6:4}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ws(e,t).next((e=>{s.result=e})).next((()=>{if(!s.result)return this.bs(e,t,r,n).next((e=>{s.result=e}))})).next((()=>{if(s.result)return;const n=new rl;return this.Ss(e,t,n).next((r=>{if(s.result=r,this.fs)return this.Ds(e,t,n,r.size)}))})).next((()=>s.result))}Ds(e,t,n,r){return n.documentReadCount<this.gs?(pn()<=ke.DEBUG&&mn("QueryEngine","SDK will not create cache indexes for query:",_i(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),or.resolve()):(pn()<=ke.DEBUG&&mn("QueryEngine","Query:",_i(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ps*r?(pn()<=ke.DEBUG&&mn("QueryEngine","The SDK decides to create cache indexes for query:",_i(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(t))):or.resolve())}ws(e,t){if(mi(t))return or.resolve(null);let n=yi(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=wi(t,null,"F"),n=yi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const s=Ui(...r);return this.ys.getDocuments(e,s).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const i=this.vs(t,r);return this.Cs(t,i,s,n.readTime)?this.ws(e,wi(t,null,"F")):this.Fs(e,i,t,n)}))))})))))}bs(e,t,n,r){return mi(t)||r.isEqual(Wn.min())?or.resolve(null):this.ys.getDocuments(e,n).next((s=>{const i=this.vs(t,s);return this.Cs(t,i,n,r)?or.resolve(null):(pn()<=ke.DEBUG&&mn("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_i(t)),this.Fs(e,i,t,er(r,$n)).next((e=>e)))}))}vs(e,t){let n=new Qr(Ci(e));return t.forEach(((t,r)=>{ki(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return pn()<=ke.DEBUG&&mn("QueryEngine","Using full collection scan to execute query:",_i(t)),this.ys.getDocumentsMatchingQuery(e,t,nr.min(),n)}Fs(e,t,n,r){return this.ys.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const il="LocalStore";class al{constructor(e,t,n,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new Wr(Mn),this.Os=new Ii((e=>ci(e)),ui),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bo(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.xs)))}}function ol(e,t,n,r){return new al(e,t,n,r)}async function ll(e,t){const n=Nn(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((s=>(r=s,n.Ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const s=[],i=[];let a=Ui();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({ks:e,removedBatchIds:s,addedBatchIds:i})))}))}))}function cl(e){const t=Nn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ti.getLastRemoteSnapshotVersion(e)))}function ul(e,t,n){let r=Ui(),s=Ui();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Ai();return n.forEach(((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Wn.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):mn(il,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),{qs:r,Qs:s}}))}function dl(e,t){const n=Nn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=dr),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function hl(e,t){const n=Nn(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ti.getTargetData(e,t).next((s=>s?(r=s,or.resolve(r)):n.Ti.allocateTargetId(e).next((s=>(r=new Eo(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ti.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.xs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(e.targetId,e),n.Os.set(t,e.targetId)),e}))}async function fl(e,t,n){const r=Nn(e),s=r.xs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(e=>r.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!cr(e))throw e;mn(il,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.xs=r.xs.remove(t),r.Os.delete(s.target)}function pl(e,t,n){const r=Nn(e);let s=Wn.min(),i=Ui();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Nn(e),s=r.Os.get(n);return void 0!==s?or.resolve(r.xs.get(s)):r.Ti.getTargetData(t,n)}(r,e,yi(t)).next((t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(e,t.targetId).next((e=>{i=e}))})).next((()=>r.Ms.getDocumentsMatchingQuery(e,t,n?s:Wn.min(),n?i:Ui()))).next((e=>(ml(r,Si(t),e),{documents:e,$s:i})))))}function ml(e,t,n){let r=e.Ns.get(t)||Wn.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ns.set(t,r)}class gl{constructor(){this.activeTargetIds=Bi()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vl{constructor(){this.xo=new gl,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,n){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new gl,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yl{No(e){}shutdown(){}}const bl="ConnectivityMonitor";class xl{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){mn(bl,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){mn(bl,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let wl=null;function Nl(){return null===wl?wl=268435456+Math.round(2147483648*Math.random()):wl++,"0x"+wl.toString(16)}const El="RestConnection",_l={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kl{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo="projects/".concat(n,"/databases/").concat(r),this.Go=this.databaseId.database===ds?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}zo(e,t,n,r,s){const i=Nl(),a=this.jo(e,t.toUriEncodedString());mn(El,"Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(o,r,s);const{host:l}=new URL(a),c=Z(l);return this.Jo(e,a,o,n,c).then((t=>(mn(El,"Received RPC '".concat(e,"' ").concat(i,": "),t),t)),(t=>{throw vn(El,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t}))}Yo(e,t,n,r,s,i){return this.zo(e,t,n,r,s)}Ho(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+hn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}jo(e,t){const n=_l[e];return"".concat(this.Ko,"/v1/").concat(t,":").concat(n)}terminate(){}}class Sl{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}const Cl="WebChannelConnection";class Tl extends kl{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=Nl();return new Promise(((s,a)=>{const o=new $t;o.setWithCredentials(!0),o.listenOnce(en.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case tn.NO_ERROR:const t=o.getResponseJson();mn(Cl,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case tn.TIMEOUT:mn(Cl,"RPC '".concat(e,"' ").concat(i," timed out")),a(new _n(En.DEADLINE_EXCEEDED,"Request time out"));break;case tn.HTTP_ERROR:const n=o.getStatus();if(mn(Cl,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(En).indexOf(t)>=0?t:En.UNKNOWN}(t.status);a(new _n(e,t.message))}else a(new _n(En.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new _n(En.UNAVAILABLE,"Connection failed."));break;default:bn(9055,{h_:e,streamId:i,P_:o.getLastErrorCode(),T_:o.getLastError()})}}finally{mn(Cl,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);mn(Cl,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)}))}I_(e,t,n){const r=Nl(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=an(),a=sn(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Ho(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");mn(Cl,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);this.E_(u);let d=!1,h=!1;const f=new Sl({Zo:t=>{h?mn(Cl,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(mn(Cl,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),mn(Cl,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Xo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Zt.EventType.OPEN,(()=>{h||(mn(Cl,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.__())})),p(u,Zt.EventType.CLOSE,(()=>{h||(h=!0,mn(Cl,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.u_(),this.d_(u))})),p(u,Zt.EventType.ERROR,(t=>{h||(h=!0,vn(Cl,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.u_(new _n(En.UNAVAILABLE,"The operation could not be completed")))})),p(u,Zt.EventType.MESSAGE,(t=>{var n;if(!h){const s=t.data[0];wn(!!s,16349);const i=s,a=(null==i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){mn(Cl,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=ka[e];if(void 0!==t)return Ta(t)}(t),s=a.message;void 0===n&&(n=En.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.u_(new _n(n,s)),u.close()}else mn(Cl,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.c_(s)}})),p(a,rn.STAT_EVENT,(t=>{t.stat===nn.PROXY?mn(Cl,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===nn.NOPROXY&&mn(Cl,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.a_()}),0),f}terminate(){this.l_.forEach((e=>e.close())),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter((t=>t===e))}}function Il(){return"undefined"!=typeof document?document:null}function jl(e){return new Ga(e,!0)}class Al{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.xi=e,this.timerId=t,this.A_=n,this.R_=r,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),n=Math.max(0,Date.now()-this.g_),r=Math.max(0,t-n);r>0&&mn("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.m_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,(()=>(this.g_=Date.now(),e()))),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){null!==this.f_&&(this.f_.skipDelay(),this.f_=null)}cancel(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}const Dl="PersistentStream";class Rl{constructor(e,t,n,r,s,i,a,o){this.xi=e,this.S_=n,this.D_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Al(e,t)}O_(){return 1===this.state||5===this.state||this.N_()}N_(){return 2===this.state||3===this.state}start(){this.M_=0,4!==this.state?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&null===this.C_&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,(()=>this.q_())))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,4!==e?this.x_.reset():t&&t.code===En.RESOURCE_EXHAUSTED?(gn(t.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===En.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.v_===t&&this.z_(n,r)}),(t=>{e((()=>{const e=new _n(En.UNKNOWN,"Fetching auth token failed: "+t.message);return this.j_(e)}))}))}z_(e,t){const n=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_((()=>{n((()=>this.listener.e_()))})),this.stream.n_((()=>{n((()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,(()=>(this.N_()&&(this.state=3),Promise.resolve()))),this.listener.n_())))})),this.stream.i_((e=>{n((()=>this.j_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.M_?this.J_(e):this.onNext(e)))}))}B_(){this.state=5,this.x_.y_((async()=>{this.state=0,this.start()}))}j_(e){return mn(Dl,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget((()=>this.v_===e?t():(mn(Dl,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Pl extends Rl{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:bn(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(wn(void 0===t||"string"==typeof t,58123),$r.fromBase64String(t||"")):(wn(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),$r.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?En.UNKNOWN:Ta(e.code);return new _n(t,e.message||"")}(a);n=new Va(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ro(e,r.document.name),i=$a(r.document.updateTime),a=r.document.createTime?$a(r.document.createTime):Wn.min(),o=new Ls({mapValue:{fields:r.document.fields}}),l=Fs.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ma(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ro(e,r.document),i=r.readTime?$a(r.readTime):Wn.min(),a=Fs.newNoDocument(s,i),o=r.removedTargetIds||[];n=new Ma([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ro(e,r.document),i=r.removedTargetIds||[];n=new Ma([],i,s,null)}else{if(!("filter"in t))return bn(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new _a(r,s),a=e.targetId;n=new Fa(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Wn.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Wn.min():t.readTime?$a(t.readTime):Wn.min()}(e);return this.listener.Y_(t,n)}Z_(e){const t={};t.database=ao(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=di(r)?{documents:uo(e,r)}:{query:ho(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Xa(e,t.resumeToken);const r=Qa(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Wn.min())>0){n.readTime=Ya(e,t.snapshotVersion.toTimestamp());const r=Qa(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bn(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Q_(t)}X_(e){const t={};t.database=ao(this.serializer),t.removeTarget=e,this.Q_(t)}}class Ol extends Rl{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return wn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wn(!e.writeResults||0===e.writeResults.length,55816),this.listener.na()}onNext(e){wn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=function(e,t){return e&&e.length>0?(wn(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?$a(e.updateTime):$a(t);return n.isEqual(Wn.min())&&(n=$a(t)),new ia(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=$a(e.commitTime);return this.listener.ra(n,t)}ia(){const e={};e.database=ao(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>co(this.serializer,e)))};this.Q_(t)}}class Ll{}class Ml extends Ll{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new _n(En.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,n,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[i,a]=s;return this.connection.zo(e,eo(t,n),r,i,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===En.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new _n(En.UNKNOWN,e.toString())}))}Yo(e,t,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[a,o]=i;return this.connection.Yo(e,eo(t,n),r,a,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===En.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new _n(En.UNKNOWN,e.toString())}))}terminate(){this.sa=!0,this.connection.terminate()}}class Fl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){0===this._a&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve()))))}Pa(e){"Online"===this.state?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.la("Offline")))}set(e){this.Ta(),this._a=0,"Online"===e&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ua?(gn(t),this.ua=!1):mn("OnlineStateTracker",t)}Ta(){null!==this.aa&&(this.aa.cancel(),this.aa=null)}}const Vl="RemoteStore";class Ul{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No((e=>{n.enqueueAndForget((async()=>{Yl(this)&&(mn(Vl,"Restarting streams for network reachability change."),await async function(e){const t=Nn(e);t.da.add(4),await Bl(t),t.Va.set("Unknown"),t.da.delete(4),await zl(t)}(this))}))})),this.Va=new Fl(n,r)}}async function zl(e){if(Yl(e))for(const t of e.Aa)await t(!0)}async function Bl(e){for(const t of e.Aa)await t(!1)}function ql(e,t){const n=Nn(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),Ql(n)?Gl(n):pc(n).N_()&&Wl(n,t))}function Hl(e,t){const n=Nn(e),r=pc(n);n.Ea.delete(t),r.N_()&&Kl(n,t),0===n.Ea.size&&(r.N_()?r.k_():Yl(n)&&n.Va.set("Unknown"))}function Wl(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Wn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}pc(e).Z_(t)}function Kl(e,t){e.ma.Ke(t),pc(e).X_(t)}function Gl(e){e.ma=new za({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),pc(e).start(),e.Va.ca()}function Ql(e){return Yl(e)&&!pc(e).O_()&&e.Ea.size>0}function Yl(e){return 0===Nn(e).da.size}function Xl(e){e.ma=void 0}async function Jl(e){e.Va.set("Online")}async function $l(e){e.Ea.forEach(((t,n)=>{Wl(e,t)}))}async function Zl(e,t){Xl(e),Ql(e)?(e.Va.Pa(t),Gl(e)):e.Va.set("Unknown")}async function ec(e,t,n){if(e.Va.set("Online"),t instanceof Va&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ea.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ea.delete(r),e.ma.removeTarget(r))}(e,t)}catch(n){mn(Vl,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await tc(e,n)}else if(t instanceof Ma?e.ma.Xe(t):t instanceof Fa?e.ma.ot(t):e.ma.nt(t),!n.isEqual(Wn.min()))try{const t=await cl(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.ma.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ea.get(r);s&&e.Ea.set(r,s.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Ea.get(t);if(!r)return;e.Ea.set(t,r.withResumeToken($r.EMPTY_BYTE_STRING,r.snapshotVersion)),Kl(e,t);const s=new Eo(r.target,t,n,r.sequenceNumber);Wl(e,s)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){mn(Vl,"Failed to raise snapshot:",t),await tc(e,t)}}async function tc(e,t,n){if(!cr(t))throw t;e.da.add(1),await Bl(e),e.Va.set("Offline"),n||(n=()=>cl(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{mn(Vl,"Retrying IndexedDB access"),await n(),e.da.delete(1),await zl(e)}))}function nc(e,t){return t().catch((n=>tc(e,n,t)))}async function rc(e){const t=Nn(e),n=mc(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:dr;for(;sc(t);)try{const e=await dl(t.localStore,r);if(null===e){0===t.Ia.length&&n.k_();break}r=e.batchId,ic(t,e)}catch(e){await tc(t,e)}ac(t)&&oc(t)}function sc(e){return Yl(e)&&e.Ia.length<10}function ic(e,t){e.Ia.push(t);const n=mc(e);n.N_()&&n.ea&&n.ta(t.mutations)}function ac(e){return Yl(e)&&!mc(e).O_()&&e.Ia.length>0}function oc(e){mc(e).start()}async function lc(e){mc(e).ia()}async function cc(e){const t=mc(e);for(const n of e.Ia)t.ta(n.mutations)}async function uc(e,t,n){const r=e.Ia.shift(),s=Na.from(r,t,n);await nc(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await rc(e)}async function dc(e,t){t&&mc(e).ea&&await async function(e,t){if(function(e){return Ca(e)&&e!==En.ABORTED}(t.code)){const n=e.Ia.shift();mc(e).L_(),await nc(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await rc(e)}}(e,t),ac(e)&&oc(e)}async function hc(e,t){const n=Nn(e);n.asyncQueue.verifyOperationInProgress(),mn(Vl,"RemoteStore received new credentials");const r=Yl(n);n.da.add(3),await Bl(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await zl(n)}async function fc(e,t){const n=Nn(e);t?(n.da.delete(2),await zl(n)):t||(n.da.add(2),await Bl(n),n.Va.set("Unknown"))}function pc(e){return e.fa||(e.fa=function(e,t,n){const r=Nn(e);return r.oa(),new Pl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:Jl.bind(null,e),n_:$l.bind(null,e),i_:Zl.bind(null,e),Y_:ec.bind(null,e)}),e.Aa.push((async t=>{t?(e.fa.L_(),Ql(e)?Gl(e):e.Va.set("Unknown")):(await e.fa.stop(),Xl(e))}))),e.fa}function mc(e){return e.ga||(e.ga=function(e,t,n){const r=Nn(e);return r.oa(),new Ol(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:lc.bind(null,e),i_:dc.bind(null,e),na:cc.bind(null,e),ra:uc.bind(null,e)}),e.Aa.push((async t=>{t?(e.ga.L_(),await rc(e)):(await e.ga.stop(),e.Ia.length>0&&(mn(Vl,"Stopping write stream with ".concat(e.Ia.length," pending writes")),e.Ia=[]))}))),e.ga}class gc{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new gc(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _n(En.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vc(e,t){if(gn("AsyncQueue","".concat(t,": ").concat(e)),cr(e))return new _n(En.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class yc{static emptySet(e){return new yc(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Jn.comparator(t.key,n.key):(e,t)=>Jn.comparator(e.key,t.key),this.keyedMap=Ri(),this.sortedSet=new Wr(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yc))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new yc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class bc{constructor(){this.pa=new Wr(Jn.comparator)}track(e){const t=e.doc.key,n=this.pa.get(t);n?0!==e.type&&3===n.type?this.pa=this.pa.insert(t,e):3===e.type&&1!==n.type?this.pa=this.pa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pa=this.pa.remove(t):1===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):bn(63341,{Vt:e,ya:n}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal(((t,n)=>{e.push(n)})),e}}class xc{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new xc(e,t,yc.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ni(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class wc{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some((e=>e.va()))}}class Nc{constructor(){this.queries=Ec(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Nn(e),r=n.queries;n.queries=Ec(),r.forEach(((e,n)=>{for(const r of n.Sa)r.onError(t)}))}(this,new _n(En.ABORTED,"Firestore shutting down"))}}function Ec(){return new Ii((e=>Ei(e)),Ni)}async function _c(e,t){const n=Nn(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Da()&&t.va()&&(r=2):(i=new wc,r=t.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=vc(e,"Initialization of query '".concat(_i(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.Sa.push(t),t.Fa(n.onlineState),i.ba&&t.Ma(i.ba)&&Tc(n)}async function kc(e,t){const n=Nn(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?s=t.va()?0:1:!i.Da()&&t.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Sc(e,t){const n=Nn(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Ma(s)&&(r=!0);t.ba=s}}r&&Tc(n)}function Cc(e,t,n){const r=Nn(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function Tc(e){e.Ca.forEach((e=>{e.next()}))}var Ic,jc;(jc=Ic||(Ic={})).xa="default",jc.Cache="cache";class Ac{constructor(e,t,n){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=n||{}}Ma(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new xc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache)return!0;if(!this.va())return!0;const n="Offline"!==t;return(!this.options.Qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}qa(e){e=xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Ic.Cache}}class Dc{constructor(e){this.key=e}}class Rc{constructor(e){this.key=e}}class Pc{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ui(),this.mutatedKeys=Ui(),this.Za=Ci(e),this.Xa=new yc(this.Za)}get eu(){return this.Ha}tu(e,t){const n=t?t.nu:new bc,r=t?t.Xa:this.Xa;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=ki(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ru(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Za(u,o)>0||l&&this.Za(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))})),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Xa:i,nu:n,Cs:a,mutatedKeys:s}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const i=e.nu.wa();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bn(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Za(e.doc,t.doc))),this.iu(n),r=null!=r&&r;const a=t&&!r?this.su():[],o=0===this.Ya.size&&this.current&&!r?1:0,l=o!==this.Ja;return this.Ja=o,0!==i.length||l?{snapshot:new xc(this.query,e.Xa,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new bc,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach((e=>this.Ha=this.Ha.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ha=this.Ha.delete(e))),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Ui(),this.Xa.forEach((e=>{this._u(e.key)&&(this.Ya=this.Ya.add(e.key))}));const t=[];return e.forEach((e=>{this.Ya.has(e)||t.push(new Rc(e))})),this.Ya.forEach((n=>{e.has(n)||t.push(new Dc(n))})),t}au(e){this.Ha=e.$s,this.Ya=Ui();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return xc.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,0===this.Ja,this.hasCachedResults)}}const Oc="SyncEngine";class Lc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Mc{constructor(e){this.key=e,this.cu=!1}}class Fc{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.lu={},this.hu=new Ii((e=>Ei(e)),Ni),this.Pu=new Map,this.Tu=new Set,this.Iu=new Wr(Jn.comparator),this.Eu=new Map,this.du=new Ko,this.Au={},this.Ru=new Map,this.Vu=Do.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return!0===this.mu}}async function Vc(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=au(e);let s;const i=r.hu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await zc(r,t,n,!0),s}async function Uc(e,t){const n=au(e);await zc(n,t,!0,!1)}async function zc(e,t,n,r){const s=await hl(e.localStore,yi(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await Bc(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&ql(e.remoteStore,s),o}async function Bc(e,t,n,r,s){e.fu=(t,n,r)=>async function(e,t,n,r){let s=t.view.tu(n);s.Cs&&(s=await pl(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.tu(n,s)})));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return eu(e,t.targetId,o.ou),o.snapshot}(e,t,n,r);const i=await pl(e.localStore,t,!0),a=new Pc(t,i.$s),o=a.tu(i.documents),l=La.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);eu(e,n,c.ou);const u=new Lc(t,n,a);return e.hu.set(t,u),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),c.snapshot}async function qc(e,t,n){const r=Nn(e),s=r.hu.get(t),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter((e=>!Ni(e,t)))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await fl(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Hl(r.remoteStore,s.targetId),$c(r,s.targetId)})).catch(ar)):($c(r,s.targetId),await fl(r.localStore,s.targetId,!0))}async function Hc(e,t){const n=Nn(e),r=n.hu.get(t),s=n.Pu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hl(n.remoteStore,r.targetId))}async function Wc(e,t){const n=Nn(e);try{const e=await function(e,t){const n=Nn(e),r=t.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const i=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const a=[];t.targetChanges.forEach(((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Ti.removeMatchingKeys(e,i.removedDocuments,o).next((()=>n.Ti.addMatchingKeys(e,i.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken($r.EMPTY_BYTE_STRING,Wn.min()).withLastLimboFreeSnapshotVersion(Wn.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&a.push(n.Ti.updateTargetData(e,c))}));let o=Ai(),l=Ui();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(ul(e,i,t.documentUpdates).next((e=>{o=e.qs,l=e.Qs}))),!r.isEqual(Wn.min())){const t=n.Ti.getLastRemoteSnapshotVersion(e).next((t=>n.Ti.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return or.waitFor(a).next((()=>i.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.xs=s,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Eu.get(t);r&&(wn(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.cu=!0:e.modifiedDocuments.size>0?wn(r.cu,14607):e.removedDocuments.size>0&&(wn(r.cu,42227),r.cu=!1))})),await ru(n,e,t)}catch(e){await ar(e)}}function Kc(e,t,n){const r=Nn(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.hu.forEach(((n,r)=>{const s=r.view.Fa(t);s.snapshot&&e.push(s.snapshot)})),function(e,t){const n=Nn(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const s of n.Sa)s.Fa(t)&&(r=!0)})),r&&Tc(n)}(r.eventManager,t),e.length&&r.lu.Y_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Gc(e,t,n){const r=Nn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let e=new Wr(Jn.comparator);e=e.insert(i,Fs.newNoDocument(i,Wn.min()));const n=Ui().add(i),s=new Oa(Wn.min(),new Map,new Wr(Mn),e,n);await Wc(r,s),r.Iu=r.Iu.remove(i),r.Eu.delete(t),nu(r)}else await fl(r.localStore,t,!1).then((()=>$c(r,t,n))).catch(ar)}async function Qc(e,t){const n=Nn(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Nn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),s=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=or.resolve();return i.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const i=n.docVersions.get(e);wn(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,s)))}(n,e,t,s).next((()=>s.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ui();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Jc(n,r,null),Xc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ru(n,e)}catch(e){await ar(e)}}async function Yc(e,t,n){const r=Nn(e);try{const e=await function(e,t){const n=Nn(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(wn(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Jc(r,t,n),Xc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ru(r,e)}catch(n){await ar(n)}}function Xc(e,t){(e.Ru.get(t)||[]).forEach((e=>{e.resolve()})),e.Ru.delete(t)}function Jc(e,t,n){const r=Nn(e);let s=r.Au[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Au[r.currentUser.toKey()]=s}}function $c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach((t=>{e.du.containsKey(t)||Zc(e,t)}))}function Zc(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);null!==n&&(Hl(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),nu(e))}function eu(e,t,n){for(const r of n)r instanceof Dc?(e.du.addReference(r.key,t),tu(e,r)):r instanceof Rc?(mn(Oc,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||Zc(e,r.key)):bn(19791,{pu:r})}function tu(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(mn(Oc,"New document in limbo: "+n),e.Tu.add(r),nu(e))}function nu(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new Jn(Qn.fromString(t)),r=e.Vu.next();e.Eu.set(r,new Mc(n)),e.Iu=e.Iu.insert(n,r),ql(e.remoteStore,new Eo(yi(pi(n.path)),r,"TargetPurposeLimboResolution",ur.le))}}async function ru(e,t,n){const r=Nn(e),s=[],i=[],a=[];r.hu.isEmpty()||(r.hu.forEach(((e,o)=>{a.push(r.fu(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=nl.Rs(o.targetId,e);i.push(t)}})))})),await Promise.all(a),r.lu.Y_(s),await async function(e,t){const n=Nn(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>or.forEach(t,(t=>or.forEach(t.ds,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>or.forEach(t.As,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!cr(e))throw e;mn(il,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.xs.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.xs=n.xs.insert(e,s)}}}(r.localStore,i))}async function su(e,t){const n=Nn(e);if(!n.currentUser.isEqual(t)){mn(Oc,"User change. New user:",t.toKey());const e=await ll(n.localStore,t);n.currentUser=t,function(e,t){e.Ru.forEach((e=>{e.forEach((e=>{e.reject(new _n(En.CANCELLED,t))}))})),e.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ru(n,e.ks)}}function iu(e,t){const n=Nn(e),r=n.Eu.get(t);if(r&&r.cu)return Ui().add(r.key);{let e=Ui();const r=n.Pu.get(t);if(!r)return e;for(const t of r){const r=n.hu.get(t);e=e.unionWith(r.view.eu)}return e}}function au(e){const t=Nn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Wc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iu.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Gc.bind(null,t),t.lu.Y_=Sc.bind(null,t.eventManager),t.lu.gu=Cc.bind(null,t.eventManager),t}function ou(e){const t=Nn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Qc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Yc.bind(null,t),t}class lu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jl(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return ol(this.persistence,new sl,e.initialUser,this.serializer)}Su(e){return new $o(el.fi,this.serializer)}bu(e){return new vl}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lu.provider={build:()=>new lu};class cu extends lu{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){wn(this.persistence.referenceDelegate instanceof tl,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Mo(n,e.asyncQueue,t)}Su(e){const t=void 0!==this.cacheSizeBytes?Ao.withCacheSize(this.cacheSizeBytes):Ao.DEFAULT;return new $o((e=>tl.fi(e,t)),this.serializer)}}class uu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Kc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=su.bind(null,this.syncEngine),await fc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Nc}createDatastore(e){const t=jl(e.databaseInfo.databaseId),n=function(e){return new Tl(e)}(e.databaseInfo);return function(e,t,n,r){return new Ml(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new Ul(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,(e=>Kc(this.syncEngine,e,0)),xl.C()?new xl:new yl)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Fc(e,t,n,r,s,i);return a&&(o.mu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Nn(e);mn(Vl,"RemoteStore shutting down."),t.da.add(5),await Bl(t),t.Ra.shutdown(),t.Va.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}uu.provider={build:()=>new uu};class du{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const hu="FirestoreClient";class fu{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=dn.UNAUTHENTICATED,this.clientId=Ln.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async e=>{mn(hu,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(mn(hu,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=vc(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function pu(e,t){e.asyncQueue.verifyOperationInProgress(),mn(hu,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await ll(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function mu(e,t){e.asyncQueue.verifyOperationInProgress();const n=await gu(e);mn(hu,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>hc(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>hc(t.remoteStore,n))),e._onlineComponents=t}async function gu(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){mn(hu,"Using user provided OfflineComponentProvider");try{await pu(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===En.FAILED_PRECONDITION||e.code===En.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;vn("Error using user provided cache. Falling back to memory cache: "+n),await pu(e,new lu)}}else mn(hu,"Using default OfflineComponentProvider"),await pu(e,new cu(void 0));return e._offlineComponents}async function vu(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(mn(hu,"Using user provided OnlineComponentProvider"),await mu(e,e._uninitializedComponentsProvider._online)):(mn(hu,"Using default OnlineComponentProvider"),await mu(e,new uu))),e._onlineComponents}function yu(e){return vu(e).then((e=>e.syncEngine))}async function bu(e){const t=await vu(e),n=t.eventManager;return n.onListen=Vc.bind(null,t.syncEngine),n.onUnlisten=qc.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Uc.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Hc.bind(null,t.syncEngine),n}function xu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new kn;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const i=new du({next:n=>{i.xu(),t.enqueueAndForget((()=>kc(e,a))),n.fromCache&&"server"===r.source?s.reject(new _n(En.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Ac(n,i,{includeMetadataChanges:!0,Qa:!0});return _c(e,a)}(await bu(e),e.asyncQueue,t,n,r))),r.promise}function wu(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Nu=new Map;function Eu(e,t,n){if(!n)throw new _n(En.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function _u(e){if(!Jn.isDocumentKey(e))throw new _n(En.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ku(e){if(Jn.isDocumentKey(e))throw new _n(En.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Su(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":bn(12329,{type:typeof e})}function Cu(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _n(En.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Su(e);throw new _n(En.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Tu(e,t){if(t<=0)throw new _n(En.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}const Iu="firestore.googleapis.com",ju=!0;class Au{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new _n(En.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Iu,this.ssl=ju}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:ju;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=jo;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Po)throw new _n(En.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new _n(En.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wu(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new _n(En.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new _n(En.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new _n(En.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Du{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Au({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _n(En.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _n(En.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Au(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Cn;switch(e.type){case"firstParty":return new An(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new _n(En.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Nu.get(e);t&&(mn("ComponentProvider","Removing Datastore"),Nu.delete(e),t.terminate())}(this),Promise.resolve()}}class Ru{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ru(this.firestore,e,this._query)}}class Pu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ou(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pu(this.firestore,e,this._key)}}class Ou extends Ru{constructor(e,t,n){super(e,t,pi(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pu(this.firestore,null,new Jn(e))}withConverter(e){return new Ou(this.firestore,e,this._path)}}function Lu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=be(e),Eu("collection","path",t),e instanceof Du){const n=Qn.fromString(t,...r);return ku(n),new Ou(e,null,n)}{if(!(e instanceof Pu||e instanceof Ou))throw new _n(En.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qn.fromString(t,...r));return ku(n),new Ou(e.firestore,null,n)}}function Mu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=be(e),1===arguments.length&&(t=Ln.newId()),Eu("doc","path",t),e instanceof Du){const n=Qn.fromString(t,...r);return _u(n),new Pu(e,null,new Jn(n))}{if(!(e instanceof Pu||e instanceof Ou))throw new _n(En.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qn.fromString(t,...r));return _u(n),new Pu(e.firestore,e instanceof Ou?e.converter:null,new Jn(n))}}const Fu="AsyncQueue";class Vu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Al(this,"async_queue_retry"),this.rc=()=>{const e=Il();e&&mn(Fu,"Visibility state changed to "+e.visibilityState),this.x_.b_()},this.sc=e;const t=Il();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=Il();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise((()=>{}));const t=new kn;return this._c((()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ju.push(e),this.ac())))}async ac(){if(0!==this.Ju.length){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!cr(e))throw e;mn(Fu,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_((()=>this.ac()))}}_c(e){const t=this.sc.then((()=>(this.ec=!0,e().catch((e=>{throw this.Xu=e,this.ec=!1,gn("INTERNAL UNHANDLED ERROR: ",Uu(e)),e})).then((e=>(this.ec=!1,e))))));return this.sc=t,t}enqueueAfterDelay(e,t,n){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const r=gc.createAndSchedule(this,e,t,n,(e=>this.uc(e)));return this.Zu.push(r),r}oc(){this.Xu&&bn(47125,{cc:Uu(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do{e=this.sc,await e}while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then((()=>{this.Zu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Zu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.lc()}))}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function Uu(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function zu(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Bu extends Du{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Vu,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vu(e),this._firestoreClient=void 0,await e}}}function qu(e){if(e._terminated)throw new _n(En.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Hu(e),e._firestoreClient}function Hu(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new us(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,wu(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new fu(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wu($r.fromBase64String(e))}catch(e){throw new _n(En.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Wu($r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ku{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new _n(En.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xn(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gu{constructor(e){this._methodName=e}}class Qu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _n(En.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _n(En.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mn(this._lat,e._lat)||Mn(this._long,e._long)}}class Yu{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Xu=/^__.*__$/;class Ju{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ma(e,this.data,this.fieldMask,t,this.fieldTransforms):new pa(e,this.data,t,this.fieldTransforms)}}class $u{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ma(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Zu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bn(40011,{Ic:e})}}class ed{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new ed(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Vc(e),r}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return gd(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(0===e.length)throw this.gc("Document fields must not be empty");if(Zu(this.Ic)&&Xu.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class td{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||jl(e)}bc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ed({Ic:e,methodName:t,wc:n,path:Xn.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nd(e){const t=e._freezeSettings(),n=jl(e._databaseId);return new td(e._databaseId,!!t.ignoreUndefinedProperties,n)}function rd(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.bc(i.merge||i.mergeFields?2:0,t,n,s);hd("Data must be an object, but it was:",a,r);const o=ud(r,a);let l,c;if(i.merge)l=new Xr(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=fd(t,r,n);if(!a.contains(s))throw new _n(En.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));vd(e,s)||e.push(s)}l=new Xr(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new Ju(new Ls(o),l,c)}class sd extends Gu{_toFieldTransform(e){if(2!==e.Ic)throw 1===e.Ic?e.gc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.gc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sd}}class id extends Gu{_toFieldTransform(e){return new sa(e.path,new Xi)}isEqual(e){return e instanceof id}}function ad(e,t,n,r){const s=e.bc(1,t,n);hd("Data must be an object, but it was:",s,r);const i=[],a=Ls.empty();qr(r,((e,r)=>{const o=md(t,e,n);r=be(r);const l=s.mc(o);if(r instanceof sd)i.push(o);else{const e=cd(r,l);null!=e&&(i.push(o),a.set(o,e))}}));const o=new Xr(i);return new $u(a,o,s.fieldTransforms)}function od(e,t,n,r,s,i){const a=e.bc(1,t,n),o=[fd(t,r,n)],l=[s];if(i.length%2!=0)throw new _n(En.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)o.push(fd(t,i[h])),l.push(i[h+1]);const c=[],u=Ls.empty();for(let h=o.length-1;h>=0;--h)if(!vd(c,o[h])){const e=o[h];let t=l[h];t=be(t);const n=a.mc(e);if(t instanceof sd)c.push(e);else{const r=cd(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Xr(c);return new $u(u,d,a.fieldTransforms)}function ld(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return cd(n,e.bc(r?4:3,t))}function cd(e,t){if(dd(e=be(e)))return hd("Unsupported field value:",t,e),ud(e,t);if(e instanceof Gu)return function(e,t){if(!Zu(t.Ic))throw t.gc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.gc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&4!==t.Ic)throw t.gc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=cd(s,t.fc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=be(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Wi(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Hn.fromDate(e);return{timestampValue:Ya(t.serializer,n)}}if(e instanceof Hn){const n=new Hn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ya(t.serializer,n)}}if(e instanceof Qu)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Wu)return{bytesValue:Xa(t.serializer,e._byteString)};if(e instanceof Pu){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.gc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Za(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Yu)return function(e,t){return{mapValue:{fields:{[fs]:{stringValue:gs},[vs]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.gc("VectorValues must only contain numeric values.");return qi(t.serializer,e)}))}}}}}}(e,t);throw t.gc("Unsupported field value: ".concat(Su(e)))}(e,t)}function ud(e,t){const n={};return Hr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qr(e,((e,r)=>{const s=cd(r,t.Ac(e));null!=s&&(n[e]=s)})),{mapValue:{fields:n}}}function dd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Hn||e instanceof Qu||e instanceof Wu||e instanceof Pu||e instanceof Gu||e instanceof Yu)}function hd(e,t,n){if(!dd(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Su(n);throw"an object"===r?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function fd(e,t,n){if((t=be(t))instanceof Ku)return t._internalPath;if("string"==typeof t)return md(e,t);throw gd("Field path arguments must be of type string or ",e,!1,void 0,n)}const pd=new RegExp("[~\\*/\\[\\]]");function md(e,t,n){if(t.search(pd)>=0)throw gd("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Ku(...t.split("."))._internalPath}catch(r){throw gd("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function gd(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new _n(En.INVALID_ARGUMENT,o+e+l)}function vd(e,t){return e.some((e=>e.isEqual(t)))}class yd{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bd extends yd{data(){return super.data()}}function xd(e,t){return"string"==typeof t?md(e,t):t instanceof Ku?t._internalPath:t._delegate._internalPath}function wd(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new _n(En.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nd{}class Ed extends Nd{}function _d(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof Nd&&n.push(t),n=n.concat(s),function(e){const t=e.filter((e=>e instanceof Sd)).length,n=e.filter((e=>e instanceof kd)).length;if(t>1||t>0&&n>0)throw new _n(En.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class kd extends Ed{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new kd(e,t,n)}_apply(e){const t=this._parse(e);return Rd(e._query,t),new Ru(e.firestore,e.converter,xi(e._query,t))}_parse(e){const t=nd(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new _n(En.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){Dd(a,i);const t=[];for(const n of a)t.push(Ad(r,e,n));o={arrayValue:{values:t}}}else o=Ad(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Dd(a,i),o=ld(n,t,a,"in"===i||"not-in"===i);return Ws.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Sd extends Nd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sd(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Ks.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Rd(n,s),n=xi(n,s)}(e._query,t),new Ru(e.firestore,e.converter,xi(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Cd extends Ed{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Cd(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new _n(En.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new _n(En.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bs(t,n)}(e._query,this._field,this._direction);return new Ru(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new hi(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Td(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=xd("orderBy",e);return Cd._create(n,t)}class Id extends Ed{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Id(e,t,n)}_apply(e){return new Ru(e.firestore,e.converter,wi(e._query,this._limit,this._limitType))}}function jd(e){return Tu("limit",e),Id._create("limit",e,"F")}function Ad(e,t,n){if("string"==typeof(n=be(n))){if(""===n)throw new _n(En.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gi(t)&&-1!==n.indexOf("/"))throw new _n(En.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Qn.fromString(n));if(!Jn.isDocumentKey(r))throw new _n(En.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Cs(e,new Jn(r))}if(n instanceof Pu)return Cs(e,n._key);throw new _n(En.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Su(n),"."))}function Dd(e,t){if(!Array.isArray(e)||0===e.length)throw new _n(En.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Rd(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new _n(En.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new _n(En.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Pd{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ts(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw bn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return qr(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[vs].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>ts(e.doubleValue)));return new Yu(s)}convertGeoPoint(e){return new Qu(ts(e.latitude),ts(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ls(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(cs(e));default:return null}}convertTimestamp(e){const t=es(e);return new Hn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Qn.fromString(e);wn(No(n),9688,{name:e});const r=new hs(n.get(1),n.get(3)),s=new Jn(n.popFirst(5));return r.isEqual(t)||gn("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Od(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ld{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Md extends yd{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Fd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(xd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Fd extends Md{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Vd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ld(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Fd(this._firestore,this._userDataWriter,n.key,n,new Ld(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new _n(En.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Fd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Ld(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Fd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ld(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Ud(t.type),doc:r,oldIndex:s,newIndex:i}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Ud(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bn(61501,{type:e})}}class zd extends Pd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pu(this.firestore,null,t)}}function Bd(e){e=Cu(e,Ru);const t=Cu(e.firestore,Bu),n=qu(t),r=new zd(t);return wd(e._query),xu(n,e._query).then((n=>new Vd(t,r,e,n)))}function qd(e,t,n){e=Cu(e,Pu);const r=Cu(e.firestore,Bu),s=nd(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=be(t))||t instanceof Ku?od(s,"updateDoc",e._key,t,n,o):ad(s,"updateDoc",e._key,t),Gd(r,[i.toMutation(e._key,aa.exists(!0))])}function Hd(e){return Gd(Cu(e.firestore,Bu),[new ba(e._key,aa.none())])}function Wd(e,t){const n=Cu(e.firestore,Bu),r=Mu(e),s=Od(e.converter,t);return Gd(n,[rd(nd(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,aa.exists(!1))]).then((()=>r))}function Kd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=be(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||zu(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(zu(n[l])){const e=n[l];n[l]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[l+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof Pu)d=Cu(e.firestore,Bu),h=pi(e._key.path),u={next:t=>{n[l]&&n[l](Qd(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Cu(e,Ru);d=Cu(t.firestore,Bu),h=t._query;const r=new zd(d);u={next:e=>{n[l]&&n[l](new Vd(d,r,t,e))},error:n[l+1],complete:n[l+2]},wd(e._query)}return function(e,t,n,r){const s=new du(r),i=new Ac(t,s,n);return e.asyncQueue.enqueueAndForget((async()=>_c(await bu(e),i))),()=>{s.xu(),e.asyncQueue.enqueueAndForget((async()=>kc(await bu(e),i)))}}(qu(d),h,c,u)}function Gd(e,t){return function(e,t){const n=new kn;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=ou(e);try{const e=await function(e,t){const n=Nn(e),r=Hn.now(),s=t.reduce(((e,t)=>e.add(t.key)),Ui());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=Ai(),l=Ui();return n.Bs.getEntries(e,s).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((s=>{i=s;const a=[];for(const e of t){const t=ha(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new ma(e.key,t,Ms(t.value.mapValue),aa.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:Pi(i)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Au[e.currentUser.toKey()];r||(r=new Wr(Mn)),r=r.insert(t,n),e.Au[e.currentUser.toKey()]=r}(r,e.batchId,n),await ru(r,e.changes),await rc(r.remoteStore)}catch(e){const t=vc(e,"Failed to persist write");n.reject(t)}}(await yu(e),t,n))),n.promise}(qu(e),t)}function Qd(e,t,n){const r=n.docs.get(t._key),s=new zd(e);return new Md(e,s,t._key,r,new Ld(n.hasPendingWrites,n.fromCache),t.converter)}function Yd(){return new id("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){hn=e}(Pt),It(new xe("firestore",((e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new Bu(new In(e.getProvider("auth-internal")),new Rn(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new _n(En.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hs(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),Mt(cn,un,e),Mt(cn,un,"esm2017")}();Mt("firebase","11.9.0","app");function Xd(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Jd(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $d=Jd,Zd=new ue("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),eh=new je("@firebase/auth");function th(e){if(eh.logLevel<=ke.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];eh.error("Auth (".concat(Pt,"): ").concat(e),...n)}}function nh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ah(e,...n)}function rh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ah(e,...n)}function sh(e,t,n){const r=Object.assign(Object.assign({},$d()),{[t]:n});return new ue("auth","Firebase",r).create(t,{appName:e.name})}function ih(e){return sh(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ah(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Zd.create(e,...n)}function oh(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw ah(t,...r)}}function lh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw th(t),new Error(t)}function ch(e,t){e||lh(t)}function uh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function dh(){return"http:"===hh()||"https:"===hh()}function hh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function fh(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(dh()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class ph{constructor(e,t){this.shortDelay=e,this.longDelay=t,ch(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ie())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return fh()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mh(e,t){ch(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class gh{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void lh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void lh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void lh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const vh={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},yh=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bh=new ph(3e4,6e4);function xh(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function wh(e,t,n,r){return Nh(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=pe(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Z(e.emulatorConfig.host)&&(l.credentials="include"),gh.fetch()(await _h(e,e.config.apiHost,n,a),l)}))}async function Nh(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},vh),t);try{const t=new Sh(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Ch(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ch(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Ch(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Ch(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw sh(e,o,a);nh(e,o)}}catch(s){if(s instanceof ce)throw s;nh(e,"network-request-failed",{message:String(s)})}}async function Eh(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await wh(e,t,n,r,s);return"mfaPendingCredential"in i&&nh(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function _h(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),i=e,a=i.config.emulator?mh(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(yh.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function kh(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Sh{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(rh(this.auth,"network-request-failed"))),bh.get())}))}}function Ch(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=rh(e,t,r);return s.customData._tokenResponse=n,s}function Th(e){return void 0!==e&&void 0!==e.enterprise}class Ih{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return kh(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jh(e,t){return wh(e,"GET","/v2/recaptchaConfig",xh(e,t))}async function Ah(e,t){return wh(e,"POST","/v1/accounts:lookup",t)}function Dh(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Rh(e){return 1e3*Number(e)}function Ph(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return th("JWT malformed, contained fewer than 3 sections"),null;try{const e=W(n);return e?JSON.parse(e):(th("Failed to decode base64 JWT payload"),null)}catch(s){return th("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function Oh(e){const t=Ph(e);return oh(t,"internal-error"),oh("undefined"!==typeof t.exp,"internal-error"),oh("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Lh(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof ce&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Mh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Fh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dh(this.lastLoginAt),this.creationTime=Dh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vh(e){var t;const n=e.auth,r=await e.getIdToken(),s=await Lh(e,Ah(n,{idToken:r}));oh(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?Uh(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Fh(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Uh(e){return e.map((e=>{var{providerId:t}=e,n=Xd(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class zh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oh(e.idToken,"internal-error"),oh("undefined"!==typeof e.idToken,"internal-error"),oh("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Oh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){oh(0!==e.length,"internal-error");const t=Oh(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(oh(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Nh(e,{},(async()=>{const n=pe({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await _h(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",gh.fetch()(i,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new zh;return n&&(oh("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(oh("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(oh("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zh,this.toJSON())}_performRefresh(){return lh("not implemented")}}function Bh(e,t){oh("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class qh{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=Xd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Fh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Lh(this,this.stsTokenManager.getToken(this.auth,e));return oh(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=be(e),r=await n.getIdToken(t),s=Ph(r);oh(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Dh(Rh(s.auth_time)),issuedAtTime:Dh(Rh(s.iat)),expirationTime:Dh(Rh(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=be(e);await Vh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(oh(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qh(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){oh(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Vh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(At(this.auth.app))return Promise.reject(ih(this.auth));const e=await this.getIdToken();return await Lh(this,async function(e,t){return wh(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:N}=t;oh(y&&N,e,"internal-error");const E=zh.fromJSON(this.name,N);oh("string"===typeof y,e,"internal-error"),Bh(u,e.name),Bh(d,e.name),oh("boolean"===typeof b,e,"internal-error"),oh("boolean"===typeof x,e,"internal-error"),Bh(h,e.name),Bh(f,e.name),Bh(p,e.name),Bh(m,e.name),Bh(g,e.name),Bh(v,e.name);const _=new qh({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(_.providerData=w.map((e=>Object.assign({},e)))),m&&(_._redirectEventId=m),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new zh;r.updateFromServerResponse(t);const s=new qh({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Vh(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];oh(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Uh(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new zh;a.updateFromIdToken(n);const o=new qh({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Fh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const Hh=new Map;function Wh(e){ch(e instanceof Function,"Expected a class definition");let t=Hh.get(e);return t?(ch(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Hh.set(e,t),t)}class Kh{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Kh.type="NONE";const Gh=Kh;function Qh(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Yh{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Qh(this.userKey,r.apiKey,s),this.fullPersistenceKey=Qh("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Ah(this.auth,{idToken:e}).catch((()=>{}));return t?qh._fromGetAccountInfoResponse(this.auth,t,e):null}return qh._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Yh(Wh(Gh),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=r[0]||Wh(Gh);const i=Qh(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await Ah(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await qh._fromGetAccountInfoResponse(e,r,t)}else n=qh._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(i)}catch(l){}}))),new Yh(s,e,n)):new Yh(s,e,n)}}function Xh(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ef(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Jh(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(nf(t))return"Blackberry";if(rf(t))return"Webos";if($h(t))return"Safari";if((t.includes("chrome/")||Zh(t))&&!t.includes("edge/"))return"Chrome";if(tf(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Jh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie();return/firefox\//i.test(e)}function $h(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie();return/crios\//i.test(e)}function ef(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie();return/iemobile/i.test(e)}function tf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie();return/android/i.test(e)}function nf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie();return/blackberry/i.test(e)}function rf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie();return/webos/i.test(e)}function sf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function af(){return function(){const e=ie();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function of(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie();return sf(e)||tf(e)||rf(e)||nf(e)||/windows phone/i.test(e)||ef(e)}function lf(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Xh(ie());break;case"Worker":t="".concat(Xh(ie()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Pt,"/").concat(r)}class cf{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(s){r(s)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class uf{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class df{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ff(this),this.idTokenSubscription=new ff(this),this.beforeStateQueue=new cf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wh(t)),this._initializationPromise=this.queue((async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await Yh.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Ah(this,{idToken:e}),n=await qh._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(At(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(i)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return oh(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(At(this.app))return Promise.reject(ih(this));const t=e?be(e):null;return t&&oh(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&oh(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return At(this.app)?Promise.reject(ih(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return At(this.app)?Promise.reject(ih(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Wh(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return wh(e,"GET","/v2/passwordPolicy",xh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new uf(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ue("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return wh(e,"POST","/v2/accounts:revokeToken",xh(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wh(e)||this._popupRedirectResolver;oh(t,this,"argument-error"),this.redirectPersistenceManager=await Yh.create(this,[Wh(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oh(a,this,"internal-error"),a.then((()=>{i||s(this.currentUser)})),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oh(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lf(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(At(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(eh.logLevel<=ke.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];eh.warn("Auth (".concat(Pt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function hf(e){return be(e)}class ff{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new ve(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return oh(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let pf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mf(e){return pf.loadJS(e)}function gf(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class vf{constructor(){this.enterprise=new yf}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class yf{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const bf="NO_RECAPTCHA";class xf{constructor(e){this.type="recaptcha-enterprise",this.auth=hf(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Th(s)?s.enterprise.ready((()=>{s.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(bf)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new vf).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{jh(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Ih(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((s=>{if(!t&&Th(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=pf.recaptchaEnterpriseScript;0!==t.length&&(t+=s),mf(t).then((()=>{n(s,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function wf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new xf(e);let a;if(s)a=bf;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Nf(e,t,n,r,s){var i,a;if("EMAIL_PASSWORD_PROVIDER"===s){if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await wf(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch((async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await wf(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)}))}if("PHONE_PROVIDER"===s){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const s=await wf(e,t,n);return r(e,s).catch((async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await wf(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)}))}{const s=await wf(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function Ef(e){const t=hf(e),n=await jh(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Ih(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new xf(t).verify()}}function _f(e,t,n){const r=hf(e);oh(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=kf(t),{host:a,port:o}=function(e){const t=kf(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Sf(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Sf(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(i,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return oh(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void oh(he(c,r.config.emulator)&&he(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Z(a)?(ee("".concat(i,"//").concat(a).concat(l)),se("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function kf(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Sf(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Cf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return lh("not implemented")}_getIdTokenResponse(e){return lh("not implemented")}_linkToIdToken(e,t){return lh("not implemented")}_getReauthenticationResolver(e){return lh("not implemented")}}async function Tf(e,t){return wh(e,"POST","/v1/accounts:signUp",t)}async function If(e,t){return Eh(e,"POST","/v1/accounts:signInWithPassword",xh(e,t))}class jf extends Cf{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new jf(e,t,"password")}static _fromEmailAndCode(e,t){return new jf(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Nf(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",If,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Eh(e,"POST","/v1/accounts:signInWithEmailLink",xh(e,t))}(e,{email:this._email,oobCode:this._password});default:nh(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Nf(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Tf,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Eh(e,"POST","/v1/accounts:signInWithEmailLink",xh(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:nh(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Af(e,t){return Eh(e,"POST","/v1/accounts:signInWithIdp",xh(e,t))}class Df extends Cf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Df(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):nh("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=Xd(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Df(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Af(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Af(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Af(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pe(t)}return e}}async function Rf(e,t){return wh(e,"POST","/v1/accounts:sendVerificationCode",xh(e,t))}const Pf={USER_NOT_FOUND:"user-not-found"};class Of extends Cf{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Of({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Of({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Eh(e,"POST","/v1/accounts:signInWithPhoneNumber",xh(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Eh(e,"POST","/v1/accounts:signInWithPhoneNumber",xh(e,t));if(n.temporaryProof)throw Ch(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Eh(e,"POST","/v1/accounts:signInWithPhoneNumber",xh(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Pf)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Of({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Lf{constructor(e){var t,n,r,s,i,a;const o=me(ge(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);oh(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.lang)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=me(ge(e)).link,n=t?me(ge(t)).deep_link_id:null,r=me(ge(e)).deep_link_id;return(r?me(ge(r)).link:null)||r||n||t||e}(e);try{return new Lf(t)}catch(n){return null}}}class Mf{constructor(){this.providerId=Mf.PROVIDER_ID}static credential(e,t){return jf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Lf.parseLink(t);return oh(n,"argument-error"),jf._fromEmailAndCode(e,n.code,n.tenantId)}}Mf.PROVIDER_ID="password",Mf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Mf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ff{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Vf extends Ff{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Uf extends Vf{constructor(){super("facebook.com")}static credential(e){return Df._fromParams({providerId:Uf.PROVIDER_ID,signInMethod:Uf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uf.credentialFromTaggedObject(e)}static credentialFromError(e){return Uf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Uf.credential(t.oauthAccessToken)}catch(n){return null}}}Uf.FACEBOOK_SIGN_IN_METHOD="facebook.com",Uf.PROVIDER_ID="facebook.com";class zf extends Vf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Df._fromParams({providerId:zf.PROVIDER_ID,signInMethod:zf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zf.credentialFromTaggedObject(e)}static credentialFromError(e){return zf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return zf.credential(n,r)}catch(s){return null}}}zf.GOOGLE_SIGN_IN_METHOD="google.com",zf.PROVIDER_ID="google.com";class Bf extends Vf{constructor(){super("github.com")}static credential(e){return Df._fromParams({providerId:Bf.PROVIDER_ID,signInMethod:Bf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bf.credentialFromTaggedObject(e)}static credentialFromError(e){return Bf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Bf.credential(t.oauthAccessToken)}catch(n){return null}}}Bf.GITHUB_SIGN_IN_METHOD="github.com",Bf.PROVIDER_ID="github.com";class qf extends Vf{constructor(){super("twitter.com")}static credential(e,t){return Df._fromParams({providerId:qf.PROVIDER_ID,signInMethod:qf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qf.credentialFromTaggedObject(e)}static credentialFromError(e){return qf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return qf.credential(n,r)}catch(s){return null}}}qf.TWITTER_SIGN_IN_METHOD="twitter.com",qf.PROVIDER_ID="twitter.com";class Hf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await qh._fromIdTokenResponse(e,n,r),i=Wf(n);return new Hf({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Wf(n);return new Hf({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Wf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Kf extends ce{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Kf.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Kf(e,t,n,r)}}function Gf(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Kf._fromErrorAndOperation(e,n,t,r);throw n}))}async function Qf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Lh(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Hf._forOperation(e,"link",r)}async function Yf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(At(r.app))return Promise.reject(ih(r));const s="reauthenticate";try{const i=await Lh(e,Gf(r,s,t,e),n);oh(i.idToken,r,"internal-error");const a=Ph(i.idToken);oh(a,r,"internal-error");const{sub:o}=a;return oh(e.uid===o,r,"user-mismatch"),Hf._forOperation(e,s,i)}catch(i){throw(null===i||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&nh(r,"user-mismatch"),i}}async function Xf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(At(e.app))return Promise.reject(ih(e));const r="signIn",s=await Gf(e,r,t),i=await Hf._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}function Jf(e,t){return wh(e,"POST","/v2/accounts/mfaEnrollment:start",xh(e,t))}new WeakMap;const $f="__sak";class Zf{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($f,"1"),this.storage.removeItem($f),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ep extends Zf{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=of(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);af()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ep.type="LOCAL";const tp=ep;function np(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(s))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function rp(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class sp{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=rp(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return np(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=rp(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=rp(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=np(n);const s=setInterval((()=>{const e=np(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(s)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}sp.type="COOKIE";class ip extends Zf{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ip.type="SESSION";const ap=ip;class op{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new op(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map((async e=>e(t.origin,s))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function lp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}op.receivers=[];class cp{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise(((a,o)=>{const l=lp("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{i&&this.removeMessageHandler(i)}))}}function up(){return window}function dp(){return"undefined"!==typeof up().WorkerGlobalScope&&"function"===typeof up().importScripts}const hp="firebaseLocalStorageDb",fp="firebaseLocalStorage",pp="fbase_key";class mp{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function gp(e,t){return e.transaction([fp],t?"readwrite":"readonly").objectStore(fp)}function vp(){const e=indexedDB.open(hp,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(fp,{keyPath:pp})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(fp)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(hp);return new mp(e).toPromise()}(),t(await vp()))}))}))}async function yp(e,t,n){const r=gp(e,!0).put({[pp]:t,value:n});return new mp(r).toPromise()}function bp(e,t){const n=gp(e,!0).delete(t);return new mp(n).toPromise()}class xp{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await vp()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=op._getInstance(dp()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new cp(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vp();return await yp(e,$f,"1"),await bp(e,$f),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>yp(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=gp(e,!1).get(t),r=await new mp(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>bp(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=gp(e,!1).getAll();return new mp(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}xp.type="LOCAL";const wp=xp;function Np(e,t){return wh(e,"POST","/v2/accounts/mfaSignIn:start",xh(e,t))}gf("rcb"),new ph(3e4,6e4);const Ep="recaptcha";async function _p(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Ef(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){oh("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Nf(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===bf){oh((null===n||void 0===n?void 0:n.type)===Ep,e,"argument-error");return Jf(e,await kp(e,t,n))}return Jf(e,t)}),"PHONE_PROVIDER");return(await i.catch((e=>Promise.reject(e)))).phoneSessionInfo.sessionInfo}{oh("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;oh(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Nf(e,a,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===bf){oh((null===n||void 0===n?void 0:n.type)===Ep,e,"argument-error");return Np(e,await kp(e,t,n))}return Np(e,t)}),"PHONE_PROVIDER");return(await o.catch((e=>Promise.reject(e)))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Nf(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===bf){oh((null===n||void 0===n?void 0:n.type)===Ep,e,"argument-error");return Rf(e,await kp(e,t,n))}return Rf(e,t)}),"PHONE_PROVIDER");return(await r.catch((e=>Promise.reject(e)))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function kp(e,t,n){oh(n.type===Ep,e,"argument-error");const r=await n.verify();oh("string"===typeof r,e,"argument-error");const s=Object.assign({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Sp{constructor(e){this.providerId=Sp.PROVIDER_ID,this.auth=hf(e)}verifyPhoneNumber(e,t){return _p(this.auth,e,be(t))}static credential(e,t){return Of._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Sp.credentialFromTaggedObject(t)}static credentialFromError(e){return Sp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Of._fromTokenResponse(n,r):null}}function Cp(e,t){return t?Wh(t):(oh(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Sp.PROVIDER_ID="phone",Sp.PHONE_SIGN_IN_METHOD="phone";class Tp extends Cf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Af(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Af(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Af(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ip(e){return Xf(e.auth,new Tp(e),e.bypassAuthState)}function jp(e){const{auth:t,user:n}=e;return oh(n,t,"internal-error"),Yf(n,new Tp(e),e.bypassAuthState)}async function Ap(e){const{auth:t,user:n}=e;return oh(n,t,"internal-error"),Qf(n,new Tp(e),e.bypassAuthState)}class Dp{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ip;case"linkViaPopup":case"linkViaRedirect":return Ap;case"reauthViaPopup":case"reauthViaRedirect":return jp;default:nh(this.auth,"internal-error")}}resolve(e){ch(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ch(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rp=new ph(2e3,1e4);class Pp extends Dp{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Pp.currentPopupAction&&Pp.currentPopupAction.cancel(),Pp.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oh(e,this.auth,"internal-error"),e}async onExecution(){ch(1===this.filter.length,"Popup operations only handle one event");const e=lp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(rh(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(rh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pp.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(rh(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Rp.get())};e()}}Pp.currentPopupAction=null;const Op=new Map;class Lp extends Dp{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Op.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Vp(t),r=Fp(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Op.set(this.auth._key(),e)}return this.bypassAuthState||Op.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Mp(e,t){Op.set(e._key(),t)}function Fp(e){return Wh(e._redirectPersistence)}function Vp(e){return Qh("pendingRedirect",e.config.apiKey,e.name)}async function Up(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(At(e.app))return Promise.reject(ih(e));const r=hf(e),s=Cp(r,t),i=new Lp(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class zp{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qp(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!qp(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(rh(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bp(e))}saveEventToCache(e){this.cachedEventUids.add(Bp(e)),this.lastProcessedEventTime=Date.now()}}function Bp(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function qp(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Hp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wp=/^https?/;async function Kp(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return wh(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Gp(r))return}catch(n){}nh(e,"unauthorized-domain")}function Gp(e){const t=uh(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Wp.test(n))return!1;if(Hp.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Qp=new ph(3e4,6e4);function Yp(){const e=up().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Xp(e){return new Promise(((t,n)=>{var r,s,i;function a(){Yp(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Yp(),n(rh(e,"network-request-failed"))},timeout:Qp.get()})}if(null===(s=null===(r=up().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=up().gapi)||void 0===i?void 0:i.load)){const t=gf("iframefcb");return up()[t]=()=>{gapi.load?a():n(rh(e,"network-request-failed"))},mf("".concat(pf.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}a()}})).catch((e=>{throw Jp=null,e}))}let Jp=null;const $p=new ph(5e3,15e3),Zp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},em=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tm(e){const t=e.config;oh(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?mh(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Pt},s=em.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(pe(r).slice(1))}async function nm(e){const t=await function(e){return Jp=Jp||Xp(e),Jp}(e),n=up().gapi;return oh(n,e,"internal-error"),t.open({where:document.body,url:tm(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zp,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=rh(e,"network-request-failed"),i=up().setTimeout((()=>{r(s)}),$p.get());function a(){up().clearTimeout(i),n(t)}t.ping(a).then(a,(()=>{r(s)}))}))))}const rm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class sm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function im(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},rm),{width:r.toString(),height:s.toString(),top:i,left:a}),c=ie().toLowerCase();n&&(o=Zh(c)?"_blank":n),Jh(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return sf(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new sm(null);const d=window.open(t||"",o,u);oh(d,e,"popup-blocked");try{d.focus()}catch(h){}return new sm(d)}const am="__/auth/handler",om="emulator/auth/handler",lm=encodeURIComponent("fac");async function cm(e,t,n,r,s,i){oh(e.config.authDomain,e,"auth-domain-config-required"),oh(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Pt,eventId:s};if(t instanceof Ff){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Vf){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(lm,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(am);return mh(t,om)}(e),"?").concat(pe(o).slice(1)).concat(c)}const um="webStorageSupport";const dm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ap,this._completeRedirectFn=Up,this._overrideRedirectResult=Mp}async _openPopup(e,t,n,r){var s;ch(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return im(e,await cm(e,t,n,uh(),r),lp())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){up().location.href=e}(await cm(e,t,n,uh(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ch(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await nm(e),n=new zp(e);return t.register("authEvent",(t=>{oh(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(um,{type:um},(n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[um];void 0!==s&&t(!!s),nh(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Kp(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return of()||$h()||sf()}};var hm="@firebase/auth",fm="1.10.6";class pm{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){oh(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const mm=J("authIdTokenMaxAge")||300;let gm=null;var vm;pf={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=rh("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},vm="Browser",It(new xe("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;oh(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:vm,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lf(vm)},c=new df(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wh);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),It(new xe("auth-internal",(e=>(e=>new pm(e))(hf(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Mt(hm,fm,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(vm)),Mt(hm,fm,"esm2017");const ym="firebasestorage.googleapis.com",bm="storageBucket";class xm extends ce{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Em(e),"Firebase Storage: ".concat(t," (").concat(Em(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xm.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Em(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var wm,Nm;function Em(e){return"storage/"+e}function _m(){return new xm(wm.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function km(){return new xm(wm.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Sm(){return new xm(wm.CANCELED,"User canceled the upload/download.")}function Cm(e){return new xm(wm.INVALID_ARGUMENT,e)}function Tm(){return new xm(wm.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(wm||(wm={}));class Im{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Im.makeFromUrl(e,t)}catch(s){return new Im(e,"")}if(""===n.path)return n;throw r=e,new xm(wm.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://".concat(t===ym?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new Im(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new xm(wm.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class jm{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Am(e,t,n,r){if(r<t)throw Cm("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Cm("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Dm(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Rm(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Nm||(Nm={}));class Pm{constructor(e,t,n,r,s,i,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Om(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Nm.NO_ERROR,s=n.getStatus();if(!t||Rm(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Nm.ABORT;return void e(!1,new Om(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new Om(i,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(i){r(i)}else if(null!==s){const e=_m();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?Tm():Sm())}else{r(km())}};this.canceled_?t(0,new Om(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){s=setTimeout((()=>{s=null,e(f,l())}),t)}function h(){i&&clearTimeout(i)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===o?(o=2,i=0):i=1e3*(r+Math.random()),d(i)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==s?(e||(o=2),clearTimeout(s),d(0)):e||(o=1)))}return d(0),i=setTimeout((()=>{a=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Om{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Lm(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class Mm{constructor(e,t){this._service=e,this._location=t instanceof Im?t:Im.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Mm(e,t)}get root(){const e=new Im(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Lm(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Im(this._location.bucket,e);return new Mm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new xm(wm.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Fm(e,t){const n=null===t||void 0===t?void 0:t[bm];return null==n?null:Im.makeFromBucketSpec(n,e)}class Vm{constructor(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=ym,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Im.makeFromBucketSpec(r,this._host):Fm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Im.makeFromBucketSpec(this._url,e):this._bucket=Fm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Am("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Am("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(At(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mm(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new jm(Tm());{const i=function(e,t,n,r,s,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=Dm(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Pm(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a,o)}(e,this._appId,n,r,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then((()=>this._requests.delete(i)),(()=>this._requests.delete(i))),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Um="@firebase/storage",zm="0.13.12",Bm="storage";function qm(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Vm(r,s,i,n,Pt)}It(new xe(Bm,qm,"PUBLIC").setMultipleInstances(!0)),Mt(Um,zm,""),Mt(Um,zm,"esm2017");const Hm=Ot({apiKey:"AIzaSyBzeWurVuCR9QT08C96qEB7xpyYjoZ6I-U",authDomain:"unicom-e678a.firebaseapp.com",databaseURL:"https://unicom-e678a-default-rtdb.europe-west1.firebasedatabase.app",projectId:"unicom-e678a",storageBucket:"unicom-e678a.firebasestorage.app",messagingSenderId:"974831664860",appId:"1:974831664860:web:770524f7cbe2c5a392fe19",measurementId:"G-YEDR17FP92"}),Wm=function(e,t){const n="object"==typeof e?e:Lt(),r="string"==typeof e?e:t||ds,s=jt(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=Y("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;e=Cu(e,Du);const i=Z(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&(ee("https://".concat(l)),se("Firestore",!0)),a.host!==Iu&&a.host!==l&&vn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:l,ssl:i,emulatorOptions:r});if(!he(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=dn.MOCK_USER;else{t=te(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new _n(En.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new dn(i)}e._authCredentials=new Tn(new Sn(t,n))}}(s,...e)}return s}(Hm),Km=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt();const t=jt(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=jt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(he(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;nh(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:dm,persistence:[wp,tp,ap]}),r=J("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>mm)return;const r=null===t||void 0===t?void 0:t.token;gm!==r&&(gm=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){be(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){be(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var s;const i=Q("auth");i&&_f(n,"http://".concat(i))}(Hm),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt(),t=arguments.length>1?arguments[1]:void 0;e=be(e);const n=jt(e,Bm).getImmediate({identifier:t}),r=Y("storage");r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const s=Z(t);s&&(ee("https://".concat(e.host)),se("Storage",!0)),e._isUsingEmulator=!0,e._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:te(i,e.app.options.projectId))}(e,t,n,r)}(n,...r)}(Hm),e=>{let{data:t,onNavigate:n}=e;const[s,i]=(0,r.useState)({}),[a,o]=(0,r.useState)([]),[l,u]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[f,P]=(0,r.useState)([]),[O,L]=(0,r.useState)([]),[M,z]=(0,r.useState)(!0),[B,q]=(0,r.useState)(null),[H,W]=(0,r.useState)("week"),[K,G]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{try{z(!0),console.log("\ud83d\udd25 Chargement Dashboard depuis Firebase...");const e=Kd(Lu(Wm,"vehicles"),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));console.log("\u2705 V\xe9hicules Dashboard:",t.length),h(t)}),(e=>{console.error("\u274c Erreur v\xe9hicules Dashboard:",e),q("Impossible de charger les v\xe9hicules")})),t=Lu(Wm,"interventions"),n=Kd(_d(t,Td("createdAt","desc"),jd(50)),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));console.log("\u2705 Interventions Dashboard:",t.length),P(t)}),(e=>{console.error("\u274c Erreur interventions Dashboard:",e)})),r=Lu(Wm,"washing"),s=Kd(_d(r,Td("createdAt","desc"),jd(50)),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));console.log("\u2705 Lavages Dashboard:",t.length),L(t),z(!1)}),(e=>{console.error("\u274c Erreur lavages Dashboard:",e),z(!1)}));return()=>{console.log("\ud83e\uddf9 Nettoyage listeners Dashboard"),e(),n(),s()}}catch(B){console.error("\u274c Erreur initialisation Dashboard:",B),q("Erreur de connexion Firebase: "+B.message),z(!1)}})()}),[]),(0,r.useEffect)((()=>{if(d.length>0||f.length>0||O.length>0){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),n=(new Date(e.getTime()-6048e5),f.filter((e=>{var n;return(null!==(n=e.createdAt)&&void 0!==n&&n.toDate?e.createdAt.toDate():new Date(e.createdAt))>=t}))),r=O.filter((e=>{var n;return(null!==(n=e.createdAt)&&void 0!==n&&n.toDate?e.createdAt.toDate():new Date(e.createdAt))>=t})),s=n.reduce(((e,t)=>e+(parseFloat(t.cost)||0)),0),a=r.reduce(((e,t)=>e+(parseFloat(t.cost)||0)),0),o=s+a,l=new Set([...n.map((e=>e.vehicleId)),...r.map((e=>e.vehicleId))]),c={totalVehicles:d.length,activeVehicles:l.size,totalInterventions:f.length,completedInterventions:f.filter((e=>"completed"===e.status)).length,thisMonthInterventions:n.length,totalWashings:O.length,completedWashings:O.filter((e=>"completed"===e.status)).length,thisMonthWashings:r.length,thisMonthRevenue:o,interventionsRevenue:s,washingsRevenue:a};console.log("\ud83d\udcca Stats calcul\xe9es:",c),i(c)}}),[d,f,O]),(0,r.useEffect)((()=>{if(f.length>0||O.length>0){const e=[];f.slice(0,5).forEach((t=>{e.push({id:"intervention-".concat(t.id),type:"intervention",action:t.type||"Intervention",description:t.description||"Maintenance v\xe9hicule",vehicle:t.vehiclePlate||"V\xe9hicule",vehicleId:t.vehicleId,time:Q(t.createdAt),timestamp:t.createdAt,status:t.status||"pending",employee:t.employeeName||"Non assign\xe9",cost:t.cost})})),O.slice(0,5).forEach((t=>{e.push({id:"washing-".concat(t.id),type:"washing",action:Y(t.type),description:t.description||"Service de lavage",vehicle:t.vehiclePlate||"V\xe9hicule",vehicleId:t.vehicleId,time:Q(t.createdAt),timestamp:t.createdAt,status:t.status||"scheduled",employee:t.employeeName||"Non assign\xe9",cost:t.cost})}));const t=e.sort(((e,t)=>{var n,r;const s=null!==(n=e.timestamp)&&void 0!==n&&n.toDate?e.timestamp.toDate():new Date(e.timestamp);return(null!==(r=t.timestamp)&&void 0!==r&&r.toDate?t.timestamp.toDate():new Date(t.timestamp)).getTime()-s.getTime()})).slice(0,6);o(t)}}),[f,O]),(0,r.useEffect)((()=>{if(d.length>0){const e=d.filter((e=>e.nextMaintenance)).map((e=>{const t=new Date(e.nextMaintenance),n=new Date,r=Math.ceil((t-n)/864e5);return c(c({},e),{},{daysUntil:r,urgency:r<=0?"critical":r<=7?"high":r<=30?"medium":"low"})})).sort(((e,t)=>e.daysUntil-t.daysUntil)).slice(0,5);u(e)}}),[d]);const Q=e=>{if(!e)return"Date inconnue";const t=null!==e&&void 0!==e&&e.toDate?e.toDate():new Date(e),n=new Date,r=Math.floor((n-t)/6e4);if(r<1)return"\xc0 l'instant";if(r<60)return"Il y a ".concat(r,"min");const s=Math.floor(r/60);if(s<24)return"Il y a ".concat(s,"h");const i=Math.floor(s/24);return i<7?"Il y a ".concat(i,"j"):t.toLocaleDateString()},Y=e=>({complete:"Lavage Complet",interior:"Int\xe9rieur",exterior:"Ext\xe9rieur",premium:"Premium + Cire",express:"Express",deep:"Nettoyage Approfondi"}[e]||"Lavage"),X=e=>{switch(console.log("\ud83d\ude80 Action rapide:",e),e){case"new-vehicle":n&&n("fleet-management",{showForm:!0});break;case"new-intervention":n&&n("interventions",{showForm:!0});break;case"new-washing":n&&n("washing",{showForm:!0});break;case"planning":n&&n("planning");break;case"view-all-activities":n&&n("activities");break;case"plan-maintenance":n&&n("interventions",{filter:"maintenance"});break;default:console.log("Action non d\xe9finie:",e)}},J=e=>{switch(e){case"completed":return"text-green-600";case"in-progress":return"text-blue-600";case"scheduled":case"pending":return"text-orange-600";case"cancelled":return"text-red-600";default:return"text-gray-600"}},$=e=>{switch(e){case"completed":return"Termin\xe9";case"in-progress":return"En cours";case"scheduled":return"Planifi\xe9";case"pending":return"En attente";case"cancelled":return"Annul\xe9";default:return"Inconnu"}},Z=e=>{switch(e){case"critical":return"border-red-500 bg-red-50 shadow-red-100";case"high":return"border-red-300 bg-red-50";case"medium":return"border-orange-300 bg-orange-50";default:return"border-blue-300 bg-blue-50"}},ee=[{title:"V\xe9hicules Total",value:d.length||0,icon:w,color:"blue",change:"".concat(s.activeVehicles||0," actifs"),changeType:"neutral",onClick:()=>X("view-fleet")},{title:"Interventions",value:s.thisMonthInterventions||0,icon:m,color:"orange",change:"".concat(s.completedInterventions||0," termin\xe9es"),changeType:"positive",onClick:()=>X("view-interventions")},{title:"Lavages",value:s.thisMonthWashings||0,icon:p,color:"green",change:"".concat(s.completedWashings||0," r\xe9alis\xe9s"),changeType:"positive",onClick:()=>X("view-washings")},{title:"CA du Mois",value:s.thisMonthRevenue?"".concat(s.thisMonthRevenue.toLocaleString(),"\u20ac"):"0\u20ac",icon:N,color:"purple",change:s.interventionsRevenue?"".concat(s.interventionsRevenue.toLocaleString(),"\u20ac maintenance"):"",changeType:"positive",onClick:()=>X("view-billing")}];return M?(0,R.jsxs)("div",{className:"space-y-8",children:[(0,R.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map(((e,t)=>(0,R.jsx)(U,{loading:!0},t)))}),(0,R.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,R.jsx)(U,{loading:!0}),(0,R.jsx)(U,{loading:!0})]}),(0,R.jsxs)("div",{className:"text-center p-8",children:[(0,R.jsx)("div",{className:"animate-spin mx-auto mb-4 w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"}),(0,R.jsx)("p",{className:"text-gray-600",children:"\ud83d\udd25 Chargement du tableau de bord..."})]})]}):(0,R.jsxs)("div",{className:"space-y-8",children:[(0,R.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 lg:items-center lg:justify-between",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Tableau de Bord"}),(0,R.jsxs)("p",{className:"text-gray-600 font-medium",children:["Vue d'ensemble de votre flotte \u2022 ",d.length," v\xe9hicules \u2022 ",s.thisMonthRevenue?"".concat(s.thisMonthRevenue.toLocaleString(),"\u20ac"):"0\u20ac"," ce mois"]})]}),(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsxs)("select",{value:H,onChange:e=>W(e.target.value),className:"input-modern",children:[(0,R.jsx)("option",{value:"week",children:"Cette semaine"}),(0,R.jsx)("option",{value:"month",children:"Ce mois"}),(0,R.jsx)("option",{value:"quarter",children:"Ce trimestre"}),(0,R.jsx)("option",{value:"year",children:"Cette ann\xe9e"})]}),(0,R.jsx)("button",{onClick:async()=>{G(!0),setTimeout((()=>{G(!1),console.log("\ud83d\udd04 Dashboard recharg\xe9")}),1e3)},disabled:K,className:"p-3 rounded-xl bg-white/50 hover:bg-white/70 transition-all text-gray-700",children:(0,R.jsx)(E,{size:20,className:K?"animate-spin":""})}),(0,R.jsx)("button",{className:"p-3 rounded-xl bg-white/50 hover:bg-white/70 transition-all text-gray-700",children:(0,R.jsx)(_,{size:20})}),(0,R.jsxs)("button",{className:"p-3 rounded-xl bg-white/50 hover:bg-white/70 transition-all text-gray-700 relative",children:[(0,R.jsx)(k,{size:20}),l.filter((e=>"critical"===e.urgency||"high"===e.urgency)).length>0&&(0,R.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]})]})]}),B&&(0,R.jsxs)("div",{className:"p-4 rounded-xl bg-red-50 border border-red-200 text-red-600",children:[(0,R.jsx)("div",{className:"font-bold mb-2",children:"\ud83d\udd25 Erreur Firebase"}),(0,R.jsx)("div",{children:B})]}),(0,R.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:ee.map(((e,t)=>(0,R.jsx)("div",{className:"cursor-pointer transition-transform hover:scale-105",onClick:e.onClick,children:(0,R.jsx)(F,{title:e.title,value:e.value,icon:e.icon,change:e.change,changeType:e.changeType,color:e.color})},t)))}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,R.jsx)(V,{title:"V\xe9hicules Actifs",value:s.activeVehicles||0,target:s.totalVehicles||0,icon:w,color:"green"}),(0,R.jsx)(V,{title:"Interventions Compl\xe9t\xe9es",value:s.completedInterventions||0,target:s.totalInterventions||0,icon:m,color:"blue"}),(0,R.jsx)(V,{title:"Lavages R\xe9alis\xe9s",value:s.completedWashings||0,target:s.totalWashings||0,icon:p,color:"purple"})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,R.jsxs)(U,{children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,R.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-3",children:[(0,R.jsx)(S,{className:"text-blue-600",size:24}),"Activit\xe9s R\xe9centes",a.length>0&&(0,R.jsx)("span",{className:"text-sm bg-blue-100 text-blue-600 px-2 py-1 rounded-full font-medium",children:a.length})]}),(0,R.jsxs)("button",{onClick:()=>X("view-all-activities"),className:"text-blue-600 hover:text-blue-800 font-medium text-sm flex items-center gap-1 transition-colors",children:["Voir tout",(0,R.jsx)(C,{size:14})]})]}),(0,R.jsx)("div",{className:"space-y-4",children:a.length>0?a.map((e=>{const t=(e=>{switch(e){case"washing":return p;case"intervention":return m;default:return g}})(e.type),n=(e=>{switch(e){case"completed":return v;case"in-progress":return g;case"scheduled":return y;case"pending":default:return b;case"cancelled":return x}})(e.status);return(0,R.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/50 hover:bg-white/70 transition-all border border-white/30 cursor-pointer group",onClick:()=>{"intervention"===e.type?X("view-interventions"):X("view-washings")},children:[(0,R.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,R.jsx)("div",{className:"p-2 rounded-xl bg-gradient-to-r ".concat("washing"===e.type?"from-blue-500 to-cyan-500":"from-orange-500 to-red-500"," shadow-lg"),children:(0,R.jsx)(t,{className:"text-white",size:18})}),(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsx)("h4",{className:"font-semibold text-gray-800 group-hover:text-blue-600 transition-colors",children:e.action}),(0,R.jsxs)("p",{className:"text-gray-600 text-sm",children:[e.vehicle," \u2022 ",e.employee," \u2022 ",e.time]}),e.description&&(0,R.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:e.description})]})]}),(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[e.cost&&(0,R.jsxs)("span",{className:"text-green-600 font-bold text-sm",children:[e.cost,"\u20ac"]}),(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)(n,{size:16,className:J(e.status)}),(0,R.jsx)("span",{className:"text-sm font-medium ".concat(J(e.status)),children:$(e.status)})]})]})]},e.id)})):(0,R.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,R.jsx)(g,{className:"mx-auto mb-4 text-gray-400",size:32}),(0,R.jsx)("p",{children:"Aucune activit\xe9 r\xe9cente"}),(0,R.jsx)("p",{className:"text-sm",children:"Les nouvelles interventions et lavages appara\xeetront ici"})]})})]}),(0,R.jsxs)(U,{children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,R.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-3",children:[(0,R.jsx)(T,{className:"text-orange-600",size:24}),"Maintenances \xe0 Pr\xe9voir",l.filter((e=>"critical"===e.urgency||"high"===e.urgency)).length>0&&(0,R.jsxs)("span",{className:"text-sm bg-red-100 text-red-600 px-2 py-1 rounded-full font-medium",children:[l.filter((e=>"critical"===e.urgency||"high"===e.urgency)).length," urgent",l.filter((e=>"critical"===e.urgency||"high"===e.urgency)).length>1?"s":""]})]}),(0,R.jsxs)("button",{onClick:()=>X("plan-maintenance"),className:"text-orange-600 hover:text-orange-800 font-medium text-sm flex items-center gap-1 transition-colors",children:["Planifier",(0,R.jsx)(C,{size:14})]})]}),(0,R.jsx)("div",{className:"space-y-4",children:l.length>0?l.map((e=>{var t;return(0,R.jsxs)("div",{className:"p-4 rounded-xl border-2 ".concat(Z(e.urgency)," transition-all hover:shadow-lg cursor-pointer group"),onClick:()=>X("view-vehicle",e.id),children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)("div",{className:"p-2 rounded-xl bg-white/70",children:(0,R.jsx)(w,{className:"text-gray-700",size:18})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h4",{className:"font-bold text-gray-800 group-hover:text-blue-600 transition-colors",children:e.plate}),(0,R.jsxs)("p",{className:"text-gray-600 text-sm",children:[e.brand," ",e.model]})]})]}),(0,R.jsxs)("div",{className:"text-right",children:[(0,R.jsx)("p",{className:"font-bold text-sm ".concat("critical"===e.urgency?"text-red-600 animate-pulse":"high"===e.urgency?"text-red-600":"medium"===e.urgency?"text-orange-600":"text-blue-600"),children:e.daysUntil<=0?"\ud83d\udea8 Maintenance due":1===e.daysUntil?"Demain":"Dans ".concat(e.daysUntil," jours")}),(0,R.jsx)("p",{className:"text-gray-600 text-xs",children:new Date(e.nextMaintenance).toLocaleDateString()})]})]}),(0,R.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,R.jsxs)("div",{className:"flex items-center gap-4",children:[(0,R.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,R.jsx)(I,{size:14}),(0,R.jsxs)("span",{children:[(null===(t=e.km)||void 0===t?void 0:t.toLocaleString())||"0"," km"]})]}),"critical"===e.urgency&&(0,R.jsx)("span",{className:"text-red-600 font-bold text-xs bg-red-100 px-2 py-1 rounded-full",children:"URGENT"})]}),(0,R.jsx)("button",{onClick:e=>{e.stopPropagation(),X("new-intervention")},className:"text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"Programmer"})]})]},e.id)})):(0,R.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,R.jsx)(v,{className:"mx-auto mb-4 text-green-400",size:32}),(0,R.jsx)("p",{children:"Aucune maintenance urgente"}),(0,R.jsx)("p",{className:"text-sm",children:"Tous vos v\xe9hicules sont \xe0 jour"})]})})]})]}),(0,R.jsxs)(U,{children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,R.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-3",children:[(0,R.jsx)(j,{className:"text-green-600",size:24}),"Aper\xe7u Hebdomadaire"]}),(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)("button",{className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors ".concat("week"===H?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>W("week"),children:"Cette semaine"}),(0,R.jsx)("button",{className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors ".concat("month"===H?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>W("month"),children:"Ce mois"})]})]}),(0,R.jsx)("div",{className:"grid grid-cols-7 gap-4",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(((e,t)=>{const n=t===((new Date).getDay()-1+7)%7,r=Math.min(Math.floor(3*Math.random())+(n?2:0),f.length),s=Math.min(Math.floor(6*Math.random())+(n?3:1),O.length);return(0,R.jsxs)("div",{className:"p-4 rounded-xl text-center transition-all cursor-pointer hover:scale-105 ".concat(n?"bg-gradient-to-br from-blue-500 to-purple-600 text-white shadow-lg":"bg-white/50 hover:bg-white/70"),onClick:()=>console.log("Voir d\xe9tails du ".concat(e)),children:[(0,R.jsxs)("p",{className:"font-semibold text-sm mb-3 ".concat(n?"text-white":"text-gray-700"),children:[e,n&&(0,R.jsx)("span",{className:"block text-xs opacity-90",children:"Aujourd'hui"})]}),(0,R.jsxs)("div",{className:"space-y-2",children:[(0,R.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,R.jsx)(m,{size:12,className:n?"text-white":"text-orange-600"}),(0,R.jsx)("span",{className:"text-xs font-medium ".concat(n?"text-white":"text-gray-700"),children:r})]}),(0,R.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,R.jsx)(p,{size:12,className:n?"text-white":"text-blue-600"}),(0,R.jsx)("span",{className:"text-xs font-medium ".concat(n?"text-white":"text-gray-700"),children:s})]})]}),n&&(0,R.jsx)("div",{className:"mt-2 text-xs opacity-90",children:"En cours"})]},e)}))}),(0,R.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-6 text-sm text-gray-600",children:[(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)(m,{size:14,className:"text-orange-600"}),(0,R.jsx)("span",{children:"Interventions"})]}),(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)(p,{size:14,className:"text-blue-600"}),(0,R.jsx)("span",{children:"Lavages"})]})]})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,R.jsxs)(U,{interactive:!0,className:"text-center p-6 cursor-pointer group",onClick:()=>X("new-vehicle"),children:[(0,R.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-r from-blue-500 to-blue-600 inline-block mb-4 group-hover:scale-110 transition-transform shadow-lg",children:(0,R.jsx)(w,{className:"text-white",size:24})}),(0,R.jsx)("h4",{className:"font-bold text-gray-800 mb-2 group-hover:text-blue-600 transition-colors",children:"Nouveau V\xe9hicule"}),(0,R.jsx)("p",{className:"text-gray-600 text-sm",children:"Ajouter un v\xe9hicule \xe0 la flotte"})]}),(0,R.jsxs)(U,{interactive:!0,className:"text-center p-6 cursor-pointer group",onClick:()=>X("new-intervention"),children:[(0,R.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-r from-orange-500 to-orange-600 inline-block mb-4 group-hover:scale-110 transition-transform shadow-lg",children:(0,R.jsx)(m,{className:"text-white",size:24})}),(0,R.jsx)("h4",{className:"font-bold text-gray-800 mb-2 group-hover:text-orange-600 transition-colors",children:"Intervention"}),(0,R.jsx)("p",{className:"text-gray-600 text-sm",children:"Planifier une maintenance"})]}),(0,R.jsxs)(U,{interactive:!0,className:"text-center p-6 cursor-pointer group",onClick:()=>X("new-washing"),children:[(0,R.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 inline-block mb-4 group-hover:scale-110 transition-transform shadow-lg",children:(0,R.jsx)(p,{className:"text-white",size:24})}),(0,R.jsx)("h4",{className:"font-bold text-gray-800 mb-2 group-hover:text-green-600 transition-colors",children:"Lavage"}),(0,R.jsx)("p",{className:"text-gray-600 text-sm",children:"Programmer un nettoyage"})]}),(0,R.jsxs)(U,{interactive:!0,className:"text-center p-6 cursor-pointer group",onClick:()=>X("planning"),children:[(0,R.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-r from-purple-500 to-purple-600 inline-block mb-4 group-hover:scale-110 transition-transform shadow-lg",children:(0,R.jsx)(y,{className:"text-white",size:24})}),(0,R.jsx)("h4",{className:"font-bold text-gray-800 mb-2 group-hover:text-purple-600 transition-colors",children:"Planning"}),(0,R.jsx)("p",{className:"text-gray-600 text-sm",children:"Voir le planning complet"})]})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,R.jsxs)(U,{className:"p-6",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,R.jsx)("h4",{className:"font-bold text-gray-800",children:"Efficacit\xe9 Flotte"}),(0,R.jsx)(A,{className:"text-green-600",size:20})]}),(0,R.jsxs)("div",{className:"space-y-3",children:[(0,R.jsxs)("div",{className:"flex justify-between items-center",children:[(0,R.jsx)("span",{className:"text-gray-600 text-sm",children:"V\xe9hicules actifs"}),(0,R.jsxs)("span",{className:"font-bold text-green-600",children:[s.totalVehicles>0?Math.round(s.activeVehicles/s.totalVehicles*100):0,"%"]})]}),(0,R.jsxs)("div",{className:"flex justify-between items-center",children:[(0,R.jsx)("span",{className:"text-gray-600 text-sm",children:"Maintenance \xe0 jour"}),(0,R.jsxs)("span",{className:"font-bold text-blue-600",children:[d.length>0?Math.round((d.length-l.filter((e=>"critical"===e.urgency)).length)/d.length*100):100,"%"]})]}),(0,R.jsxs)("div",{className:"flex justify-between items-center",children:[(0,R.jsx)("span",{className:"text-gray-600 text-sm",children:"Interventions r\xe9ussies"}),(0,R.jsxs)("span",{className:"font-bold text-orange-600",children:[s.totalInterventions>0?Math.round(s.completedInterventions/s.totalInterventions*100):0,"%"]})]})]})]}),(0,R.jsxs)(U,{className:"p-6",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,R.jsx)("h4",{className:"font-bold text-gray-800",children:"Performance \xc9quipe"}),(0,R.jsx)(D,{className:"text-blue-600",size:20})]}),(0,R.jsxs)("div",{className:"space-y-3",children:[(0,R.jsxs)("div",{className:"flex justify-between items-center",children:[(0,R.jsx)("span",{className:"text-gray-600 text-sm",children:"Interventions/jour"}),(0,R.jsx)("span",{className:"font-bold text-orange-600",children:Math.round((s.thisMonthInterventions||0)/30*10)/10})]}),(0,R.jsxs)("div",{className:"flex justify-between items-center",children:[(0,R.jsx)("span",{className:"text-gray-600 text-sm",children:"Lavages/jour"}),(0,R.jsx)("span",{className:"font-bold text-blue-600",children:Math.round((s.thisMonthWashings||0)/30*10)/10})]}),(0,R.jsxs)("div",{className:"flex justify-between items-center",children:[(0,R.jsx)("span",{className:"text-gray-600 text-sm",children:"CA moyen/intervention"}),(0,R.jsxs)("span",{className:"font-bold text-green-600",children:[s.completedInterventions>0?Math.round(s.interventionsRevenue/s.completedInterventions*10)/10:0,"\u20ac"]})]})]})]}),(0,R.jsxs)(U,{className:"p-6",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,R.jsx)("h4",{className:"font-bold text-gray-800",children:"Alertes & Notifications"}),(0,R.jsx)(k,{className:"text-red-600",size:20})]}),(0,R.jsxs)("div",{className:"space-y-3",children:[(0,R.jsxs)("div",{className:"flex justify-between items-center",children:[(0,R.jsx)("span",{className:"text-gray-600 text-sm",children:"Maintenances urgentes"}),(0,R.jsx)("span",{className:"font-bold text-red-600",children:l.filter((e=>"critical"===e.urgency||"high"===e.urgency)).length})]}),(0,R.jsxs)("div",{className:"flex justify-between items-center",children:[(0,R.jsx)("span",{className:"text-gray-600 text-sm",children:"Interventions en retard"}),(0,R.jsx)("span",{className:"font-bold text-orange-600",children:f.filter((e=>"pending"===e.status&&new Date(e.scheduledDate)<new Date)).length})]}),(0,R.jsxs)("div",{className:"flex justify-between items-center",children:[(0,R.jsx)("span",{className:"text-gray-600 text-sm",children:"Documents expir\xe9s"}),(0,R.jsx)("span",{className:"font-bold text-gray-600",children:"0"})]})]})]})]})]})}),Gm=f("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Qm=f("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ym=f("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Xm=f("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Jm=f("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),$m=f("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Zm=f("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),eg=f("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2h0a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"8ur5zv"}]]),tg=f("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),ng=e=>{var t;let{data:n,onRefresh:s}=e;const[i,a]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)(null),[b,x]=(0,r.useState)(null),[N,E]=(0,r.useState)(""),[_,k]=(0,r.useState)("all"),[S,C]=(0,r.useState)("plate"),[j,A]=(0,r.useState)(!1),[D,P]=(0,r.useState)(!1),[O,L]=(0,r.useState)(!1),[M,F]=(0,r.useState)(!1),[V,z]=(0,r.useState)(null),[B,q]=(0,r.useState)({plate:"",model:"",brand:"",year:(new Date).getFullYear(),km:0,fuelType:"Diesel",nextMaintenance:"",insuranceExpiry:"",technicalControlExpiry:"",status:"active",notes:""}),[H,W]=(0,r.useState)({}),[K,G]=(0,r.useState)({type:"",description:"",cost:"",scheduledDate:"",technician:"",priority:"medium"}),[Q,Y]=(0,r.useState)({type:"exterior",cost:"",notes:""});(0,r.useEffect)((()=>{(()=>{try{d(!0),console.log("Connexion \xe0 Firebase...");const e=Kd(Lu(Wm,"vehicles"),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));console.log("V\xe9hicules charg\xe9s depuis Firebase:",t),a(t),l(t),d(!1),x(null)}),(e=>{console.error("Erreur lors du chargement des v\xe9hicules:",e),x("Impossible de charger les v\xe9hicules depuis Firebase: "+e.message),d(!1)}));return()=>{console.log("Nettoyage de l'\xe9coute Firebase"),e()}}catch(b){console.error("Erreur lors de l'initialisation Firebase:",b),x("Erreur de connexion \xe0 Firebase: "+b.message),d(!1)}})()}),[]),(0,r.useEffect)((()=>{let e=[...i];N&&N.trim()&&(e=e.filter((e=>{const t=e.plate||"",n=e.model||"",r=e.brand||"",s=N.toLowerCase();return t.toLowerCase().includes(s)||n.toLowerCase().includes(s)||r.toLowerCase().includes(s)}))),"all"!==_&&(e=e.filter((e=>e.status===_))),e.sort(((e,t)=>{switch(S){case"plate":const n=(e.plate||"").toString().trim(),r=(t.plate||"").toString().trim();return n.localeCompare(r);case"km":const s=parseInt(e.km)||0;return(parseInt(t.km)||0)-s;case"maintenance":const i=e.nextMaintenance?new Date(e.nextMaintenance):new Date("9999-12-31"),a=t.nextMaintenance?new Date(t.nextMaintenance):new Date("9999-12-31");return i.getTime()-a.getTime();default:return 0}})),l(e)}),[i,N,_,S]);const X=e=>{z(e),v(null),A(!0)},J=e=>{z(e),W(c({},e)),v(null),P(!0)},$=e=>{z(e),G({type:"",description:"",cost:"",scheduledDate:"",technician:"",priority:"medium"}),v(null),L(!0)},Z=e=>{z(e),Y({type:"exterior",cost:"",notes:""}),v(null),F(!0)},ee=e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"maintenance":return"bg-orange-100 text-orange-800 border-orange-200";case"inactive":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},te=e=>{switch(e){case"high":return"text-red-600 bg-red-100";case"medium":return"text-orange-600 bg-orange-100";default:return"text-green-600 bg-green-100"}};return(0,R.jsxs)("div",{className:"space-y-6",children:[(0,R.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 lg:items-center lg:justify-between",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("h2",{className:"text-2xl font-bold gradient-text",children:"Gestion de la Flotte"}),(0,R.jsxs)("p",{className:"text-gray-600 font-medium",children:[o.length," v\xe9hicule",o.length>1?"s":"","all"!==_&&" (".concat(_,")"),u&&" - Chargement..."]})]}),(0,R.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(Gm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,R.jsx)("input",{type:"text",placeholder:"Rechercher un v\xe9hicule...",value:N,onChange:e=>E(e.target.value),className:"input-modern pl-10 w-full sm:w-64"})]}),(0,R.jsxs)("select",{value:_,onChange:e=>k(e.target.value),className:"input-modern",children:[(0,R.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,R.jsx)("option",{value:"active",children:"Actifs"}),(0,R.jsx)("option",{value:"maintenance",children:"En maintenance"}),(0,R.jsx)("option",{value:"inactive",children:"Inactifs"})]}),(0,R.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"input-modern",children:[(0,R.jsx)("option",{value:"plate",children:"Trier par plaque"}),(0,R.jsx)("option",{value:"km",children:"Trier par kilom\xe9trage"}),(0,R.jsx)("option",{value:"maintenance",children:"Trier par maintenance"})]}),(0,R.jsxs)("button",{onClick:()=>f(!0),className:"modern-button whitespace-nowrap",disabled:u,children:[(0,R.jsx)(Qm,{size:20}),"Ajouter v\xe9hicule"]})]})]}),b&&!h&&(0,R.jsxs)("div",{className:"p-4 rounded-xl bg-red-50 border border-red-200 text-red-600",children:[(0,R.jsx)("div",{className:"font-bold mb-2",children:"\ud83d\udd25 Erreur Firebase"}),(0,R.jsx)("div",{children:b}),(0,R.jsxs)("div",{className:"mt-2 text-sm",children:["\ud83d\udca1 V\xe9rifications sugg\xe9r\xe9es:",(0,R.jsxs)("ul",{className:"list-disc pl-5 mt-1",children:[(0,R.jsx)("li",{children:"Configuration Firebase dans firebase/config.js"}),(0,R.jsx)("li",{children:'R\xe8gles Firestore (utilisez le mode "test" pour d\xe9buter)'}),(0,R.jsx)("li",{children:"Connexion internet"})]})]})]}),h&&(0,R.jsxs)(U,{children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,R.jsx)("h3",{className:"text-xl font-bold gradient-text",children:"Nouveau V\xe9hicule"}),(0,R.jsx)("button",{onClick:()=>{f(!1),x(null)},className:"p-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all",children:(0,R.jsx)(Ym,{size:20})})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Plaque d'immatriculation *"}),(0,R.jsx)("input",{type:"text",value:B.plate,onChange:e=>q(c(c({},B),{},{plate:e.target.value})),className:"input-modern",placeholder:"AB-123-CD",required:!0})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Marque *"}),(0,R.jsx)("input",{type:"text",value:B.brand,onChange:e=>q(c(c({},B),{},{brand:e.target.value})),className:"input-modern",placeholder:"Renault",required:!0})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mod\xe8le *"}),(0,R.jsx)("input",{type:"text",value:B.model,onChange:e=>q(c(c({},B),{},{model:e.target.value})),className:"input-modern",placeholder:"Kangoo",required:!0})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ann\xe9e"}),(0,R.jsx)("input",{type:"number",value:B.year,onChange:e=>q(c(c({},B),{},{year:parseInt(e.target.value)})),className:"input-modern",min:"1990",max:(new Date).getFullYear()+1})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Kilom\xe9trage"}),(0,R.jsx)("input",{type:"number",value:B.km,onChange:e=>q(c(c({},B),{},{km:parseInt(e.target.value)})),className:"input-modern",placeholder:"0",min:"0"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Type de carburant"}),(0,R.jsxs)("select",{value:B.fuelType,onChange:e=>q(c(c({},B),{},{fuelType:e.target.value})),className:"input-modern",children:[(0,R.jsx)("option",{value:"Diesel",children:"Diesel"}),(0,R.jsx)("option",{value:"Essence",children:"Essence"}),(0,R.jsx)("option",{value:"Electrique",children:"\xc9lectrique"}),(0,R.jsx)("option",{value:"Hybride",children:"Hybride"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Statut"}),(0,R.jsxs)("select",{value:B.status,onChange:e=>q(c(c({},B),{},{status:e.target.value})),className:"input-modern",children:[(0,R.jsx)("option",{value:"active",children:"Actif"}),(0,R.jsx)("option",{value:"maintenance",children:"En maintenance"}),(0,R.jsx)("option",{value:"inactive",children:"Inactif"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Prochaine maintenance"}),(0,R.jsx)("input",{type:"date",value:B.nextMaintenance,onChange:e=>q(c(c({},B),{},{nextMaintenance:e.target.value})),className:"input-modern"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Expiration assurance"}),(0,R.jsx)("input",{type:"date",value:B.insuranceExpiry,onChange:e=>q(c(c({},B),{},{insuranceExpiry:e.target.value})),className:"input-modern"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Contr\xf4le technique"}),(0,R.jsx)("input",{type:"date",value:B.technicalControlExpiry,onChange:e=>q(c(c({},B),{},{technicalControlExpiry:e.target.value})),className:"input-modern"})]}),(0,R.jsxs)("div",{className:"md:col-span-2 lg:col-span-3",children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes"}),(0,R.jsx)("textarea",{value:B.notes,onChange:e=>q(c(c({},B),{},{notes:e.target.value})),className:"input-modern",rows:"3",placeholder:"Informations suppl\xe9mentaires..."})]})]}),b&&(0,R.jsxs)("div",{className:"p-4 mb-4 rounded-xl bg-red-50 border border-red-200 text-red-600",children:[(0,R.jsx)("div",{className:"font-bold mb-2",children:"\ud83d\udd25 Erreur Firebase"}),(0,R.jsx)("div",{children:b})]}),(0,R.jsxs)("div",{className:"flex gap-4 mt-8",children:[(0,R.jsx)("button",{onClick:()=>{f(!1),x(null)},className:"px-6 py-3 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all font-semibold text-gray-700",children:"Annuler"}),(0,R.jsx)("button",{onClick:async()=>{x(null),d(!0);try{if(console.log("Tentative d'ajout du v\xe9hicule \xe0 Firebase:",B),!B.plate.trim())throw new Error("La plaque d'immatriculation est obligatoire");if(!B.brand.trim())throw new Error("La marque est obligatoire");if(!B.model.trim())throw new Error("Le mod\xe8le est obligatoire");const e={plate:B.plate.trim().toUpperCase(),brand:B.brand.trim(),model:B.model.trim(),year:parseInt(B.year)||(new Date).getFullYear(),km:parseInt(B.km)||0,fuelType:B.fuelType,status:B.status||"active",nextMaintenance:B.nextMaintenance||null,insuranceExpiry:B.insuranceExpiry||null,technicalControlExpiry:B.technicalControlExpiry||null,notes:B.notes||"",createdAt:new Date,updatedAt:new Date},t=Lu(Wm,"vehicles"),n=await Wd(t,e);console.log("\u2705 V\xe9hicule ajout\xe9 avec succ\xe8s! ID:",n.id),q({plate:"",model:"",brand:"",year:(new Date).getFullYear(),km:0,fuelType:"Diesel",nextMaintenance:"",insuranceExpiry:"",technicalControlExpiry:"",status:"active",notes:""}),f(!1)}catch(b){console.error("\u274c Erreur lors de l'ajout du v\xe9hicule:",b);let t="Erreur lors de l'ajout du v\xe9hicule";"permission-denied"===b.code?t='Permissions insuffisantes. V\xe9rifiez les r\xe8gles Firestore (utilisez le mode "test" pour commencer).':"unavailable"===b.code?t="Service Firebase temporairement indisponible. V\xe9rifiez votre connexion internet.":"invalid-argument"===b.code?t="Donn\xe9es invalides. V\xe9rifiez les champs remplis.":b.message&&(t=b.message),x(t)}finally{d(!1)}},disabled:u||!B.plate||!B.brand||!B.model,className:"modern-button disabled:opacity-50 disabled:cursor-not-allowed",children:u?"\ud83d\udd04 Ajout en cours...":"\ud83d\ude97 Ajouter le v\xe9hicule"})]})]}),(0,R.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map((e=>{var t;const n=(e=>{if(!e)return"low";const t=new Date,n=new Date(e),r=Math.ceil((n-t)/864e5);return r<=7?"high":r<=30?"medium":"low"})(e.nextMaintenance);return(0,R.jsxs)(U,{className:"vehicle-card group",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)("div",{className:"p-3 rounded-2xl bg-gradient-to-r from-blue-500 to-purple-600 shadow-lg",children:(0,R.jsx)(w,{className:"text-white",size:20})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{className:"text-lg font-bold gradient-text",children:e.plate}),(0,R.jsxs)("p",{className:"text-gray-600 font-medium",children:[e.brand," ",e.model]})]})]}),(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)("span",{className:"status-badge ".concat(ee(e.status||"active")),children:"active"===e.status?"Actif":"maintenance"===e.status?"Maintenance":"Inactif"}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)("button",{onClick:()=>v(g===e.id?null:e.id),className:"p-2 rounded-xl bg-white/50 hover:bg-white/70 transition-all",children:(0,R.jsx)(Xm,{size:16})}),g===e.id&&(0,R.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white/90 backdrop-blur-md rounded-xl shadow-glass border border-white/20 py-2 z-10",children:[(0,R.jsxs)("button",{onClick:()=>X(e),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)(Jm,{size:14}),"Voir d\xe9tails"]}),(0,R.jsxs)("button",{onClick:()=>J(e),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)($m,{size:14}),"Modifier"]}),(0,R.jsxs)("button",{onClick:()=>$(e),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)(m,{size:14}),"Intervention"]}),(0,R.jsxs)("button",{onClick:()=>Z(e),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)(p,{size:14}),"Lavage"]}),(0,R.jsx)("hr",{className:"my-2 border-gray-200/50"}),(0,R.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce v\xe9hicule ? Cette action est irr\xe9versible."))try{await Hd(Mu(Wm,"vehicles",e)),console.log("\u2705 V\xe9hicule supprim\xe9 avec succ\xe8s"),v(null)}catch(b){console.error("\u274c Erreur lors de la suppression:",b),x("Impossible de supprimer le v\xe9hicule: "+b.message)}})(e.id),className:"w-full px-4 py-2 text-left hover:bg-red-50 transition-all flex items-center gap-3 text-sm text-red-600",children:[(0,R.jsx)(Zm,{size:14}),"Supprimer"]})]})]})]})]}),(0,R.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/50",children:[(0,R.jsxs)("span",{className:"text-gray-700 flex items-center gap-2 font-medium",children:[(0,R.jsx)(I,{size:16}),"Kilom\xe9trage"]}),(0,R.jsxs)("span",{className:"font-bold text-gray-800",children:[(null===(t=e.km)||void 0===t?void 0:t.toLocaleString())||"0"," km"]})]}),(0,R.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/50",children:[(0,R.jsxs)("span",{className:"text-gray-700 flex items-center gap-2 font-medium",children:[(0,R.jsx)(eg,{size:16}),"Carburant"]}),(0,R.jsx)("span",{className:"font-bold text-gray-800",children:e.fuelType||"Non sp\xe9cifi\xe9"})]}),(0,R.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/50",children:[(0,R.jsxs)("span",{className:"text-gray-700 flex items-center gap-2 font-medium",children:[(0,R.jsx)(y,{size:16}),"Maintenance"]}),(0,R.jsx)("div",{className:"text-right",children:(0,R.jsx)("span",{className:"font-bold text-sm px-2 py-1 rounded-full ".concat(te(n)),children:e.nextMaintenance||"Non planifi\xe9e"})})]})]}),"high"===n&&(0,R.jsx)("div",{className:"p-3 rounded-xl bg-red-50 border border-red-200 mb-4",children:(0,R.jsxs)("div",{className:"flex items-center gap-2 text-red-600",children:[(0,R.jsx)(T,{size:16}),(0,R.jsx)("span",{className:"text-sm font-semibold",children:"Maintenance urgente"})]})}),(0,R.jsxs)("div",{className:"flex gap-2",children:[(0,R.jsx)("button",{onClick:()=>X(e),className:"flex-1 p-3 rounded-xl bg-white/70 hover:bg-white transition-all font-semibold text-gray-700 text-sm",children:"D\xe9tails"}),(0,R.jsx)("button",{onClick:()=>$(e),className:"flex-1 p-3 rounded-xl bg-orange-100 hover:bg-orange-200 transition-all font-semibold text-orange-700 text-sm",children:"Intervention"}),(0,R.jsx)("button",{onClick:()=>Z(e),className:"flex-1 p-3 rounded-xl bg-blue-100 hover:bg-blue-200 transition-all font-semibold text-blue-700 text-sm",children:"Lavage"})]})]},e.id)}))}),j&&V&&(0,R.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,R.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,R.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,R.jsxs)("div",{className:"flex items-center justify-between",children:[(0,R.jsx)("h2",{className:"text-2xl font-bold gradient-text",children:"D\xe9tails du V\xe9hicule"}),(0,R.jsx)("button",{onClick:()=>A(!1),className:"p-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all",children:(0,R.jsx)(Ym,{size:20})})]})}),(0,R.jsxs)("div",{className:"p-6 space-y-6",children:[(0,R.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,R.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-r from-blue-500 to-purple-600 shadow-lg",children:(0,R.jsx)(w,{className:"text-white",size:32})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{className:"text-2xl font-bold gradient-text",children:V.plate}),(0,R.jsxs)("p",{className:"text-lg text-gray-600",children:[V.brand," ",V.model]}),(0,R.jsx)("span",{className:"status-badge ".concat(ee(V.status)),children:"active"===V.status?"Actif":"maintenance"===V.status?"En maintenance":"Inactif"})]})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsx)("h4",{className:"font-bold text-gray-800 text-lg",children:"Informations V\xe9hicule"}),(0,R.jsxs)("div",{className:"space-y-3",children:[(0,R.jsxs)("div",{className:"flex justify-between p-3 rounded-xl bg-gray-50",children:[(0,R.jsx)("span",{className:"text-gray-600",children:"Ann\xe9e"}),(0,R.jsx)("span",{className:"font-semibold",children:V.year})]}),(0,R.jsxs)("div",{className:"flex justify-between p-3 rounded-xl bg-gray-50",children:[(0,R.jsx)("span",{className:"text-gray-600",children:"Kilom\xe9trage"}),(0,R.jsxs)("span",{className:"font-semibold",children:[null===(t=V.km)||void 0===t?void 0:t.toLocaleString()," km"]})]}),(0,R.jsxs)("div",{className:"flex justify-between p-3 rounded-xl bg-gray-50",children:[(0,R.jsx)("span",{className:"text-gray-600",children:"Carburant"}),(0,R.jsx)("span",{className:"font-semibold",children:V.fuelType})]})]})]}),(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsx)("h4",{className:"font-bold text-gray-800 text-lg",children:"Maintenance & Contr\xf4les"}),(0,R.jsxs)("div",{className:"space-y-3",children:[(0,R.jsxs)("div",{className:"flex justify-between p-3 rounded-xl bg-gray-50",children:[(0,R.jsx)("span",{className:"text-gray-600",children:"Prochaine maintenance"}),(0,R.jsx)("span",{className:"font-semibold text-sm",children:V.nextMaintenance||"Non planifi\xe9e"})]}),(0,R.jsxs)("div",{className:"flex justify-between p-3 rounded-xl bg-gray-50",children:[(0,R.jsx)("span",{className:"text-gray-600",children:"Assurance expire"}),(0,R.jsx)("span",{className:"font-semibold text-sm",children:V.insuranceExpiry||"Non renseign\xe9"})]}),(0,R.jsxs)("div",{className:"flex justify-between p-3 rounded-xl bg-gray-50",children:[(0,R.jsx)("span",{className:"text-gray-600",children:"Contr\xf4le technique"}),(0,R.jsx)("span",{className:"font-semibold text-sm",children:V.technicalControlExpiry||"Non renseign\xe9"})]})]})]})]}),V.notes&&(0,R.jsxs)("div",{children:[(0,R.jsx)("h4",{className:"font-bold text-gray-800 text-lg mb-3",children:"Notes"}),(0,R.jsx)("div",{className:"p-4 rounded-xl bg-gray-50",children:(0,R.jsx)("p",{className:"text-gray-700",children:V.notes})})]}),(0,R.jsxs)("div",{className:"flex gap-4",children:[(0,R.jsxs)("button",{onClick:()=>{A(!1),J(V)},className:"flex-1 modern-button",children:[(0,R.jsx)($m,{size:20}),"Modifier"]}),(0,R.jsxs)("button",{onClick:()=>{A(!1),$(V)},className:"flex-1 p-3 rounded-xl bg-orange-100 hover:bg-orange-200 transition-all font-semibold text-orange-700",children:[(0,R.jsx)(m,{size:20,className:"inline mr-2"}),"Intervention"]})]})]})]})}),D&&V&&(0,R.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,R.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,R.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,R.jsxs)("div",{className:"flex items-center justify-between",children:[(0,R.jsx)("h2",{className:"text-2xl font-bold gradient-text",children:"Modifier le V\xe9hicule"}),(0,R.jsx)("button",{onClick:()=>P(!1),className:"p-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all",children:(0,R.jsx)(Ym,{size:20})})]})}),(0,R.jsxs)("div",{className:"p-6",children:[(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Plaque d'immatriculation"}),(0,R.jsx)("input",{type:"text",value:H.plate||"",onChange:e=>W(c(c({},H),{},{plate:e.target.value})),className:"input-modern"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Marque"}),(0,R.jsx)("input",{type:"text",value:H.brand||"",onChange:e=>W(c(c({},H),{},{brand:e.target.value})),className:"input-modern"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mod\xe8le"}),(0,R.jsx)("input",{type:"text",value:H.model||"",onChange:e=>W(c(c({},H),{},{model:e.target.value})),className:"input-modern"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ann\xe9e"}),(0,R.jsx)("input",{type:"number",value:H.year||"",onChange:e=>W(c(c({},H),{},{year:parseInt(e.target.value)})),className:"input-modern"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Kilom\xe9trage"}),(0,R.jsx)("input",{type:"number",value:H.km||"",onChange:e=>W(c(c({},H),{},{km:parseInt(e.target.value)})),className:"input-modern"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Type de carburant"}),(0,R.jsxs)("select",{value:H.fuelType||"",onChange:e=>W(c(c({},H),{},{fuelType:e.target.value})),className:"input-modern",children:[(0,R.jsx)("option",{value:"Diesel",children:"Diesel"}),(0,R.jsx)("option",{value:"Essence",children:"Essence"}),(0,R.jsx)("option",{value:"Electrique",children:"\xc9lectrique"}),(0,R.jsx)("option",{value:"Hybride",children:"Hybride"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Statut"}),(0,R.jsxs)("select",{value:H.status||"",onChange:e=>W(c(c({},H),{},{status:e.target.value})),className:"input-modern",children:[(0,R.jsx)("option",{value:"active",children:"Actif"}),(0,R.jsx)("option",{value:"maintenance",children:"En maintenance"}),(0,R.jsx)("option",{value:"inactive",children:"Inactif"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Prochaine maintenance"}),(0,R.jsx)("input",{type:"date",value:H.nextMaintenance||"",onChange:e=>W(c(c({},H),{},{nextMaintenance:e.target.value})),className:"input-modern"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Expiration assurance"}),(0,R.jsx)("input",{type:"date",value:H.insuranceExpiry||"",onChange:e=>W(c(c({},H),{},{insuranceExpiry:e.target.value})),className:"input-modern"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Contr\xf4le technique"}),(0,R.jsx)("input",{type:"date",value:H.technicalControlExpiry||"",onChange:e=>W(c(c({},H),{},{technicalControlExpiry:e.target.value})),className:"input-modern"})]}),(0,R.jsxs)("div",{className:"md:col-span-2 lg:col-span-3",children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes"}),(0,R.jsx)("textarea",{value:H.notes||"",onChange:e=>W(c(c({},H),{},{notes:e.target.value})),className:"input-modern",rows:"3"})]})]}),(0,R.jsxs)("div",{className:"flex gap-4 mt-8",children:[(0,R.jsx)("button",{onClick:()=>P(!1),className:"px-6 py-3 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all font-semibold text-gray-700",children:"Annuler"}),(0,R.jsxs)("button",{onClick:async()=>{try{d(!0);const e=Mu(Wm,"vehicles",V.id);await qd(e,c(c({},H),{},{updatedAt:new Date})),console.log("\u2705 V\xe9hicule modifi\xe9 avec succ\xe8s"),P(!1),z(null)}catch(b){console.error("\u274c Erreur lors de la modification:",b),x("Impossible de modifier le v\xe9hicule: "+b.message)}finally{d(!1)}},disabled:u,className:"modern-button disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,R.jsx)(tg,{size:20}),u?"Sauvegarde...":"Sauvegarder"]})]})]})]})}),O&&V&&(0,R.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,R.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full",children:[(0,R.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between",children:[(0,R.jsx)("h2",{className:"text-2xl font-bold gradient-text",children:"Nouvelle Intervention"}),(0,R.jsx)("button",{onClick:()=>L(!1),className:"p-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all",children:(0,R.jsx)(Ym,{size:20})})]}),(0,R.jsxs)("p",{className:"text-gray-600 mt-2",children:["V\xe9hicule: ",V.plate," - ",V.brand," ",V.model]})]}),(0,R.jsxs)("div",{className:"p-6 space-y-6",children:[(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Type d'intervention *"}),(0,R.jsxs)("select",{value:K.type,onChange:e=>G(c(c({},K),{},{type:e.target.value})),className:"input-modern",required:!0,children:[(0,R.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,R.jsx)("option",{value:"R\xe9vision",children:"R\xe9vision"}),(0,R.jsx)("option",{value:"Vidange",children:"Vidange"}),(0,R.jsx)("option",{value:"Freins",children:"Freins"}),(0,R.jsx)("option",{value:"Pneus",children:"Pneus"}),(0,R.jsx)("option",{value:"\xc9lectronique",children:"\xc9lectronique"}),(0,R.jsx)("option",{value:"Carrosserie",children:"Carrosserie"}),(0,R.jsx)("option",{value:"Autre",children:"Autre"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priorit\xe9"}),(0,R.jsxs)("select",{value:K.priority,onChange:e=>G(c(c({},K),{},{priority:e.target.value})),className:"input-modern",children:[(0,R.jsx)("option",{value:"low",children:"Faible"}),(0,R.jsx)("option",{value:"medium",children:"Moyenne"}),(0,R.jsx)("option",{value:"high",children:"Haute"}),(0,R.jsx)("option",{value:"urgent",children:"Urgente"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date pr\xe9vue"}),(0,R.jsx)("input",{type:"date",value:K.scheduledDate,onChange:e=>G(c(c({},K),{},{scheduledDate:e.target.value})),className:"input-modern",min:(new Date).toISOString().split("T")[0]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Co\xfbt estim\xe9 (\u20ac)"}),(0,R.jsx)("input",{type:"number",value:K.cost,onChange:e=>G(c(c({},K),{},{cost:e.target.value})),className:"input-modern",placeholder:"0",min:"0",step:"0.01"})]}),(0,R.jsxs)("div",{className:"md:col-span-2",children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Technicien responsable"}),(0,R.jsx)("input",{type:"text",value:K.technician,onChange:e=>G(c(c({},K),{},{technician:e.target.value})),className:"input-modern",placeholder:"Nom du technicien"})]}),(0,R.jsxs)("div",{className:"md:col-span-2",children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description d\xe9taill\xe9e"}),(0,R.jsx)("textarea",{value:K.description,onChange:e=>G(c(c({},K),{},{description:e.target.value})),className:"input-modern",rows:"4",placeholder:"D\xe9crivez l'intervention \xe0 effectuer..."})]})]}),(0,R.jsxs)("div",{className:"flex gap-4",children:[(0,R.jsx)("button",{onClick:()=>L(!1),className:"px-6 py-3 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all font-semibold text-gray-700",children:"Annuler"}),(0,R.jsxs)("button",{onClick:async()=>{try{d(!0);const e={vehicleId:V.id,vehiclePlate:V.plate,vehicleBrand:V.brand,vehicleModel:V.model,type:K.type,description:K.description,cost:parseFloat(K.cost)||0,scheduledDate:K.scheduledDate,technician:K.technician,priority:K.priority,status:"scheduled",createdAt:new Date,updatedAt:new Date},t=Lu(Wm,"interventions");await Wd(t,e);const n=Mu(Wm,"vehicles",V.id);await qd(n,{status:"maintenance",updatedAt:new Date}),console.log("\u2705 Intervention cr\xe9\xe9e avec succ\xe8s"),L(!1),z(null)}catch(b){console.error("\u274c Erreur lors de la cr\xe9ation de l'intervention:",b),x("Impossible de cr\xe9er l'intervention: "+b.message)}finally{d(!1)}},disabled:u||!K.type,className:"modern-button disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,R.jsx)(m,{size:20}),u?"Cr\xe9ation...":"Cr\xe9er l'intervention"]})]})]})]})}),M&&V&&(0,R.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,R.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full",children:[(0,R.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between",children:[(0,R.jsx)("h2",{className:"text-2xl font-bold gradient-text",children:"Nouveau Lavage"}),(0,R.jsx)("button",{onClick:()=>F(!1),className:"p-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all",children:(0,R.jsx)(Ym,{size:20})})]}),(0,R.jsxs)("p",{className:"text-gray-600 mt-2",children:["V\xe9hicule: ",V.plate," - ",V.brand," ",V.model]})]}),(0,R.jsxs)("div",{className:"p-6 space-y-6",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Type de lavage"}),(0,R.jsxs)("select",{value:Q.type,onChange:e=>Y(c(c({},Q),{},{type:e.target.value})),className:"input-modern",children:[(0,R.jsx)("option",{value:"exterior",children:"Ext\xe9rieur seulement"}),(0,R.jsx)("option",{value:"interior",children:"Int\xe9rieur seulement"}),(0,R.jsx)("option",{value:"complete",children:"Complet (int\xe9rieur + ext\xe9rieur)"}),(0,R.jsx)("option",{value:"premium",children:"Premium (complet + cire)"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Co\xfbt (\u20ac)"}),(0,R.jsx)("input",{type:"number",value:Q.cost,onChange:e=>Y(c(c({},Q),{},{cost:e.target.value})),className:"input-modern",placeholder:"0",min:"0",step:"0.01"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes"}),(0,R.jsx)("textarea",{value:Q.notes,onChange:e=>Y(c(c({},Q),{},{notes:e.target.value})),className:"input-modern",rows:"3",placeholder:"Observations particuli\xe8res..."})]}),(0,R.jsxs)("div",{className:"flex gap-4",children:[(0,R.jsx)("button",{onClick:()=>F(!1),className:"px-6 py-3 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all font-semibold text-gray-700",children:"Annuler"}),(0,R.jsxs)("button",{onClick:async()=>{try{d(!0);const e={vehicleId:V.id,vehiclePlate:V.plate,vehicleBrand:V.brand,vehicleModel:V.model,type:Q.type,cost:parseFloat(Q.cost)||0,notes:Q.notes,date:(new Date).toISOString().split("T")[0],status:"completed",createdAt:new Date,updatedAt:new Date},t=Lu(Wm,"washing");await Wd(t,e),console.log("\u2705 Lavage cr\xe9\xe9 avec succ\xe8s"),F(!1),z(null)}catch(b){console.error("\u274c Erreur lors de la cr\xe9ation du lavage:",b),x("Impossible de cr\xe9er le lavage: "+b.message)}finally{d(!1)}},disabled:u,className:"modern-button disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,R.jsx)(p,{size:20}),u?"Enregistrement...":"Enregistrer le lavage"]})]})]})]})}),0===o.length&&!u&&(0,R.jsxs)(U,{className:"text-center p-12",children:[(0,R.jsx)(w,{className:"mx-auto text-gray-400 mb-4",size:48}),(0,R.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:N||"all"!==_?"Aucun v\xe9hicule trouv\xe9":"Aucun v\xe9hicule dans la flotte"}),(0,R.jsx)("p",{className:"text-gray-600 mb-6",children:N||"all"!==_?"Essayez de modifier vos crit\xe8res de recherche ou de filtrage.":"Commencez par ajouter votre premier v\xe9hicule \xe0 la flotte."}),!N&&"all"===_&&(0,R.jsxs)("button",{onClick:()=>f(!0),className:"modern-button",children:[(0,R.jsx)(Qm,{size:20}),"Ajouter le premier v\xe9hicule"]})]}),u&&(0,R.jsxs)(U,{className:"text-center p-12",children:[(0,R.jsx)("div",{className:"animate-spin mx-auto mb-4 w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"}),(0,R.jsx)("p",{className:"text-gray-600",children:"\ud83d\udd25 Connexion \xe0 Firebase..."})]}),g&&(0,R.jsx)("div",{className:"fixed inset-0 z-5",onClick:()=>v(null)})]})},rg=f("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),sg=f("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ig=e=>{let{data:t,onRefresh:n}=e;const[s,i]=(0,r.useState)([]),[a,o]=(0,r.useState)([]),[l,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[x,w]=(0,r.useState)(null),[N,E]=(0,r.useState)(null),[_,k]=(0,r.useState)(""),[S,C]=(0,r.useState)("all"),[T,I]=(0,r.useState)("all"),[j,A]=(0,r.useState)("scheduledDate"),[D,P]=(0,r.useState)(!1),[O,L]=(0,r.useState)(!1),[M,F]=(0,r.useState)(null),[V,z]=(0,r.useState)({}),[B,q]=(0,r.useState)({vehicleId:"",type:"",description:"",urgency:"normal",scheduledDate:"",estimatedCost:"",technician:"",notes:""});(0,r.useEffect)((()=>{(()=>{try{h(!0),console.log("\ud83d\udd25 Chargement des interventions depuis Firebase...");const e=Lu(Wm,"interventions"),t=Kd(_d(e,Td("createdAt","desc")),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));console.log("\u2705 Interventions charg\xe9es:",t),i(t),E(null)}),(e=>{console.error("\u274c Erreur lors du chargement des interventions:",e),E("Impossible de charger les interventions: "+e.message)})),n=Kd(Lu(Wm,"vehicles"),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));console.log("\u2705 V\xe9hicules charg\xe9s:",t),o(t),h(!1)}),(e=>{console.error("\u274c Erreur lors du chargement des v\xe9hicules:",e),h(!1)}));return()=>{console.log("\ud83e\uddf9 Nettoyage des listeners Firebase"),t(),n()}}catch(N){console.error("\u274c Erreur lors de l'initialisation Firebase:",N),E("Erreur de connexion \xe0 Firebase: "+N.message),h(!1)}})()}),[]),(0,r.useEffect)((()=>{let e=[...s];_&&_.trim()&&(e=e.filter((e=>{const t=_.toLowerCase();return(e.vehiclePlate||"").toLowerCase().includes(t)||(e.type||"").toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t)||(e.technician||"").toLowerCase().includes(t)}))),"all"!==S&&(e=e.filter((e=>e.status===S))),"all"!==T&&(e=e.filter((e=>e.urgency===T))),e.sort(((e,t)=>{switch(j){case"scheduledDate":const n=e.scheduledDate?new Date(e.scheduledDate):new Date("9999-12-31"),r=t.scheduledDate?new Date(t.scheduledDate):new Date("9999-12-31");return n.getTime()-r.getTime();case"urgency":const s={critical:4,high:3,normal:2,low:1};return(s[t.urgency]||0)-(s[e.urgency]||0);case"vehiclePlate":return(e.vehiclePlate||"").localeCompare(t.vehiclePlate||"");default:return 0}})),u(e)}),[s,_,S,T,j]);const H=e=>{F(e),P(!0),w(null)},W=async(e,t)=>{try{const n=Mu(Wm,"interventions",e);await qd(n,c({status:t,updatedAt:new Date},"completed"===t&&{endDate:new Date})),console.log("\u2705 Statut mis \xe0 jour:",t),w(null)}catch(N){console.error("\u274c Erreur lors du changement de statut:",N),E("Impossible de changer le statut: "+N.message)}},K=e=>{switch(e){case"pending":return"bg-orange-100 text-orange-800 border-orange-200";case"in-progress":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},G=e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"normal":return"bg-blue-100 text-blue-800 border-blue-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Q=e=>{switch(e){case"pending":default:return(0,R.jsx)(g,{size:16});case"in-progress":return(0,R.jsx)(m,{size:16});case"completed":return(0,R.jsx)(v,{size:16});case"cancelled":return(0,R.jsx)(Ym,{size:16})}},Y=e=>{switch(e){case"pending":return"En attente";case"in-progress":return"En cours";case"completed":return"Termin\xe9e";case"cancelled":return"Annul\xe9e";default:return e}},X=e=>{switch(e){case"critical":return"Critique";case"high":return"Haute";case"normal":return"Normale";case"low":return"Faible";default:return e}};return(0,R.jsxs)("div",{className:"space-y-6",children:[(0,R.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 lg:items-center lg:justify-between",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("h2",{className:"text-2xl font-bold gradient-text",children:"Interventions Techniques"}),(0,R.jsxs)("p",{className:"text-gray-600 font-medium",children:[l.length," intervention",l.length>1?"s":"",("all"!==S||"all"!==T)&&" (filtr\xe9es)",d&&" - Chargement..."]})]}),(0,R.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(Gm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,R.jsx)("input",{type:"text",placeholder:"Rechercher une intervention...",value:_,onChange:e=>k(e.target.value),className:"input-modern pl-10 w-full sm:w-64"})]}),(0,R.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"input-modern",children:[(0,R.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,R.jsx)("option",{value:"pending",children:"En attente"}),(0,R.jsx)("option",{value:"in-progress",children:"En cours"}),(0,R.jsx)("option",{value:"completed",children:"Termin\xe9es"}),(0,R.jsx)("option",{value:"cancelled",children:"Annul\xe9es"})]}),(0,R.jsxs)("select",{value:T,onChange:e=>I(e.target.value),className:"input-modern",children:[(0,R.jsx)("option",{value:"all",children:"Toutes urgences"}),(0,R.jsx)("option",{value:"critical",children:"Critique"}),(0,R.jsx)("option",{value:"high",children:"Haute"}),(0,R.jsx)("option",{value:"normal",children:"Normale"}),(0,R.jsx)("option",{value:"low",children:"Faible"})]}),(0,R.jsxs)("select",{value:j,onChange:e=>A(e.target.value),className:"input-modern",children:[(0,R.jsx)("option",{value:"scheduledDate",children:"Trier par date"}),(0,R.jsx)("option",{value:"urgency",children:"Trier par urgence"}),(0,R.jsx)("option",{value:"vehiclePlate",children:"Trier par v\xe9hicule"})]}),(0,R.jsxs)("button",{onClick:()=>p(!0),className:"modern-button whitespace-nowrap",disabled:d,children:[(0,R.jsx)(Qm,{size:20}),"Nouvelle intervention"]})]})]}),N&&!f&&(0,R.jsxs)("div",{className:"p-4 rounded-xl bg-red-50 border border-red-200 text-red-600",children:[(0,R.jsx)("div",{className:"font-bold mb-2",children:"\ud83d\udd25 Erreur Firebase"}),(0,R.jsx)("div",{children:N})]}),f&&(0,R.jsxs)(U,{children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,R.jsx)("h3",{className:"text-xl font-bold gradient-text",children:"Nouvelle Intervention"}),(0,R.jsx)("button",{onClick:()=>{p(!1),E(null)},className:"p-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all",children:(0,R.jsx)(Ym,{size:20})})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"V\xe9hicule *"}),(0,R.jsxs)("select",{value:B.vehicleId,onChange:e=>q(c(c({},B),{},{vehicleId:e.target.value})),className:"input-modern",required:!0,children:[(0,R.jsx)("option",{value:"",children:"S\xe9lectionner un v\xe9hicule"}),a.map((e=>(0,R.jsxs)("option",{value:e.id,children:[e.plate," - ",e.brand," ",e.model]},e.id)))]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Type d'intervention *"}),(0,R.jsxs)("select",{value:B.type,onChange:e=>q(c(c({},B),{},{type:e.target.value})),className:"input-modern",required:!0,children:[(0,R.jsx)("option",{value:"",children:"S\xe9lectionner un type"}),(0,R.jsx)("option",{value:"maintenance",children:"Maintenance pr\xe9ventive"}),(0,R.jsx)("option",{value:"reparation",children:"R\xe9paration"}),(0,R.jsx)("option",{value:"vidange",children:"Vidange"}),(0,R.jsx)("option",{value:"pneus",children:"Changement pneus"}),(0,R.jsx)("option",{value:"freins",children:"Freins"}),(0,R.jsx)("option",{value:"climatisation",children:"Climatisation"}),(0,R.jsx)("option",{value:"carrosserie",children:"Carrosserie"}),(0,R.jsx)("option",{value:"controle_technique",children:"Contr\xf4le technique"}),(0,R.jsx)("option",{value:"autre",children:"Autre"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Urgence"}),(0,R.jsxs)("select",{value:B.urgency,onChange:e=>q(c(c({},B),{},{urgency:e.target.value})),className:"input-modern",children:[(0,R.jsx)("option",{value:"low",children:"Faible"}),(0,R.jsx)("option",{value:"normal",children:"Normale"}),(0,R.jsx)("option",{value:"high",children:"Haute"}),(0,R.jsx)("option",{value:"critical",children:"Critique"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date programm\xe9e"}),(0,R.jsx)("input",{type:"date",value:B.scheduledDate,onChange:e=>q(c(c({},B),{},{scheduledDate:e.target.value})),className:"input-modern"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Co\xfbt estim\xe9 (\u20ac)"}),(0,R.jsx)("input",{type:"number",value:B.estimatedCost,onChange:e=>q(c(c({},B),{},{estimatedCost:e.target.value})),className:"input-modern",min:"0",step:"0.01",placeholder:"0.00"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Technicien assign\xe9"}),(0,R.jsx)("input",{type:"text",value:B.technician,onChange:e=>q(c(c({},B),{},{technician:e.target.value})),className:"input-modern",placeholder:"Nom du technicien"})]}),(0,R.jsxs)("div",{className:"md:col-span-2",children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description d\xe9taill\xe9e *"}),(0,R.jsx)("textarea",{value:B.description,onChange:e=>q(c(c({},B),{},{description:e.target.value})),className:"input-modern",rows:"4",placeholder:"D\xe9crivez le probl\xe8me ou l'intervention \xe0 effectuer...",required:!0})]}),(0,R.jsxs)("div",{className:"md:col-span-2",children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes additionnelles"}),(0,R.jsx)("textarea",{value:B.notes,onChange:e=>q(c(c({},B),{},{notes:e.target.value})),className:"input-modern",rows:"3",placeholder:"Informations compl\xe9mentaires..."})]})]}),N&&(0,R.jsxs)("div",{className:"p-4 mb-4 rounded-xl bg-red-50 border border-red-200 text-red-600",children:[(0,R.jsx)("div",{className:"font-bold mb-2",children:"\ud83d\udd25 Erreur"}),(0,R.jsx)("div",{children:N})]}),(0,R.jsxs)("div",{className:"flex gap-4 mt-8",children:[(0,R.jsx)("button",{onClick:()=>{p(!1),E(null)},className:"px-6 py-3 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all font-semibold text-gray-700",children:"Annuler"}),(0,R.jsx)("button",{onClick:async()=>{E(null),h(!0);try{if(console.log("\ud83d\udd25 Ajout intervention \xe0 Firebase:",B),!B.vehicleId)throw new Error("Veuillez s\xe9lectionner un v\xe9hicule");if(!B.type.trim())throw new Error("Le type d'intervention est obligatoire");if(!B.description.trim())throw new Error("La description est obligatoire");const e=a.find((e=>e.id===B.vehicleId));if(!e)throw new Error("V\xe9hicule introuvable");const t={vehicleId:B.vehicleId,vehiclePlate:e.plate,vehicleBrand:e.brand,vehicleModel:e.model,type:B.type.trim(),description:B.description.trim(),urgency:B.urgency,scheduledDate:B.scheduledDate||null,estimatedCost:parseFloat(B.estimatedCost)||0,technician:B.technician.trim(),notes:B.notes.trim(),status:"pending",createdAt:new Date,updatedAt:new Date},n=Lu(Wm,"interventions"),r=await Wd(n,t);if(console.log("\u2705 Intervention ajout\xe9e avec succ\xe8s! ID:",r.id),e){const t=Mu(Wm,"vehicles",e.id);await qd(t,{status:"maintenance",updatedAt:new Date}),console.log("\u2705 Statut v\xe9hicule mis \xe0 jour: maintenance")}q({vehicleId:"",type:"",description:"",urgency:"normal",scheduledDate:"",estimatedCost:"",technician:"",notes:""}),p(!1)}catch(N){console.error("\u274c Erreur lors de l'ajout de l'intervention:",N),E(N.message||"Erreur lors de l'ajout de l'intervention")}finally{h(!1)}},disabled:d||!B.vehicleId||!B.type||!B.description,className:"modern-button disabled:opacity-50 disabled:cursor-not-allowed",children:d?"\ud83d\udd04 Cr\xe9ation...":"\ud83d\udd27 Cr\xe9er l'intervention"})]})]}),(0,R.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:l.map((e=>(0,R.jsxs)(U,{className:"intervention-card group",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)("div",{className:"p-3 rounded-2xl bg-gradient-to-r from-orange-500 to-red-600 shadow-lg",children:(0,R.jsx)(m,{className:"text-white",size:20})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{className:"text-lg font-bold gradient-text",children:e.type}),(0,R.jsxs)("p",{className:"text-gray-600 font-medium",children:[e.vehiclePlate," - ",e.vehicleBrand," ",e.vehicleModel]})]})]}),(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsxs)("span",{className:"status-badge ".concat(K(e.status)),children:[Q(e.status),Y(e.status)]}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)("button",{onClick:()=>w(x===e.id?null:e.id),className:"p-2 rounded-xl bg-white/50 hover:bg-white/70 transition-all",children:(0,R.jsx)(b,{size:16})}),x===e.id&&(0,R.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white/90 backdrop-blur-md rounded-xl shadow-glass border border-white/20 py-2 z-10",children:[(0,R.jsxs)("button",{onClick:()=>H(e),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)(Jm,{size:14}),"Voir d\xe9tails"]}),(0,R.jsxs)("button",{onClick:()=>(e=>{F(e),z(c({},e)),L(!0),w(null)})(e),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)($m,{size:14}),"Modifier"]}),"pending"===e.status&&(0,R.jsxs)("button",{onClick:()=>W(e.id,"in-progress"),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)(m,{size:14}),"D\xe9marrer"]}),"in-progress"===e.status&&(0,R.jsxs)("button",{onClick:()=>W(e.id,"completed"),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)(v,{size:14}),"Terminer"]}),(0,R.jsx)("hr",{className:"my-2 border-gray-200/50"}),(0,R.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette intervention ?"))try{await Hd(Mu(Wm,"interventions",e)),console.log("\u2705 Intervention supprim\xe9e avec succ\xe8s"),w(null)}catch(N){console.error("\u274c Erreur lors de la suppression:",N),E("Impossible de supprimer l'intervention: "+N.message)}})(e.id),className:"w-full px-4 py-2 text-left hover:bg-red-50 transition-all flex items-center gap-3 text-sm text-red-600",children:[(0,R.jsx)(Zm,{size:14}),"Supprimer"]})]})]})]})]}),(0,R.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/50",children:[(0,R.jsxs)("span",{className:"text-gray-700 flex items-center gap-2 font-medium",children:[(0,R.jsx)(b,{size:16}),"Urgence"]}),(0,R.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat(G(e.urgency)),children:X(e.urgency)})]}),(0,R.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/50",children:[(0,R.jsxs)("span",{className:"text-gray-700 flex items-center gap-2 font-medium",children:[(0,R.jsx)(y,{size:16}),"Programm\xe9e"]}),(0,R.jsx)("span",{className:"font-bold text-gray-800",children:e.scheduledDate?new Date(e.scheduledDate).toLocaleDateString():"Non planifi\xe9e"})]}),(0,R.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/50",children:[(0,R.jsxs)("span",{className:"text-gray-700 flex items-center gap-2 font-medium",children:[(0,R.jsx)(rg,{size:16}),"Co\xfbt estim\xe9"]}),(0,R.jsx)("span",{className:"font-bold text-gray-800",children:e.estimatedCost?"".concat(e.estimatedCost,"\u20ac"):"Non estim\xe9"})]}),e.technician&&(0,R.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/50",children:[(0,R.jsxs)("span",{className:"text-gray-700 flex items-center gap-2 font-medium",children:[(0,R.jsx)(sg,{size:16}),"Technicien"]}),(0,R.jsx)("span",{className:"font-bold text-gray-800",children:e.technician})]})]}),(0,R.jsx)("div",{className:"p-3 rounded-xl bg-gray-50 mb-4",children:(0,R.jsx)("p",{className:"text-gray-700 text-sm",children:e.description})}),(0,R.jsxs)("div",{className:"flex gap-2",children:[(0,R.jsx)("button",{onClick:()=>H(e),className:"flex-1 p-3 rounded-xl bg-white/70 hover:bg-white transition-all font-semibold text-gray-700 text-sm",children:"D\xe9tails"}),"pending"===e.status&&(0,R.jsx)("button",{onClick:()=>W(e.id,"in-progress"),className:"flex-1 p-3 rounded-xl bg-blue-100 hover:bg-blue-200 transition-all font-semibold text-blue-700 text-sm",children:"D\xe9marrer"}),"in-progress"===e.status&&(0,R.jsx)("button",{onClick:()=>W(e.id,"completed"),className:"flex-1 p-3 rounded-xl bg-green-100 hover:bg-green-200 transition-all font-semibold text-green-700 text-sm",children:"Terminer"})]})]},e.id)))}),0===l.length&&!d&&(0,R.jsxs)(U,{className:"text-center p-12",children:[(0,R.jsx)(m,{className:"mx-auto text-gray-400 mb-4",size:48}),(0,R.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:_||"all"!==S||"all"!==T?"Aucune intervention trouv\xe9e":"Aucune intervention programm\xe9e"}),(0,R.jsx)("p",{className:"text-gray-600 mb-6",children:_||"all"!==S||"all"!==T?"Essayez de modifier vos crit\xe8res de recherche ou de filtrage.":"Commencez par programmer votre premi\xe8re intervention."}),!_&&"all"===S&&"all"===T&&(0,R.jsxs)("button",{onClick:()=>p(!0),className:"modern-button",children:[(0,R.jsx)(Qm,{size:20}),"Programmer une intervention"]})]}),d&&(0,R.jsxs)(U,{className:"text-center p-12",children:[(0,R.jsx)("div",{className:"animate-spin mx-auto mb-4 w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full"}),(0,R.jsx)("p",{className:"text-gray-600",children:"\ud83d\udd25 Connexion \xe0 Firebase..."})]}),x&&(0,R.jsx)("div",{className:"fixed inset-0 z-5",onClick:()=>w(null)})]})},ag=f("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),og=f("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),lg=f("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),cg=e=>{let{data:t,onRefresh:n}=e;const[s,i]=(0,r.useState)([]),[a,o]=(0,r.useState)([]),[l,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!1),[f,m]=(0,r.useState)(!1),[w,E]=(0,r.useState)(null),[_,k]=(0,r.useState)(""),[S,C]=(0,r.useState)("all"),[T,I]=(0,r.useState)("all"),[j,A]=(0,r.useState)("date"),[D,P]=(0,r.useState)(null),[O,L]=(0,r.useState)(!1),[M,F]=(0,r.useState)(!1),[V,z]=(0,r.useState)(!1),[B,q]=(0,r.useState)(null),[H,W]=(0,r.useState)({}),[K,G]=(0,r.useState)({vehicleId:"",type:"",description:"",cost:"",date:(new Date).toISOString().slice(0,16),employeeId:"",duration:"",location:"onsite",notes:"",customerSatisfaction:5,photosBefore:[],photosAfter:[]}),Q=[{id:"complete",label:"Lavage Complet",description:"Ext\xe9rieur + Int\xe9rieur + Aspirateur",price:45,duration:120,color:"from-blue-500 to-cyan-500",icon:"\ud83d\ude97"},{id:"interior",label:"Int\xe9rieur Seulement",description:"Nettoyage int\xe9rieur + Aspirateur",price:25,duration:60,color:"from-green-500 to-emerald-500",icon:"\ud83e\ude91"},{id:"exterior",label:"Ext\xe9rieur Seulement",description:"Lavage ext\xe9rieur + S\xe9chage",price:20,duration:45,color:"from-orange-500 to-red-500",icon:"\ud83e\uddfd"},{id:"premium",label:"Premium + Cire",description:"Complet + Cire + Protection",price:65,duration:180,color:"from-purple-500 to-pink-500",icon:"\u2728"},{id:"express",label:"Express",description:"Lavage rapide ext\xe9rieur",price:15,duration:30,color:"from-yellow-500 to-orange-500",icon:"\u26a1"},{id:"deep",label:"Nettoyage Approfondi",description:"D\xe9tailing complet + D\xe9sinfection",price:85,duration:240,color:"from-indigo-500 to-purple-500",icon:"\ud83d\udd2c"}],Y=[{id:1,name:"Sophie Rousseau",speciality:"Lavage premium",avatar:"\ud83d\udc69\u200d\ud83d\udcbc"},{id:2,name:"Kevin Dubois",speciality:"Nettoyage int\xe9rieur",avatar:"\ud83d\udc68\u200d\ud83d\udd27"},{id:3,name:"Marie Leblanc",speciality:"D\xe9tailing",avatar:"\ud83d\udc69\u200d\ud83c\udfa8"},{id:4,name:"Thomas Moreau",speciality:"Lavage express",avatar:"\ud83d\udc68\u200d\ud83d\udcbc"},{id:5,name:"Julie Martin",speciality:"Carrosserie",avatar:"\ud83d\udc69\u200d\ud83d\udd2c"}];(0,r.useEffect)((()=>{(()=>{try{h(!0),console.log("\ud83d\udd25 Chargement des lavages depuis Firebase...");const e=Lu(Wm,"washing"),t=Kd(_d(e,Td("createdAt","desc")),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));console.log("\u2705 Lavages charg\xe9s:",t),i(t),P(null)}),(e=>{console.error("\u274c Erreur lors du chargement des lavages:",e),P("Impossible de charger les lavages: "+e.message)})),n=Kd(Lu(Wm,"vehicles"),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));console.log("\u2705 V\xe9hicules charg\xe9s:",t),o(t),h(!1)}),(e=>{console.error("\u274c Erreur lors du chargement des v\xe9hicules:",e),h(!1)}));return()=>{console.log("\ud83e\uddf9 Nettoyage des listeners Firebase"),t(),n()}}catch(D){console.error("\u274c Erreur lors de l'initialisation Firebase:",D),P("Erreur de connexion \xe0 Firebase: "+D.message),h(!1)}})()}),[]),(0,r.useEffect)((()=>{let e=[...s];_&&_.trim()&&(e=e.filter((e=>{const t=_.toLowerCase();return(e.vehiclePlate||"").toLowerCase().includes(t)||(e.type||"").toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t)||(e.notes||"").toLowerCase().includes(t)}))),"all"!==S&&(e=e.filter((e=>e.status===S))),"all"!==T&&(e=e.filter((e=>e.type===T))),e.sort(((e,t)=>{switch(j){case"date":const n=e.scheduledDate?new Date(e.scheduledDate):new Date;return(t.scheduledDate?new Date(t.scheduledDate):new Date).getTime()-n.getTime();case"cost":return(t.cost||0)-(e.cost||0);case"vehicle":return(e.vehiclePlate||"").localeCompare(t.vehiclePlate||"");case"satisfaction":return(t.customerSatisfaction||0)-(e.customerSatisfaction||0);default:return 0}})),u(e)}),[s,_,S,T,j]);const X=e=>{q(e),L(!0),E(null)},J=e=>{q(e),z(!0),E(null)},$=async(e,t)=>{try{const n=Mu(Wm,"washing",e),r={status:t,updatedAt:new Date};"completed"===t&&(r.completedAt=new Date),await qd(n,r),console.log("\u2705 Statut mis \xe0 jour:",t),E(null)}catch(D){console.error("\u274c Erreur lors du changement de statut:",D),P("Impossible de changer le statut: "+D.message)}},Z=e=>{const t=Q.find((t=>t.id===e));G(c(c({},K),{},{type:e,cost:(null===t||void 0===t?void 0:t.price)||"",duration:(null===t||void 0===t?void 0:t.duration)||"",description:(null===t||void 0===t?void 0:t.description)||""}))},ee=e=>{switch(e){case"completed":return"text-green-600 bg-green-100 border-green-200";case"in-progress":return"text-blue-600 bg-blue-100 border-blue-200";case"scheduled":return"text-orange-600 bg-orange-100 border-orange-200";case"cancelled":return"text-red-600 bg-red-100 border-red-200";default:return"text-gray-600 bg-gray-100 border-gray-200"}},te=e=>{switch(e){case"completed":return"Termin\xe9";case"in-progress":return"En cours";case"scheduled":return"Planifi\xe9";case"cancelled":return"Annul\xe9";default:return"Inconnu"}},ne=e=>Q.find((t=>t.id===e))||Q[0],re=(e,t)=>{const n=Array.from(e.target.files).map((e=>URL.createObjectURL(e)));G(c(c({},K),{},"before"===t?{photosBefore:[...K.photosBefore||[],...n]}:{photosAfter:[...K.photosAfter||[],...n]}))};return(0,R.jsxs)("div",{className:"space-y-6",children:[(0,R.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 lg:items-center lg:justify-between",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("h2",{className:"text-2xl font-bold gradient-text",children:"Services de Lavage"}),(0,R.jsxs)("p",{className:"text-gray-600 font-medium",children:[l.length," service",l.length>1?"s":""," de lavage",("all"!==S||"all"!==T)&&" (filtr\xe9s)",d&&" - Chargement..."]})]}),(0,R.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(Gm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,R.jsx)("input",{type:"text",placeholder:"Rechercher un lavage...",value:_,onChange:e=>k(e.target.value),className:"input-modern pl-10 w-full sm:w-64"})]}),(0,R.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"input-modern",children:[(0,R.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,R.jsx)("option",{value:"scheduled",children:"Planifi\xe9s"}),(0,R.jsx)("option",{value:"in-progress",children:"En cours"}),(0,R.jsx)("option",{value:"completed",children:"Termin\xe9s"}),(0,R.jsx)("option",{value:"cancelled",children:"Annul\xe9s"})]}),(0,R.jsxs)("select",{value:T,onChange:e=>I(e.target.value),className:"input-modern",children:[(0,R.jsx)("option",{value:"all",children:"Tous les types"}),Q.map((e=>(0,R.jsxs)("option",{value:e.id,children:[e.icon," ",e.label]},e.id)))]}),(0,R.jsxs)("select",{value:j,onChange:e=>A(e.target.value),className:"input-modern",children:[(0,R.jsx)("option",{value:"date",children:"Trier par date"}),(0,R.jsx)("option",{value:"cost",children:"Trier par prix"}),(0,R.jsx)("option",{value:"vehicle",children:"Trier par v\xe9hicule"}),(0,R.jsx)("option",{value:"satisfaction",children:"Trier par satisfaction"})]}),(0,R.jsxs)("button",{onClick:()=>m(!0),className:"modern-button whitespace-nowrap",disabled:d,children:[(0,R.jsx)(Qm,{size:20}),"Nouveau lavage"]})]})]}),D&&!f&&(0,R.jsxs)("div",{className:"p-4 rounded-xl bg-red-50 border border-red-200 text-red-600",children:[(0,R.jsx)("div",{className:"font-bold mb-2",children:"\ud83d\udd25 Erreur Firebase"}),(0,R.jsx)("div",{children:D})]}),(0,R.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:Q.map((e=>(0,R.jsxs)(U,{interactive:!0,className:"text-center p-6 cursor-pointer group",onClick:()=>Z(e.id),children:[(0,R.jsx)("div",{className:"p-4 rounded-3xl bg-gradient-to-r ".concat(e.color," inline-block mb-4 group-hover:scale-110 transition-transform shadow-lg"),children:(0,R.jsx)("span",{className:"text-2xl",children:e.icon})}),(0,R.jsx)("h3",{className:"font-bold text-sm gradient-text mb-2",children:e.label}),(0,R.jsxs)("p",{className:"text-2xl font-bold text-gray-800 mb-1",children:[e.price,"\u20ac"]}),(0,R.jsxs)("p",{className:"text-gray-600 text-xs font-medium",children:[e.duration,"min"]}),(0,R.jsx)("p",{className:"text-gray-500 text-xs mt-2 leading-tight",children:e.description})]},e.id)))}),f&&(0,R.jsxs)(U,{children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,R.jsx)("h3",{className:"text-xl font-bold gradient-text",children:"Nouveau Service de Lavage"}),(0,R.jsx)("button",{onClick:()=>{m(!1),P(null)},className:"p-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all",children:(0,R.jsx)(Ym,{size:20})})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"V\xe9hicule *"}),(0,R.jsxs)("select",{value:K.vehicleId,onChange:e=>G(c(c({},K),{},{vehicleId:e.target.value})),className:"input-modern",required:!0,children:[(0,R.jsx)("option",{value:"",children:"S\xe9lectionner un v\xe9hicule"}),a.map((e=>(0,R.jsxs)("option",{value:e.id,children:[e.plate," - ",e.brand," ",e.model]},e.id)))]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Type de service *"}),(0,R.jsxs)("select",{value:K.type,onChange:e=>Z(e.target.value),className:"input-modern",required:!0,children:[(0,R.jsx)("option",{value:"",children:"Choisir le service"}),Q.map((e=>(0,R.jsxs)("option",{value:e.id,children:[e.icon," ",e.label," - ",e.price,"\u20ac"]},e.id)))]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date et heure *"}),(0,R.jsx)("input",{type:"datetime-local",value:K.date,onChange:e=>G(c(c({},K),{},{date:e.target.value})),className:"input-modern",required:!0})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Employ\xe9 assign\xe9"}),(0,R.jsxs)("select",{value:K.employeeId,onChange:e=>G(c(c({},K),{},{employeeId:e.target.value})),className:"input-modern",children:[(0,R.jsx)("option",{value:"",children:"S\xe9lectionner un employ\xe9"}),Y.map((e=>(0,R.jsxs)("option",{value:e.id,children:[e.avatar," ",e.name," - ",e.speciality]},e.id)))]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Prix (\u20ac)"}),(0,R.jsx)("input",{type:"number",value:K.cost,onChange:e=>G(c(c({},K),{},{cost:e.target.value})),className:"input-modern",placeholder:"0",min:"0",step:"0.01"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Dur\xe9e estim\xe9e (minutes)"}),(0,R.jsx)("input",{type:"number",value:K.duration,onChange:e=>G(c(c({},K),{},{duration:e.target.value})),className:"input-modern",placeholder:"60",min:"0"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Lieu du lavage"}),(0,R.jsxs)("select",{value:K.location,onChange:e=>G(c(c({},K),{},{location:e.target.value})),className:"input-modern",children:[(0,R.jsx)("option",{value:"onsite",children:"Sur site"}),(0,R.jsx)("option",{value:"external",children:"Prestataire externe"}),(0,R.jsx)("option",{value:"garage",children:"Garage partenaire"}),(0,R.jsx)("option",{value:"mobile",children:"Service mobile"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Satisfaction attendue"}),(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map((e=>(0,R.jsx)("button",{type:"button",onClick:()=>G(c(c({},K),{},{customerSatisfaction:e})),className:"p-1 rounded-lg transition-all ".concat(e<=K.customerSatisfaction?"text-yellow-400":"text-gray-300 hover:text-yellow-200"),children:(0,R.jsx)(ag,{size:24,className:e<=K.customerSatisfaction?"fill-current":""})},e))),(0,R.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["(",K.customerSatisfaction,"/5)"]})]})]}),(0,R.jsxs)("div",{className:"md:col-span-2",children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description du service"}),(0,R.jsx)("textarea",{value:K.description,onChange:e=>G(c(c({},K),{},{description:e.target.value})),className:"input-modern",rows:"2",placeholder:"D\xe9tails du service de lavage..."})]}),(0,R.jsxs)("div",{className:"md:col-span-2",children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes sp\xe9ciales"}),(0,R.jsx)("textarea",{value:K.notes,onChange:e=>G(c(c({},K),{},{notes:e.target.value})),className:"input-modern",rows:"2",placeholder:"Instructions particuli\xe8res, produits sp\xe9ciaux..."})]})]}),(0,R.jsxs)("div",{className:"mb-8",children:[(0,R.jsx)("h4",{className:"text-lg font-bold mb-4 gradient-text",children:"Photos Avant/Apr\xe8s (Optionnel)"}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Photos AVANT"}),(0,R.jsxs)("div",{className:"glass-card p-6 text-center cursor-pointer hover:scale-105 transition-all border-2 border-dashed border-gray-300",children:[(0,R.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>re(e,"before"),className:"hidden",id:"photos-before"}),(0,R.jsxs)("label",{htmlFor:"photos-before",className:"cursor-pointer",children:[(0,R.jsx)(og,{className:"mx-auto text-gray-400 mb-4",size:48}),(0,R.jsx)("p",{className:"text-gray-700 font-semibold mb-2",children:"Photos AVANT"}),(0,R.jsx)("p",{className:"text-gray-500 text-sm",children:"Cliquez pour ajouter des photos"})]}),K.photosBefore&&K.photosBefore.length>0&&(0,R.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:K.photosBefore.map(((e,t)=>(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)("img",{src:e,alt:"Avant ".concat(t+1),className:"w-16 h-16 object-cover rounded-lg"}),(0,R.jsx)("button",{onClick:()=>{const e=K.photosBefore.filter(((e,n)=>n!==t));G(c(c({},K),{},{photosBefore:e}))},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"\xd7"})]},t)))})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Photos APR\xc8S"}),(0,R.jsxs)("div",{className:"glass-card p-6 text-center cursor-pointer hover:scale-105 transition-all border-2 border-dashed border-gray-300",children:[(0,R.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>re(e,"after"),className:"hidden",id:"photos-after"}),(0,R.jsxs)("label",{htmlFor:"photos-after",className:"cursor-pointer",children:[(0,R.jsx)(og,{className:"mx-auto text-gray-400 mb-4",size:48}),(0,R.jsx)("p",{className:"text-gray-700 font-semibold mb-2",children:"Photos APR\xc8S"}),(0,R.jsx)("p",{className:"text-gray-500 text-sm",children:"Cliquez pour ajouter des photos"})]}),K.photosAfter&&K.photosAfter.length>0&&(0,R.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:K.photosAfter.map(((e,t)=>(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)("img",{src:e,alt:"Apr\xe8s ".concat(t+1),className:"w-16 h-16 object-cover rounded-lg"}),(0,R.jsx)("button",{onClick:()=>{const e=K.photosAfter.filter(((e,n)=>n!==t));G(c(c({},K),{},{photosAfter:e}))},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"\xd7"})]},t)))})]})]})]})]}),D&&(0,R.jsxs)("div",{className:"p-4 mb-4 rounded-xl bg-red-50 border border-red-200 text-red-600",children:[(0,R.jsx)("div",{className:"font-bold mb-2",children:"\ud83d\udd25 Erreur"}),(0,R.jsx)("div",{children:D})]}),(0,R.jsxs)("div",{className:"flex gap-4",children:[(0,R.jsx)("button",{onClick:()=>{m(!1),P(null)},className:"px-6 py-3 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all font-semibold text-gray-700",children:"Annuler"}),(0,R.jsx)("button",{onClick:async()=>{P(null),h(!0);try{if(console.log("\ud83d\udd25 Ajout lavage \xe0 Firebase:",K),!K.vehicleId)throw new Error("Veuillez s\xe9lectionner un v\xe9hicule");if(!K.type)throw new Error("Veuillez s\xe9lectionner un type de lavage");const e=a.find((e=>e.id===K.vehicleId));if(!e)throw new Error("V\xe9hicule introuvable");const t=Y.find((e=>e.id===parseInt(K.employeeId))),n={vehicleId:K.vehicleId,vehiclePlate:e.plate,vehicleBrand:e.brand,vehicleModel:e.model,type:K.type,description:K.description||ne(K.type).description,cost:parseFloat(K.cost)||0,scheduledDate:K.date,estimatedDuration:parseInt(K.duration)||0,employeeId:K.employeeId?parseInt(K.employeeId):null,employeeName:t?t.name:null,location:K.location,notes:K.notes.trim(),customerSatisfaction:parseInt(K.customerSatisfaction),status:"scheduled",photosBefore:K.photosBefore||[],photosAfter:K.photosAfter||[],createdAt:new Date,updatedAt:new Date},r=Lu(Wm,"washing"),s=await Wd(r,n);console.log("\u2705 Lavage ajout\xe9 avec succ\xe8s! ID:",s.id),G({vehicleId:"",type:"",description:"",cost:"",date:(new Date).toISOString().slice(0,16),employeeId:"",duration:"",location:"onsite",notes:"",customerSatisfaction:5,photosBefore:[],photosAfter:[]}),m(!1)}catch(D){console.error("\u274c Erreur lors de l'ajout du lavage:",D),P(D.message||"Erreur lors de l'ajout du lavage")}finally{h(!1)}},disabled:d||!K.vehicleId||!K.type,className:"modern-button disabled:opacity-50 disabled:cursor-not-allowed",children:d?"\ud83d\udd04 Planification...":"\ud83e\uddfd Planifier le lavage"})]})]}),(0,R.jsx)("div",{className:"space-y-4",children:l.map((e=>{const t=a.find((t=>t.id===e.vehicleId)),n=Y.find((t=>t.id===e.employeeId)),r=ne(e.type),s=(e=>{switch(e){case"completed":return v;case"in-progress":return g;case"scheduled":return y;case"cancelled":return x;default:return b}})(e.status);return(0,R.jsx)(U,{className:"hover:shadow-glass-lg transition-all",children:(0,R.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-6",children:[(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,R.jsxs)("div",{className:"flex items-center gap-4",children:[(0,R.jsx)("div",{className:"p-3 rounded-2xl bg-gradient-to-r ".concat(r.color," shadow-lg"),children:(0,R.jsx)("span",{className:"text-xl",children:r.icon})}),(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsx)("h4",{className:"text-xl font-bold gradient-text",children:r.label}),(0,R.jsxs)("p",{className:"text-gray-600 font-medium",children:[e.vehiclePlate||(null===t||void 0===t?void 0:t.plate)," - ",e.vehicleBrand||(null===t||void 0===t?void 0:t.brand)," ",e.vehicleModel||(null===t||void 0===t?void 0:t.model)]})]})]}),(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsxs)("span",{className:"status-badge ".concat(ee(e.status)),children:[(0,R.jsx)(s,{size:14,className:"mr-1"}),te(e.status)]}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)("button",{onClick:()=>E(w===e.id?null:e.id),className:"p-2 rounded-xl bg-white/50 hover:bg-white/70 transition-all",children:(0,R.jsx)(Xm,{size:16})}),w===e.id&&(0,R.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white/90 backdrop-blur-md rounded-xl shadow-glass border border-white/20 py-2 z-10",children:[(0,R.jsxs)("button",{onClick:()=>X(e),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)(Jm,{size:14}),"Voir d\xe9tails"]}),(0,R.jsxs)("button",{onClick:()=>(e=>{q(e),W(c({},e)),F(!0),E(null)})(e),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)($m,{size:14}),"Modifier"]}),(0,R.jsxs)("button",{onClick:()=>J(e),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)(og,{size:14}),"Photos"]}),"scheduled"===e.status&&(0,R.jsxs)("button",{onClick:()=>$(e.id,"in-progress"),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)(g,{size:14}),"D\xe9marrer"]}),"in-progress"===e.status&&(0,R.jsxs)("button",{onClick:()=>$(e.id,"completed"),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)(v,{size:14}),"Terminer"]}),(0,R.jsx)("hr",{className:"my-2 border-gray-200/50"}),(0,R.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce lavage ?"))try{await Hd(Mu(Wm,"washing",e)),console.log("\u2705 Lavage supprim\xe9 avec succ\xe8s"),E(null)}catch(D){console.error("\u274c Erreur lors de la suppression:",D),P("Impossible de supprimer le lavage: "+D.message)}})(e.id),className:"w-full px-4 py-2 text-left hover:bg-red-50 transition-all flex items-center gap-3 text-sm text-red-600",children:[(0,R.jsx)(Zm,{size:14}),"Supprimer"]})]})]})]})]}),e.description&&(0,R.jsx)("p",{className:"text-gray-700 mb-4",children:e.description}),(0,R.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,R.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,R.jsx)(y,{size:16}),(0,R.jsx)("span",{className:"font-medium",children:e.scheduledDate?new Date(e.scheduledDate).toLocaleDateString():"Date non d\xe9finie"})]}),e.cost&&(0,R.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,R.jsx)(N,{size:16}),(0,R.jsxs)("span",{className:"font-bold",children:[e.cost,"\u20ac"]})]}),e.estimatedDuration&&(0,R.jsxs)("div",{className:"flex items-center gap-2 text-blue-600",children:[(0,R.jsx)(g,{size:16}),(0,R.jsxs)("span",{className:"font-medium",children:[e.estimatedDuration,"min"]})]}),(e.employeeName||n)&&(0,R.jsxs)("div",{className:"flex items-center gap-2 text-purple-600",children:[(0,R.jsx)(sg,{size:16}),(0,R.jsx)("span",{className:"font-medium",children:e.employeeName||(null===n||void 0===n?void 0:n.name)})]}),e.location&&(0,R.jsxs)("div",{className:"flex items-center gap-2 text-orange-600",children:[(0,R.jsx)(lg,{size:16}),(0,R.jsx)("span",{className:"font-medium",children:"onsite"===e.location?"Sur site":"external"===e.location?"Externe":"garage"===e.location?"Garage":"Mobile"})]})]}),e.customerSatisfaction&&"completed"===e.status&&(0,R.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[(0,R.jsx)("span",{className:"text-sm text-gray-600",children:"Satisfaction:"}),(0,R.jsx)("div",{className:"flex items-center gap-1",children:[...Array(5)].map(((t,n)=>(0,R.jsx)("button",{onClick:()=>(async(e,t)=>{try{const n=Mu(Wm,"washing",e);await qd(n,{customerSatisfaction:t,updatedAt:new Date}),console.log("\u2705 Satisfaction mise \xe0 jour:",t)}catch(D){console.error("\u274c Erreur lors de la mise \xe0 jour de la satisfaction:",D),P("Impossible de mettre \xe0 jour la satisfaction: "+D.message)}})(e.id,n+1),className:"transition-all ".concat(n<e.customerSatisfaction?"text-yellow-400":"text-gray-300 hover:text-yellow-200"),children:(0,R.jsx)(ag,{size:16,className:n<e.customerSatisfaction?"fill-current":""})},n)))}),(0,R.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["(",e.customerSatisfaction,"/5)"]})]})]}),(0,R.jsxs)("div",{className:"flex flex-col sm:flex-row lg:flex-col gap-2 lg:w-32",children:[(0,R.jsxs)("button",{onClick:()=>X(e),className:"px-4 py-2 rounded-xl bg-blue-100 hover:bg-blue-200 transition-all font-semibold text-blue-700 text-sm flex items-center justify-center gap-1",children:[(0,R.jsx)(Jm,{size:16}),"D\xe9tails"]}),(0,R.jsxs)("button",{onClick:()=>J(e),className:"px-4 py-2 rounded-xl bg-purple-100 hover:bg-purple-200 transition-all font-semibold text-purple-700 text-sm flex items-center justify-center gap-1",children:[(0,R.jsx)(og,{size:16}),"Photos"]}),"scheduled"===e.status&&(0,R.jsxs)("button",{onClick:()=>$(e.id,"in-progress"),className:"px-4 py-2 rounded-xl bg-orange-100 hover:bg-orange-200 transition-all font-semibold text-orange-700 text-sm flex items-center justify-center gap-1",children:[(0,R.jsx)(g,{size:16}),"D\xe9marrer"]}),"in-progress"===e.status&&(0,R.jsxs)("button",{onClick:()=>$(e.id,"completed"),className:"px-4 py-2 rounded-xl bg-green-100 hover:bg-green-200 transition-all font-semibold text-green-700 text-sm flex items-center justify-center gap-1",children:[(0,R.jsx)(v,{size:16}),"Terminer"]})]})]})},e.id)}))}),0===l.length&&!d&&(0,R.jsxs)(U,{className:"text-center p-12",children:[(0,R.jsx)(p,{className:"mx-auto text-gray-400 mb-4",size:48}),(0,R.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:_||"all"!==S||"all"!==T?"Aucun lavage trouv\xe9":"Aucun lavage programm\xe9"}),(0,R.jsx)("p",{className:"text-gray-600 mb-6",children:_||"all"!==S||"all"!==T?"Essayez de modifier vos crit\xe8res de recherche ou de filtrage.":"Commencez par planifier votre premier service de lavage."}),!_&&"all"===S&&"all"===T&&(0,R.jsxs)("button",{onClick:()=>m(!0),className:"modern-button",children:[(0,R.jsx)(Qm,{size:20}),"Planifier le premier lavage"]})]}),d&&(0,R.jsxs)(U,{className:"text-center p-12",children:[(0,R.jsx)("div",{className:"animate-spin mx-auto mb-4 w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"}),(0,R.jsx)("p",{className:"text-gray-600",children:"\ud83d\udd25 Connexion \xe0 Firebase..."})]}),w&&(0,R.jsx)("div",{className:"fixed inset-0 z-5",onClick:()=>E(null)})]})},ug=f("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),dg=f("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),hg=e=>{let{data:t,onRefresh:n}=e;const[s,i]=(0,r.useState)([]),[a,o]=(0,r.useState)([]),[l,u]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[f,x]=(0,r.useState)([]),[N,E]=(0,r.useState)(!1),[_,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(null),[T,I]=(0,r.useState)(null),[j,A]=(0,r.useState)(""),[D,P]=(0,r.useState)("all"),[O,L]=(0,r.useState)("all"),[M,F]=(0,r.useState)("createdAt"),[V,z]=(0,r.useState)(!1),[B,q]=(0,r.useState)(!1),[H,W]=(0,r.useState)(null),[K,G]=(0,r.useState)({}),[Q,Y]=(0,r.useState)({type:"intervention",referenceId:"",vehicleId:"",clientName:"",clientEmail:"",clientAddress:"",description:"",amount:"",taxRate:20,notes:""}),[X,J]=(0,r.useState)({totalAmount:0,paidAmount:0,pendingAmount:0,overdueAmount:0,invoiceCount:0});(0,r.useEffect)((()=>{(()=>{try{E(!0),console.log("\ud83d\udd25 Chargement des factures depuis Firebase...");const e=Lu(Wm,"billing"),t=Kd(_d(e,Td("createdAt","desc")),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));console.log("\u2705 Factures charg\xe9es:",t),i(t),$(t),I(null)}),(e=>{console.error("\u274c Erreur lors du chargement des factures:",e),I("Impossible de charger les factures: "+e.message)})),n=Kd(Lu(Wm,"vehicles"),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));h(t)})),r=Kd(Lu(Wm,"interventions"),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));o(t)})),s=Kd(Lu(Wm,"washing"),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));u(t),E(!1)}));return()=>{console.log("\ud83e\uddf9 Nettoyage des listeners Firebase"),t(),n(),r(),s()}}catch(T){console.error("\u274c Erreur lors de l'initialisation Firebase:",T),I("Erreur de connexion \xe0 Firebase: "+T.message),E(!1)}})()}),[]);const $=e=>{const t=e.reduce(((e,t)=>e+(t.totalAmount||0)),0),n=e.filter((e=>"paid"===e.status)).reduce(((e,t)=>e+(t.totalAmount||0)),0),r=e.filter((e=>"pending"===e.status)).reduce(((e,t)=>e+(t.totalAmount||0)),0),s=e.filter((e=>{var t;if("pending"!==e.status)return!1;const n=e.dueDate?new Date(e.dueDate):new Date(null===(t=e.createdAt)||void 0===t?void 0:t.toDate()),r=new Date;return Math.ceil((r-n)/864e5)>30})).reduce(((e,t)=>e+(t.totalAmount||0)),0);J({totalAmount:t,paidAmount:n,pendingAmount:r,overdueAmount:s,invoiceCount:e.length})};(0,r.useEffect)((()=>{let e=[...s];j&&j.trim()&&(e=e.filter((e=>{const t=j.toLowerCase();return(e.invoiceNumber||"").toLowerCase().includes(t)||(e.clientName||"").toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t)||(e.vehiclePlate||"").toLowerCase().includes(t)}))),"all"!==D&&(e=e.filter((e=>e.status===D))),"all"!==O&&(e=e.filter((e=>e.type===O))),e.sort(((e,t)=>{switch(M){case"createdAt":const n=e.createdAt?new Date(e.createdAt.toDate()):new Date;return(t.createdAt?new Date(t.createdAt.toDate()):new Date).getTime()-n.getTime();case"amount":return(t.totalAmount||0)-(e.totalAmount||0);case"client":return(e.clientName||"").localeCompare(t.clientName||"");case"dueDate":const r=e.dueDate?new Date(e.dueDate):new Date("9999-12-31"),s=t.dueDate?new Date(t.dueDate):new Date("9999-12-31");return r.getTime()-s.getTime();default:return 0}})),x(e)}),[s,j,D,O,M]);const Z=e=>{W(e),z(!0),C(null)},ee=async e=>{try{const t=Mu(Wm,"billing",e);await qd(t,{status:"paid",paidAt:new Date,updatedAt:new Date}),console.log("\u2705 Facture marqu\xe9e comme pay\xe9e"),C(null)}catch(T){console.error("\u274c Erreur lors du marquage:",T),I("Impossible de marquer la facture comme pay\xe9e: "+T.message)}},te=e=>{switch(e){case"pending":return"bg-orange-100 text-orange-800 border-orange-200";case"paid":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ne=e=>{switch(e){case"intervention":return"bg-orange-100 text-orange-800";case"washing":return"bg-blue-100 text-blue-800";case"other":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},re=e=>{switch(e){case"intervention":return(0,R.jsx)(m,{size:14});case"washing":return(0,R.jsx)(p,{size:14});case"other":return(0,R.jsx)(ug,{size:14});default:return(0,R.jsx)(dg,{size:14})}},se=e=>{switch(e){case"pending":return"En attente";case"paid":return"Pay\xe9e";case"overdue":return"En retard";case"cancelled":return"Annul\xe9e";default:return e}},ie=e=>{switch(e){case"intervention":return"Intervention";case"washing":return"Lavage";case"other":return"Autre";default:return e}},ae=e=>{var t;if("pending"!==e.status)return!1;const n=e.dueDate?new Date(e.dueDate):new Date(null===(t=e.createdAt)||void 0===t?void 0:t.toDate());return new Date>n};return(0,R.jsxs)("div",{className:"space-y-6",children:[(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,R.jsx)(U,{className:"p-6",children:(0,R.jsxs)("div",{className:"flex items-center gap-4",children:[(0,R.jsx)("div",{className:"p-3 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-600",children:(0,R.jsx)(rg,{className:"text-white",size:24})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-gray-600 font-medium",children:"Chiffre d'affaires"}),(0,R.jsxs)("p",{className:"text-2xl font-bold text-gray-800",children:[X.totalAmount.toFixed(2),"\u20ac"]})]})]})}),(0,R.jsx)(U,{className:"p-6",children:(0,R.jsxs)("div",{className:"flex items-center gap-4",children:[(0,R.jsx)("div",{className:"p-3 rounded-2xl bg-gradient-to-r from-blue-500 to-cyan-600",children:(0,R.jsx)(v,{className:"text-white",size:24})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-gray-600 font-medium",children:"Montant pay\xe9"}),(0,R.jsxs)("p",{className:"text-2xl font-bold text-gray-800",children:[X.paidAmount.toFixed(2),"\u20ac"]})]})]})}),(0,R.jsx)(U,{className:"p-6",children:(0,R.jsxs)("div",{className:"flex items-center gap-4",children:[(0,R.jsx)("div",{className:"p-3 rounded-2xl bg-gradient-to-r from-orange-500 to-yellow-600",children:(0,R.jsx)(g,{className:"text-white",size:24})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-gray-600 font-medium",children:"En attente"}),(0,R.jsxs)("p",{className:"text-2xl font-bold text-gray-800",children:[X.pendingAmount.toFixed(2),"\u20ac"]})]})]})}),(0,R.jsx)(U,{className:"p-6",children:(0,R.jsxs)("div",{className:"flex items-center gap-4",children:[(0,R.jsx)("div",{className:"p-3 rounded-2xl bg-gradient-to-r from-red-500 to-pink-600",children:(0,R.jsx)(b,{className:"text-white",size:24})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-gray-600 font-medium",children:"En retard"}),(0,R.jsxs)("p",{className:"text-2xl font-bold text-gray-800",children:[X.overdueAmount.toFixed(2),"\u20ac"]})]})]})})]}),(0,R.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 lg:items-center lg:justify-between",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("h2",{className:"text-2xl font-bold gradient-text",children:"Facturation"}),(0,R.jsxs)("p",{className:"text-gray-600 font-medium",children:[f.length," facture",f.length>1?"s":"",("all"!==D||"all"!==O)&&" (filtr\xe9es)",N&&" - Chargement..."]})]}),(0,R.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(Gm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,R.jsx)("input",{type:"text",placeholder:"Rechercher une facture...",value:j,onChange:e=>A(e.target.value),className:"input-modern pl-10 w-full sm:w-64"})]}),(0,R.jsxs)("select",{value:D,onChange:e=>P(e.target.value),className:"input-modern",children:[(0,R.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,R.jsx)("option",{value:"pending",children:"En attente"}),(0,R.jsx)("option",{value:"paid",children:"Pay\xe9es"}),(0,R.jsx)("option",{value:"overdue",children:"En retard"}),(0,R.jsx)("option",{value:"cancelled",children:"Annul\xe9es"})]}),(0,R.jsxs)("select",{value:O,onChange:e=>L(e.target.value),className:"input-modern",children:[(0,R.jsx)("option",{value:"all",children:"Tous les types"}),(0,R.jsx)("option",{value:"intervention",children:"Interventions"}),(0,R.jsx)("option",{value:"washing",children:"Lavages"}),(0,R.jsx)("option",{value:"other",children:"Autres"})]}),(0,R.jsxs)("select",{value:M,onChange:e=>F(e.target.value),className:"input-modern",children:[(0,R.jsx)("option",{value:"createdAt",children:"Trier par date"}),(0,R.jsx)("option",{value:"amount",children:"Trier par montant"}),(0,R.jsx)("option",{value:"client",children:"Trier par client"}),(0,R.jsx)("option",{value:"dueDate",children:"Trier par \xe9ch\xe9ance"})]}),(0,R.jsxs)("button",{onClick:()=>k(!0),className:"modern-button whitespace-nowrap",disabled:N,children:[(0,R.jsx)(Qm,{size:20}),"Nouvelle facture"]})]})]}),T&&!_&&(0,R.jsxs)("div",{className:"p-4 rounded-xl bg-red-50 border border-red-200 text-red-600",children:[(0,R.jsx)("div",{className:"font-bold mb-2",children:"\ud83d\udd25 Erreur Firebase"}),(0,R.jsx)("div",{children:T})]}),_&&(0,R.jsxs)(U,{children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,R.jsx)("h3",{className:"text-xl font-bold gradient-text",children:"Nouvelle Facture"}),(0,R.jsx)("button",{onClick:()=>{k(!1),I(null)},className:"p-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all",children:(0,R.jsx)(Ym,{size:20})})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Type de facture *"}),(0,R.jsxs)("select",{value:Q.type,onChange:e=>Y(c(c({},Q),{},{type:e.target.value,referenceId:""})),className:"input-modern",required:!0,children:[(0,R.jsx)("option",{value:"intervention",children:"Intervention technique"}),(0,R.jsx)("option",{value:"washing",children:"Service de lavage"}),(0,R.jsx)("option",{value:"other",children:"Autre service"})]})]}),"intervention"===Q.type&&(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Intervention li\xe9e"}),(0,R.jsxs)("select",{value:Q.referenceId,onChange:e=>Y(c(c({},Q),{},{referenceId:e.target.value})),className:"input-modern",children:[(0,R.jsx)("option",{value:"",children:"S\xe9lectionner une intervention"}),a.filter((e=>"completed"===e.status)).map((e=>(0,R.jsxs)("option",{value:e.id,children:[e.vehiclePlate," - ",e.type," (",e.estimatedCost,"\u20ac)"]},e.id)))]})]}),"washing"===Q.type&&(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Lavage li\xe9"}),(0,R.jsxs)("select",{value:Q.referenceId,onChange:e=>Y(c(c({},Q),{},{referenceId:e.target.value})),className:"input-modern",children:[(0,R.jsx)("option",{value:"",children:"S\xe9lectionner un lavage"}),l.filter((e=>"completed"===e.status)).map((e=>(0,R.jsxs)("option",{value:e.id,children:[e.vehiclePlate," - ",e.type," (",e.cost,"\u20ac)"]},e.id)))]})]}),"other"===Q.type&&(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"V\xe9hicule concern\xe9"}),(0,R.jsxs)("select",{value:Q.vehicleId,onChange:e=>Y(c(c({},Q),{},{vehicleId:e.target.value})),className:"input-modern",children:[(0,R.jsx)("option",{value:"",children:"S\xe9lectionner un v\xe9hicule"}),d.map((e=>(0,R.jsxs)("option",{value:e.id,children:[e.plate," - ",e.brand," ",e.model]},e.id)))]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom du client *"}),(0,R.jsx)("input",{type:"text",value:Q.clientName,onChange:e=>Y(c(c({},Q),{},{clientName:e.target.value})),className:"input-modern",placeholder:"Nom de l'entreprise ou particulier",required:!0})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email du client"}),(0,R.jsx)("input",{type:"email",value:Q.clientEmail,onChange:e=>Y(c(c({},Q),{},{clientEmail:e.target.value})),className:"input-modern",placeholder:"email@client.com"})]}),(0,R.jsxs)("div",{className:"md:col-span-2",children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse du client"}),(0,R.jsx)("textarea",{value:Q.clientAddress,onChange:e=>Y(c(c({},Q),{},{clientAddress:e.target.value})),className:"input-modern",rows:"2",placeholder:"Adresse compl\xe8te du client"})]}),(0,R.jsxs)("div",{className:"md:col-span-2",children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description du service *"}),(0,R.jsx)("textarea",{value:Q.description,onChange:e=>Y(c(c({},Q),{},{description:e.target.value})),className:"input-modern",rows:"3",placeholder:"Description d\xe9taill\xe9e du service factur\xe9...",required:!0})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Montant HT (\u20ac) *"}),(0,R.jsx)("input",{type:"number",value:Q.amount,onChange:e=>Y(c(c({},Q),{},{amount:e.target.value})),className:"input-modern",min:"0",step:"0.01",placeholder:"0.00",required:!0})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Taux de TVA (%)"}),(0,R.jsx)("input",{type:"number",value:Q.taxRate,onChange:e=>Y(c(c({},Q),{},{taxRate:e.target.value})),className:"input-modern",min:"0",max:"100",step:"0.1"})]}),(0,R.jsxs)("div",{className:"md:col-span-2",children:[(0,R.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes internes"}),(0,R.jsx)("textarea",{value:Q.notes,onChange:e=>Y(c(c({},Q),{},{notes:e.target.value})),className:"input-modern",rows:"2",placeholder:"Notes internes (non visibles sur la facture)"})]})]}),Q.amount&&(0,R.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-xl",children:[(0,R.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"Aper\xe7u des montants"}),(0,R.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,R.jsxs)("div",{className:"flex justify-between",children:[(0,R.jsx)("span",{children:"Montant HT:"}),(0,R.jsxs)("span",{children:[parseFloat(Q.amount||0).toFixed(2),"\u20ac"]})]}),(0,R.jsxs)("div",{className:"flex justify-between",children:[(0,R.jsxs)("span",{children:["TVA (",Q.taxRate,"%):"]}),(0,R.jsxs)("span",{children:[(parseFloat(Q.amount||0)*parseFloat(Q.taxRate)/100).toFixed(2),"\u20ac"]})]}),(0,R.jsxs)("div",{className:"flex justify-between font-bold border-t pt-2",children:[(0,R.jsx)("span",{children:"Total TTC:"}),(0,R.jsxs)("span",{children:[(parseFloat(Q.amount||0)*(1+parseFloat(Q.taxRate)/100)).toFixed(2),"\u20ac"]})]})]})]}),T&&(0,R.jsxs)("div",{className:"p-4 mb-4 rounded-xl bg-red-50 border border-red-200 text-red-600",children:[(0,R.jsx)("div",{className:"font-bold mb-2",children:"\ud83d\udd25 Erreur"}),(0,R.jsx)("div",{children:T})]}),(0,R.jsxs)("div",{className:"flex gap-4 mt-8",children:[(0,R.jsx)("button",{onClick:()=>{k(!1),I(null)},className:"px-6 py-3 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all font-semibold text-gray-700",children:"Annuler"}),(0,R.jsx)("button",{onClick:async()=>{I(null),E(!0);try{if(console.log("\ud83d\udd25 Ajout facture \xe0 Firebase:",Q),!Q.clientName.trim())throw new Error("Le nom du client est obligatoire");if(!Q.description.trim())throw new Error("La description est obligatoire");if(!Q.amount||parseFloat(Q.amount)<=0)throw new Error("Le montant doit \xeatre sup\xe9rieur \xe0 0");const e="INV-".concat((new Date).getFullYear(),"-").concat(String(s.length+1).padStart(4,"0")),t=parseFloat(Q.amount),n=t*parseFloat(Q.taxRate)/100,r=t+n,i=new Date;i.setDate(i.getDate()+30);let o={};if("intervention"===Q.type&&Q.referenceId){const e=a.find((e=>e.id===Q.referenceId));e&&(o={vehicleId:e.vehicleId,vehiclePlate:e.vehiclePlate,vehicleBrand:e.vehicleBrand,vehicleModel:e.vehicleModel,interventionType:e.type})}else if("washing"===Q.type&&Q.referenceId){const e=l.find((e=>e.id===Q.referenceId));e&&(o={vehicleId:e.vehicleId,vehiclePlate:e.vehiclePlate,vehicleBrand:e.vehicleBrand,vehicleModel:e.vehicleModel,washingType:e.type})}else if(Q.vehicleId){const e=d.find((e=>e.id===Q.vehicleId));e&&(o={vehicleId:e.id,vehiclePlate:e.plate,vehicleBrand:e.brand,vehicleModel:e.model})}const u=c({invoiceNumber:e,type:Q.type,referenceId:Q.referenceId||null,clientName:Q.clientName.trim(),clientEmail:Q.clientEmail.trim(),clientAddress:Q.clientAddress.trim(),description:Q.description.trim(),baseAmount:t,taxRate:parseFloat(Q.taxRate),taxAmount:n,totalAmount:r,dueDate:i.toISOString().split("T")[0],status:"pending",notes:Q.notes.trim(),createdAt:new Date,updatedAt:new Date},o),h=Lu(Wm,"billing"),f=await Wd(h,u);console.log("\u2705 Facture ajout\xe9e avec succ\xe8s! ID:",f.id),Y({type:"intervention",referenceId:"",vehicleId:"",clientName:"",clientEmail:"",clientAddress:"",description:"",amount:"",taxRate:20,notes:""}),k(!1)}catch(T){console.error("\u274c Erreur lors de l'ajout de la facture:",T),I(T.message||"Erreur lors de l'ajout de la facture")}finally{E(!1)}},disabled:N||!Q.clientName||!Q.description||!Q.amount,className:"modern-button disabled:opacity-50 disabled:cursor-not-allowed",children:N?"\ud83d\udd04 Cr\xe9ation...":"\ud83d\udcc4 Cr\xe9er la facture"})]})]}),(0,R.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:f.map((e=>{var t;return(0,R.jsxs)(U,{className:"invoice-card group",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)("div",{className:"p-3 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-600 shadow-lg",children:(0,R.jsx)(dg,{className:"text-white",size:20})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{className:"text-lg font-bold gradient-text",children:e.invoiceNumber}),(0,R.jsx)("p",{className:"text-gray-600 font-medium",children:e.clientName})]})]}),(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat(ne(e.type)),children:[re(e.type),ie(e.type)]}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)("button",{onClick:()=>C(S===e.id?null:e.id),className:"p-2 rounded-xl bg-white/50 hover:bg-white/70 transition-all",children:(0,R.jsx)(dg,{size:16})}),S===e.id&&(0,R.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white/90 backdrop-blur-md rounded-xl shadow-glass border border-white/20 py-2 z-10",children:[(0,R.jsxs)("button",{onClick:()=>Z(e),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)(Jm,{size:14}),"Voir d\xe9tails"]}),(0,R.jsxs)("button",{onClick:()=>(e=>{W(e),G(c({},e)),q(!0),C(null)})(e),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)($m,{size:14}),"Modifier"]}),"pending"===e.status&&(0,R.jsxs)("button",{onClick:()=>ee(e.id),className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3 text-sm",children:[(0,R.jsx)(v,{size:14}),"Marquer pay\xe9e"]}),(0,R.jsx)("hr",{className:"my-2 border-gray-200/50"}),(0,R.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette facture ?"))try{await Hd(Mu(Wm,"billing",e)),console.log("\u2705 Facture supprim\xe9e avec succ\xe8s"),C(null)}catch(T){console.error("\u274c Erreur lors de la suppression:",T),I("Impossible de supprimer la facture: "+T.message)}})(e.id),className:"w-full px-4 py-2 text-left hover:bg-red-50 transition-all flex items-center gap-3 text-sm text-red-600",children:[(0,R.jsx)(Zm,{size:14}),"Supprimer"]})]})]})]})]}),(0,R.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,R.jsx)("span",{className:"status-badge ".concat(te(ae(e)?"overdue":e.status)),children:se(ae(e)?"overdue":e.status)}),(0,R.jsxs)("span",{className:"text-2xl font-bold text-gray-800",children:[null===(t=e.totalAmount)||void 0===t?void 0:t.toFixed(2),"\u20ac"]})]}),(0,R.jsxs)("div",{className:"space-y-3 mb-4",children:[e.vehiclePlate&&(0,R.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/50",children:[(0,R.jsxs)("span",{className:"text-gray-700 flex items-center gap-2 font-medium",children:[(0,R.jsx)(w,{size:16}),"V\xe9hicule"]}),(0,R.jsx)("span",{className:"font-bold text-gray-800",children:e.vehiclePlate})]}),(0,R.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/50",children:[(0,R.jsxs)("span",{className:"text-gray-700 flex items-center gap-2 font-medium",children:[(0,R.jsx)(y,{size:16}),"\xc9ch\xe9ance"]}),(0,R.jsx)("span",{className:"font-bold text-gray-800",children:e.dueDate?new Date(e.dueDate).toLocaleDateString():"Non d\xe9finie"})]})]}),(0,R.jsx)("div",{className:"p-3 rounded-xl bg-gray-50 mb-4",children:(0,R.jsx)("p",{className:"text-gray-700 text-sm line-clamp-2",children:e.description})}),(0,R.jsxs)("div",{className:"flex gap-2",children:[(0,R.jsx)("button",{onClick:()=>Z(e),className:"flex-1 p-3 rounded-xl bg-white/70 hover:bg-white transition-all font-semibold text-gray-700 text-sm",children:"D\xe9tails"}),"pending"===e.status&&(0,R.jsx)("button",{onClick:()=>ee(e.id),className:"flex-1 p-3 rounded-xl bg-green-100 hover:bg-green-200 transition-all font-semibold text-green-700 text-sm",children:"Pay\xe9e"})]})]},e.id)}))}),0===f.length&&!N&&(0,R.jsxs)(U,{className:"text-center p-12",children:[(0,R.jsx)(dg,{className:"mx-auto text-gray-400 mb-4",size:48}),(0,R.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:j||"all"!==D||"all"!==O?"Aucune facture trouv\xe9e":"Aucune facture cr\xe9\xe9e"}),(0,R.jsx)("p",{className:"text-gray-600 mb-6",children:j||"all"!==D||"all"!==O?"Essayez de modifier vos crit\xe8res de recherche ou de filtrage.":"Commencez par cr\xe9er votre premi\xe8re facture."}),!j&&"all"===D&&"all"===O&&(0,R.jsxs)("button",{onClick:()=>k(!0),className:"modern-button",children:[(0,R.jsx)(Qm,{size:20}),"Cr\xe9er une facture"]})]}),N&&(0,R.jsxs)(U,{className:"text-center p-12",children:[(0,R.jsx)("div",{className:"animate-spin mx-auto mb-4 w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full"}),(0,R.jsx)("p",{className:"text-gray-600",children:"\ud83d\udd25 Connexion \xe0 Firebase..."})]}),S&&(0,R.jsx)("div",{className:"fixed inset-0 z-5",onClick:()=>C(null)})]})},fg=f("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),pg=f("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),mg=f("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),gg=f("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),vg=f("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),yg=e=>{let{activeTab:t,setActiveTab:n,isCollapsed:s,setIsCollapsed:i,isMobile:a=!1,onClose:o}=e;const[l,u]=(0,r.useState)({efficiency:0,totalVehicles:0,activeVehicles:0,totalInterventions:0,activeInterventions:0,pendingInterventions:0,completedInterventions:0,totalWashings:0,todayWashings:0,scheduledWashings:0,completedWashings:0,thisMonthRevenue:0,urgentMaintenances:0,totalInvoices:0,pendingInvoices:0,paidInvoices:0,overdueInvoices:0,thisMonthInvoices:0,totalRevenue:0,pendingAmount:0,overdueAmount:0}),[d,h]=(0,r.useState)(!0),[f,v]=(0,r.useState)(null);(0,r.useEffect)((()=>{(()=>{try{console.log("\ud83d\udd25 Chargement stats Sidebar depuis Firebase...");let e=[],t=[],n=[],r=[];const s=()=>{const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()),a=new Date(s.getFullYear(),s.getMonth(),1),o=e.length,l=new Set([...t.filter((e=>{var t;return(null!==(t=e.createdAt)&&void 0!==t&&t.toDate?e.createdAt.toDate():new Date(e.createdAt))>=a})).map((e=>e.vehicleId)),...n.filter((e=>{var t;return(null!==(t=e.createdAt)&&void 0!==t&&t.toDate?e.createdAt.toDate():new Date(e.createdAt))>=a})).map((e=>e.vehicleId))]),c=e.filter((e=>{if(!e.nextMaintenance)return!1;const t=new Date(e.nextMaintenance);return Math.ceil((t-s)/864e5)<=7})).length,d=t.length,f=t.filter((e=>"in-progress"===e.status||"scheduled"===e.status)).length,p=t.filter((e=>"pending"===e.status||"scheduled"===e.status)).length,m=t.filter((e=>"completed"===e.status)).length,g=n.length,v=n.filter((e=>{var t;const n=e.scheduledDate?new Date(e.scheduledDate):null!==(t=e.createdAt)&&void 0!==t&&t.toDate?e.createdAt.toDate():new Date(e.createdAt);return n>=i&&n<new Date(i.getTime()+864e5)})).length,y=n.filter((e=>"scheduled"===e.status)).length,b=n.filter((e=>"completed"===e.status)).length,x=t.filter((e=>{var t;return(null!==(t=e.createdAt)&&void 0!==t&&t.toDate?e.createdAt.toDate():new Date(e.createdAt))>=a})),w=n.filter((e=>{var t;return(null!==(t=e.createdAt)&&void 0!==t&&t.toDate?e.createdAt.toDate():new Date(e.createdAt))>=a})),N=x.reduce(((e,t)=>e+(parseFloat(t.cost)||0)),0),E=w.reduce(((e,t)=>e+(parseFloat(t.cost)||0)),0),_=N+E,k=r.length,S=r.filter((e=>"paid"===e.status||"completed"===e.status)).length,C=r.filter((e=>"pending"===e.status||"sent"===e.status||"draft"===e.status)).length,T=r.filter((e=>{if(!e.dueDate||"paid"===e.status)return!1;return new Date(e.dueDate)<s})).length,I=r.filter((e=>{var t;return(null!==(t=e.createdAt)&&void 0!==t&&t.toDate?e.createdAt.toDate():new Date(e.createdAt))>=a})).length,j=r.filter((e=>"paid"===e.status||"completed"===e.status)).reduce(((e,t)=>e+(parseFloat(t.amount)||0)),0),A=r.filter((e=>"pending"===e.status||"sent"===e.status)).reduce(((e,t)=>e+(parseFloat(t.amount)||0)),0),D=r.filter((e=>{if(!e.dueDate||"paid"===e.status)return!1;return new Date(e.dueDate)<s})).reduce(((e,t)=>e+(parseFloat(t.amount)||0)),0);let R=0;if(o>0){const e=l.size/o*100,t=o>0?(o-c)/o*100:100,n=d>0?m/d*100:100;R=Math.round((e+t+n)/3)}else R=100;const P={efficiency:Math.min(R,100),totalVehicles:o,activeVehicles:l.size,totalInterventions:d,activeInterventions:f,pendingInterventions:p,completedInterventions:m,totalWashings:g,todayWashings:v,scheduledWashings:y,completedWashings:b,thisMonthRevenue:_,urgentMaintenances:c,totalInvoices:k,pendingInvoices:C,paidInvoices:S,overdueInvoices:T,thisMonthInvoices:I,totalRevenue:j,pendingAmount:A,overdueAmount:D};console.log("\ud83d\udcca Stats Sidebar calcul\xe9es:",P),u(P),h(!1)},i=Kd(Lu(Wm,"vehicles"),(t=>{e=t.docs.map((e=>c({id:e.id},e.data()))),console.log("\u2705 V\xe9hicules Sidebar:",e.length),s(),v(null)}),(e=>{console.error("\u274c Erreur v\xe9hicules Sidebar:",e),v("Impossible de charger les v\xe9hicules"),h(!1)})),a=Kd(Lu(Wm,"interventions"),(e=>{t=e.docs.map((e=>c({id:e.id},e.data()))),console.log("\u2705 Interventions Sidebar:",t.length),s()}),(e=>{console.error("\u274c Erreur interventions Sidebar:",e)})),o=Kd(Lu(Wm,"washing"),(e=>{n=e.docs.map((e=>c({id:e.id},e.data()))),console.log("\u2705 Lavages Sidebar:",n.length),s()}),(e=>{console.error("\u274c Erreur lavages Sidebar:",e)})),l=Kd(Lu(Wm,"invoices"),(e=>{r=e.docs.map((e=>c({id:e.id},e.data()))),console.log("\u2705 Factures Sidebar:",r.length),s()}),(e=>{console.error("\u274c Erreur factures Sidebar:",e)}));return()=>{console.log("\ud83e\uddf9 Nettoyage listeners Sidebar"),i(),a(),o(),l()}}catch(f){console.error("\u274c Erreur initialisation Sidebar:",f),v("Erreur de connexion Firebase: "+f.message),h(!1)}})()}),[]);const y=[{id:"dashboard",label:"Tableau de Bord",icon:j,description:"Vue d'ensemble",badge:null},{id:"fleet",label:"Flotte",icon:w,description:"Gestion v\xe9hicules",badge:l.totalVehicles>0?l.totalVehicles:null,urgentBadge:l.urgentMaintenances>0?l.urgentMaintenances:null},{id:"interventions",label:"Interventions",icon:m,description:"Maintenance technique",badge:l.activeInterventions>0?l.activeInterventions:null,pendingBadge:l.pendingInterventions>0?l.pendingInterventions:null},{id:"washing",label:"Lavage",icon:p,description:"Services nettoyage",badge:l.todayWashings>0?l.todayWashings:null,scheduledBadge:l.scheduledWashings>0?l.scheduledWashings:null},{id:"billing",label:"Facturation",icon:ug,description:"Gestion financi\xe8re",badge:l.totalInvoices>0?l.totalInvoices:null,urgentBadge:l.overdueInvoices>0?l.overdueInvoices:null,pendingBadge:l.pendingInvoices>0?l.pendingInvoices:null,revenueInfo:l.totalRevenue>0?"".concat(Math.round(l.totalRevenue/1e3),"k\u20ac"):null}],b=[{id:"settings",label:"Param\xe8tres",icon:fg,description:"Configuration"},{id:"help",label:"Aide",icon:pg,description:"Support"}],x=e=>{let{item:r,isBottom:i=!1}=e;const l=r.icon,c=t===r.id;return(0,R.jsxs)("button",{onClick:()=>{n(r.id),a&&o&&o()},className:"nav-item w-full group relative ".concat(c?"active":""),title:s?r.label:"",children:[(0,R.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(l,{size:22}),r.badge&&!s&&(0,R.jsx)("span",{className:"absolute -top-2 -right-2 bg-blue-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:"string"===typeof r.badge?r.badge:r.badge>9?"9+":r.badge}),r.urgentBadge&&!s&&(0,R.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-4 h-4 flex items-center justify-center animate-pulse",children:"!"}),r.pendingBadge&&!s&&(0,R.jsx)("span",{className:"absolute -top-2 -right-2 bg-orange-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:r.pendingBadge>9?"9+":r.pendingBadge})]}),!s&&(0,R.jsxs)("div",{className:"flex-1 text-left",children:[(0,R.jsx)("span",{className:"font-semibold block",children:r.label}),(0,R.jsx)("span",{className:"text-xs text-gray-300 block",children:r.description})]}),!s&&(0,R.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[r.badge&&(0,R.jsx)("span",{className:"bg-white/20 text-white text-xs font-bold rounded-full px-2 py-1",children:r.badge}),r.urgentBadge&&(0,R.jsxs)("span",{className:"bg-red-500 text-white text-xs font-bold rounded-full px-2 py-1 animate-pulse",children:[r.urgentBadge," ","billing"===r.id?"en retard":"urgent",r.urgentBadge>1?"s":""]}),r.scheduledBadge&&(0,R.jsxs)("span",{className:"bg-orange-500/80 text-white text-xs font-bold rounded-full px-2 py-1",children:[r.scheduledBadge," planifi\xe9",r.scheduledBadge>1?"s":""]}),r.pendingBadge&&"billing"===r.id&&(0,R.jsxs)("span",{className:"bg-orange-500/80 text-white text-xs font-bold rounded-full px-2 py-1",children:[r.pendingBadge," en attente"]}),r.revenueInfo&&(0,R.jsxs)("span",{className:"bg-green-500/80 text-white text-xs font-bold rounded-full px-2 py-1",children:[r.revenueInfo," encaiss\xe9s"]})]})]}),c&&(0,R.jsx)("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-1 h-8 bg-white rounded-l-full"})]})};return(0,R.jsxs)(R.Fragment,{children:[a&&(0,R.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:o}),(0,R.jsxs)("div",{className:"\n        glass-sidebar transition-all duration-300 relative z-50 h-full\n        ".concat(s?"w-20":"w-80"," \n        ").concat(a?"fixed top-0 left-0":""," \n        overflow-y-auto scrollbar-thin flex flex-col\n      "),children:[(0,R.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,R.jsxs)("div",{className:"flex items-center justify-between",children:[!s&&(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsx)("h1",{className:"sidebar-brand text-2xl font-bold",children:"ProNet"}),(0,R.jsx)("p",{className:"text-gray-300 text-sm mt-1 font-medium",children:"Gestion de flotte premium"}),f&&(0,R.jsx)("p",{className:"text-red-300 text-xs mt-1",children:"\ud83d\udd25 Erreur Firebase"})]}),(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[!a&&(0,R.jsx)("button",{onClick:()=>i(!s),className:"p-2 rounded-xl bg-white/10 hover:bg-white/20 transition-all",children:s?(0,R.jsx)(mg,{className:"text-white",size:18}):(0,R.jsx)(gg,{className:"text-white",size:18})}),a&&(0,R.jsx)("button",{onClick:o,className:"p-2 rounded-xl bg-white/10 hover:bg-white/20 transition-all",children:(0,R.jsx)(Ym,{className:"text-white",size:18})})]})]})}),(0,R.jsx)("nav",{className:"flex-1 p-4",children:(0,R.jsx)("div",{className:"space-y-2",children:d?[...Array(5)].map(((e,t)=>(0,R.jsx)("div",{className:"nav-item w-full animate-pulse",children:(0,R.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,R.jsx)("div",{className:"w-6 h-6 bg-white/20 rounded"}),!s&&(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsx)("div",{className:"w-24 h-4 bg-white/20 rounded mb-1"}),(0,R.jsx)("div",{className:"w-16 h-3 bg-white/10 rounded"})]})]})},t))):y.map((e=>(0,R.jsx)(x,{item:e},e.id)))})}),!s&&!d&&(0,R.jsx)("div",{className:"p-6 mx-4 mb-4",children:(0,R.jsxs)("div",{className:"glass-card p-6 text-center bg-white/10 border-white/20",children:[(0,R.jsx)("div",{className:"metric-circle mx-auto mb-4",children:(0,R.jsxs)("div",{className:"metric-circle-inner bg-white/90",children:[(0,R.jsxs)("span",{className:"text-2xl font-bold ".concat((N=l.efficiency,N>=90?"text-green-500":N>=70?"text-yellow-500":N>=50?"text-orange-500":"text-red-500")),children:[l.efficiency,"%"]}),(0,R.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:(e=>e>=95?"Excellent":e>=85?"Tr\xe8s bien":e>=70?"Bien":e>=50?"Moyen":"\xc0 am\xe9liorer")(l.efficiency)})]})}),(0,R.jsx)("h3",{className:"text-white font-bold mb-2",children:"Performance Globale"}),(0,R.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between text-gray-300",children:[(0,R.jsx)("span",{children:"V\xe9hicules actifs"}),(0,R.jsxs)("span",{className:"font-semibold text-white",children:[l.activeVehicles,"/",l.totalVehicles]})]}),(0,R.jsxs)("div",{className:"flex items-center justify-between text-gray-300",children:[(0,R.jsx)("span",{children:"Interventions en cours"}),(0,R.jsxs)("span",{className:"font-semibold text-white",children:[l.activeInterventions,l.pendingInterventions>0&&(0,R.jsxs)("span",{className:"text-orange-300 ml-1",children:["(+",l.pendingInterventions,")"]})]})]}),(0,R.jsxs)("div",{className:"flex items-center justify-between text-gray-300",children:[(0,R.jsx)("span",{children:"Lavages aujourd'hui"}),(0,R.jsx)("span",{className:"font-semibold text-white",children:l.todayWashings})]}),l.totalInvoices>0&&(0,R.jsxs)("div",{className:"flex items-center justify-between text-gray-300",children:[(0,R.jsx)("span",{children:"Factures en attente"}),(0,R.jsxs)("span",{className:"font-semibold text-white",children:[l.pendingInvoices,l.overdueInvoices>0&&(0,R.jsxs)("span",{className:"text-red-300 ml-1",children:["(",l.overdueInvoices," retard)"]})]})]}),l.urgentMaintenances>0&&(0,R.jsxs)("div",{className:"flex items-center justify-between text-red-300",children:[(0,R.jsx)("span",{children:"\u26a0\ufe0f Maintenances urgentes"}),(0,R.jsx)("span",{className:"font-semibold text-red-200",children:l.urgentMaintenances})]})]}),(0,R.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/20",children:[l.totalRevenue>0?(0,R.jsxs)("div",{className:"flex items-center justify-center gap-2 text-green-400",children:[(0,R.jsx)(vg,{size:16}),(0,R.jsxs)("span",{className:"text-sm font-medium",children:[l.totalRevenue.toLocaleString(),"\u20ac encaiss\xe9s"]})]}):l.thisMonthRevenue>0?(0,R.jsxs)("div",{className:"flex items-center justify-center gap-2 text-green-400",children:[(0,R.jsx)(vg,{size:16}),(0,R.jsxs)("span",{className:"text-sm font-medium",children:[l.thisMonthRevenue.toLocaleString(),"\u20ac ce mois"]})]}):(0,R.jsxs)("div",{className:"flex items-center justify-center gap-2 text-blue-400",children:[(0,R.jsx)(S,{size:16}),(0,R.jsx)("span",{className:"text-sm font-medium",children:"En attente d'activit\xe9"})]}),l.pendingAmount>0&&(0,R.jsxs)("div",{className:"flex items-center justify-center gap-2 text-orange-400 mt-2",children:[(0,R.jsx)(g,{size:16}),(0,R.jsxs)("span",{className:"text-xs font-medium",children:[l.pendingAmount.toLocaleString(),"\u20ac en attente"]})]})]})]})}),!s&&!d&&(0,R.jsxs)("div",{className:"p-4 mx-4 mb-4",children:[(0,R.jsx)("h4",{className:"text-white font-semibold mb-3 text-sm uppercase tracking-wide",children:"Actions Rapides"}),(0,R.jsxs)("div",{className:"space-y-2",children:[(0,R.jsxs)("button",{onClick:()=>n("interventions"),className:"w-full p-3 rounded-xl bg-orange-500/20 border border-orange-500/30 text-orange-200 hover:bg-orange-500/30 transition-all text-sm font-medium flex items-center justify-center gap-2",children:[(0,R.jsx)(m,{size:16}),"Nouvelle Intervention",l.pendingInterventions>0&&(0,R.jsx)("span",{className:"bg-orange-500 text-white text-xs px-2 py-1 rounded-full",children:l.pendingInterventions})]}),(0,R.jsxs)("button",{onClick:()=>n("washing"),className:"w-full p-3 rounded-xl bg-blue-500/20 border border-blue-500/30 text-blue-200 hover:bg-blue-500/30 transition-all text-sm font-medium flex items-center justify-center gap-2",children:[(0,R.jsx)(p,{size:16}),"Programmer Lavage",l.scheduledWashings>0&&(0,R.jsx)("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:l.scheduledWashings})]}),l.urgentMaintenances>0&&(0,R.jsxs)("button",{onClick:()=>n("fleet"),className:"w-full p-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-200 hover:bg-red-500/30 transition-all text-sm font-medium flex items-center justify-center gap-2 animate-pulse",children:[(0,R.jsx)(T,{size:16}),"Maintenances Urgentes",(0,R.jsx)("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:l.urgentMaintenances})]})]})]}),!s&&d&&(0,R.jsx)("div",{className:"p-6 mx-4 mb-4",children:(0,R.jsxs)("div",{className:"glass-card p-6 text-center bg-white/10 border-white/20 animate-pulse",children:[(0,R.jsx)("div",{className:"w-20 h-20 bg-white/20 rounded-full mx-auto mb-4"}),(0,R.jsx)("div",{className:"w-32 h-4 bg-white/20 rounded mx-auto mb-2"}),(0,R.jsxs)("div",{className:"space-y-2",children:[(0,R.jsx)("div",{className:"w-full h-3 bg-white/10 rounded"}),(0,R.jsx)("div",{className:"w-full h-3 bg-white/10 rounded"}),(0,R.jsx)("div",{className:"w-full h-3 bg-white/10 rounded"})]})]})}),(0,R.jsx)("div",{className:"border-t border-white/10 p-4",children:(0,R.jsx)("div",{className:"space-y-2",children:b.map((e=>(0,R.jsx)(x,{item:e,isBottom:!0},e.id)))})}),!s&&(0,R.jsxs)("div",{className:"p-4 text-center border-t border-white/10",children:[(0,R.jsxs)("p",{className:"text-gray-400 text-xs",children:["ProNet v1.1.0 ",d&&"\u2022 \ud83d\udd25 Synchronisation..."]}),(0,R.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"\xa9 Altair Airport Solutions 2025. Tous droits r\xe9serv\xe9s"})]})]})]});var N},bg=f("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),xg=f("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),wg=f("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ng=e=>{let{title:t,subtitle:n,actions:s,showSearch:i=!1,onSearch:a,searchPlaceholder:o="Rechercher...",showNotifications:l=!0,notificationCount:c=0,onMenuToggle:u,user:d={name:"Admin",email:"admin@autocare.fr",avatar:null}}=e;const[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(""),g=e=>{m(e.target.value),a&&a(e.target.value)};return(0,R.jsxs)("div",{className:"header-glass p-6 mb-8",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between",children:[(0,R.jsxs)("div",{className:"flex items-center gap-4",children:[u&&(0,R.jsx)("button",{onClick:u,className:"lg:hidden p-2 rounded-xl bg-white/50 hover:bg-white/70 transition-all",children:(0,R.jsx)(bg,{size:20,className:"text-gray-700"})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h1",{className:"text-3xl font-bold gradient-text",children:t}),n&&(0,R.jsx)("p",{className:"text-gray-600 font-medium mt-1",children:n})]})]}),i&&(0,R.jsx)("div",{className:"hidden md:flex flex-1 max-w-md mx-8",children:(0,R.jsxs)("div",{className:"relative w-full",children:[(0,R.jsx)(Gm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,R.jsx)("input",{type:"text",placeholder:o,value:p,onChange:g,className:"w-full pl-10 pr-4 py-3 rounded-xl bg-white/60 border border-white/30 backdrop-blur-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"})]})}),(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[s&&(0,R.jsx)("div",{className:"hidden sm:flex items-center gap-2",children:s}),l&&(0,R.jsxs)("button",{className:"relative p-3 rounded-xl bg-white/50 hover:bg-white/70 transition-all group",children:[(0,R.jsx)(k,{size:20,className:"text-gray-700 group-hover:text-blue-600 transition-colors"}),c>0&&(0,R.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse",children:c>9?"9+":c})]}),(0,R.jsx)("button",{className:"p-3 rounded-xl bg-white/50 hover:bg-white/70 transition-all group",children:(0,R.jsx)(fg,{size:20,className:"text-gray-700 group-hover:text-blue-600 transition-colors"})}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsxs)("button",{onClick:()=>f(!h),className:"flex items-center gap-3 p-3 rounded-xl bg-white/50 hover:bg-white/70 transition-all group",children:[(0,R.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-primary flex items-center justify-center",children:d.avatar?(0,R.jsx)("img",{src:d.avatar,alt:d.name,className:"w-8 h-8 rounded-full"}):(0,R.jsx)(sg,{size:16,className:"text-white"})}),(0,R.jsxs)("div",{className:"hidden sm:block text-left",children:[(0,R.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:d.name}),(0,R.jsx)("p",{className:"text-xs text-gray-600",children:d.email})]}),(0,R.jsx)(xg,{size:16,className:"text-gray-600 group-hover:text-blue-600 transition-colors"})]}),h&&(0,R.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white/90 backdrop-blur-md rounded-2xl shadow-glass border border-white/20 py-2 z-50",children:[(0,R.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200/50",children:[(0,R.jsx)("p",{className:"font-semibold text-gray-800",children:d.name}),(0,R.jsx)("p",{className:"text-sm text-gray-600",children:d.email})]}),(0,R.jsxs)("div",{className:"py-2",children:[(0,R.jsxs)("button",{className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3",children:[(0,R.jsx)(sg,{size:16,className:"text-gray-600"}),(0,R.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Mon Profil"})]}),(0,R.jsxs)("button",{className:"w-full px-4 py-2 text-left hover:bg-white/50 transition-all flex items-center gap-3",children:[(0,R.jsx)(fg,{size:16,className:"text-gray-600"}),(0,R.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Param\xe8tres"})]}),(0,R.jsx)("div",{className:"border-t border-gray-200/50 mt-2 pt-2",children:(0,R.jsxs)("button",{className:"w-full px-4 py-2 text-left hover:bg-red-50 transition-all flex items-center gap-3 text-red-600",children:[(0,R.jsx)(wg,{size:16}),(0,R.jsx)("span",{className:"text-sm font-medium",children:"D\xe9connexion"})]})})]})]})]})]})]}),i&&(0,R.jsx)("div",{className:"md:hidden mt-4",children:(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(Gm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,R.jsx)("input",{type:"text",placeholder:o,value:p,onChange:g,className:"w-full pl-10 pr-4 py-3 rounded-xl bg-white/60 border border-white/30 backdrop-blur-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"})]})}),h&&(0,R.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>f(!1)})]})},Eg=Ng;class _g extends r.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Layout Error:",e,t)}render(){return this.state.hasError?(0,R.jsx)("div",{className:"min-h-screen bg-gradient-background flex items-center justify-center",children:(0,R.jsxs)("div",{className:"glass-card p-8 text-center max-w-md",children:[(0,R.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Erreur de chargement"}),(0,R.jsx)("p",{className:"text-gray-600 mb-6",children:"Une erreur est survenue lors du chargement de l'interface."}),(0,R.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 rounded-xl bg-blue-600 hover:bg-blue-700 text-white font-semibold transition-all",children:"Recharger la page"})]})}):this.props.children}}const kg=e=>{let{children:t,activeTab:n,setActiveTab:s,pageTitle:i,pageSubtitle:a,headerActions:o,showSearch:l=!1,onSearch:c,loading:u=!1}=e;const[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=()=>{g(window.innerWidth<1024),window.innerWidth>=1024&&p(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,r.useEffect)((()=>(document.body.style.overflow=f?"hidden":"unset",()=>{document.body.style.overflow="unset"})),[f]);const v=()=>{p(!1)};return u?(0,R.jsx)(Sg,{}):(0,R.jsx)(_g,{children:(0,R.jsxs)("div",{className:"flex min-h-screen bg-gradient-background",children:[(0,R.jsx)("div",{className:"background-pattern"}),(0,R.jsx)("div",{className:"hidden lg:block",children:(0,R.jsx)("div",{className:"fixed top-0 left-0 h-full z-40 transition-all duration-300 ".concat(d?"w-20":"w-80"),children:(0,R.jsx)(yg,{activeTab:n,setActiveTab:s,isCollapsed:d,setIsCollapsed:h,isMobile:!1})})}),f&&(0,R.jsxs)("div",{className:"lg:hidden fixed inset-0 z-50",children:[(0,R.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:v}),(0,R.jsx)("div",{className:"relative w-80",children:(0,R.jsx)(yg,{activeTab:n,setActiveTab:s,isCollapsed:!1,isMobile:!0,onClose:v})})]}),(0,R.jsxs)("div",{className:"flex-1 flex flex-col transition-all duration-300 ".concat(m?"ml-0":d?"ml-20":"ml-80"),children:[(0,R.jsx)(Eg,{title:i,subtitle:a,actions:o,showSearch:l,onSearch:c,onMenuToggle:m?()=>{p(!f)}:void 0}),(0,R.jsx)("main",{className:"flex-1 p-4 lg:p-8",children:(0,R.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,R.jsx)("div",{className:"animate-fade-in-up",children:t})})})]})]})})},Sg=()=>(0,R.jsxs)("div",{className:"min-h-screen bg-gradient-background flex items-center justify-center",children:[(0,R.jsx)("div",{className:"background-pattern"}),(0,R.jsxs)("div",{className:"glass-card p-8 text-center animate-fade-in-scale",children:[(0,R.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),(0,R.jsx)("h2",{className:"text-xl font-bold gradient-text mb-2",children:"AutoCare Pro"}),(0,R.jsx)("p",{className:"text-gray-600 font-medium",children:"Chargement en cours..."})]})]}),Cg=kg;const Tg=class{static sanitizeVehicleData(e){return{id:e.id||"",plate:(e.plate||"").toString().trim().toUpperCase(),brand:(e.brand||"").toString().trim(),model:(e.model||"").toString().trim(),year:parseInt(e.year)||(new Date).getFullYear(),km:parseInt(e.km)||0,fuelType:e.fuelType||"Diesel",status:e.status||"active",nextMaintenance:e.nextMaintenance||null,insuranceExpiry:e.insuranceExpiry||null,technicalControlExpiry:e.technicalControlExpiry||null,notes:(e.notes||"").toString().trim(),createdAt:e.createdAt||new Date,updatedAt:e.updatedAt||new Date}}static sanitizeServiceData(e){return{id:e.id||"",vehicleId:e.vehicleId||"",type:(e.type||"").toString().trim(),description:(e.description||"").toString().trim(),status:e.status||"pending",cost:parseFloat(e.cost)||0,date:e.date||(new Date).toISOString().split("T")[0],createdAt:e.createdAt||new Date,updatedAt:e.updatedAt||new Date}}static sanitizeWashingData(e){return{id:e.id||"",vehicleId:e.vehicleId||"",type:(e.type||"").toString().trim(),status:e.status||"completed",cost:parseFloat(e.cost)||0,date:e.date||(new Date).toISOString().split("T")[0],createdAt:e.createdAt||new Date,updatedAt:e.updatedAt||new Date}}static async getAllVehicles(){try{const e=_d(Lu(Wm,"vehicles"),Td("createdAt","desc")),t=(await Bd(e)).docs.map((e=>{const t=e.data();return this.sanitizeVehicleData(c({id:e.id},t))}));return console.log("\u2705 V\xe9hicules charg\xe9s et nettoy\xe9s:",t),t}catch(e){return console.error("\u274c Erreur lors de la r\xe9cup\xe9ration des v\xe9hicules:",e),[]}}static async addVehicle(e){try{const t=Lu(Wm,"vehicles"),n=this.sanitizeVehicleData(c(c({},e),{},{createdAt:Yd(),updatedAt:Yd()}));delete n.id;const r=await Wd(t,n);return console.log("\u2705 V\xe9hicule ajout\xe9 avec ID:",r.id),this.sanitizeVehicleData(c({id:r.id},n))}catch(t){throw console.error("\u274c Erreur lors de l'ajout du v\xe9hicule:",t),t}}static async getAllServices(){try{const e=_d(Lu(Wm,"services"),Td("createdAt","desc")),t=(await Bd(e)).docs.map((e=>{const t=e.data();return this.sanitizeServiceData(c({id:e.id},t))}));return console.log("\u2705 Services charg\xe9s et nettoy\xe9s:",t),t}catch(e){return console.error("\u274c Erreur lors de la r\xe9cup\xe9ration des services:",e),[]}}static async addService(e){try{const t=Lu(Wm,"services"),n=this.sanitizeServiceData(c(c({},e),{},{createdAt:Yd(),updatedAt:Yd()}));delete n.id;const r=await Wd(t,n);return console.log("\u2705 Service ajout\xe9 avec ID:",r.id),this.sanitizeServiceData(c({id:r.id},n))}catch(t){throw console.error("\u274c Erreur lors de l'ajout du service:",t),t}}static async getAllWashing(){try{const e=_d(Lu(Wm,"washing"),Td("createdAt","desc")),t=(await Bd(e)).docs.map((e=>{const t=e.data();return this.sanitizeWashingData(c({id:e.id},t))}));return console.log("\u2705 Lavages charg\xe9s et nettoy\xe9s:",t),t}catch(e){return console.error("\u274c Erreur lors de la r\xe9cup\xe9ration des lavages:",e),[]}}static async addWashing(e){try{const t=Lu(Wm,"washing"),n=this.sanitizeWashingData(c(c({},e),{},{createdAt:Yd(),updatedAt:Yd()}));delete n.id;const r=await Wd(t,n);return console.log("\u2705 Lavage ajout\xe9 avec ID:",r.id),this.sanitizeWashingData(c({id:r.id},n))}catch(t){throw console.error("\u274c Erreur lors de l'ajout du lavage:",t),t}}static async getMockData(){try{console.log("\ud83d\udd25 Chargement des donn\xe9es Firebase avec validation...");const[e,t,n]=await Promise.all([this.getAllVehicles(),this.getAllServices(),this.getAllWashing()]),r=Array.isArray(e)?e:[],s=Array.isArray(t)?t:[],i=Array.isArray(n)?n:[],a={totalVehicles:r.length,activeVehicles:r.filter((e=>"active"===e.status)).length,maintenanceVehicles:r.filter((e=>"maintenance"===e.status)).length,totalServices:s.length,pendingServices:s.filter((e=>"pending"===e.status)).length,completedServices:s.filter((e=>"completed"===e.status)).length,totalWashing:i.length},o={vehicles:r,services:s,interventions:s,washing:i,washings:i,billing:[],stats:a};return console.log("\u2705 Donn\xe9es Firebase valid\xe9es et charg\xe9es:",o),o}catch(e){return console.error("\u274c Erreur lors du chargement des donn\xe9es Firebase:",e),{vehicles:[],services:[],interventions:[],washing:[],washings:[],billing:[],stats:{totalVehicles:0,activeVehicles:0,maintenanceVehicles:0,totalServices:0,pendingServices:0,completedServices:0,totalWashing:0}}}}static subscribeToAllData(e){try{const t=Lu(Wm,"vehicles"),n=Lu(Wm,"services"),r=Lu(Wm,"washing"),s=async()=>{try{const t=await this.getMockData();e(t)}catch(t){console.error("\u274c Erreur lors de la mise \xe0 jour temps r\xe9el:",t)}},i=Kd(t,s,(e=>{console.error("\u274c Erreur v\xe9hicules temps r\xe9el:",e)})),a=Kd(n,s,(e=>{console.error("\u274c Erreur services temps r\xe9el:",e)})),o=Kd(r,s,(e=>{console.error("\u274c Erreur lavages temps r\xe9el:",e)}));return()=>{try{i(),a(),o(),console.log("\ud83e\uddf9 Nettoyage des listeners Firebase termin\xe9")}catch(e){console.error("\u274c Erreur lors du nettoyage des listeners:",e)}}}catch(t){return console.error("\u274c Erreur lors de la configuration de l'\xe9coute temps r\xe9el:",t),()=>{}}}static async updateDocument(e,t,n){try{if(!t||!e)throw new Error("ID du document et nom de collection requis");const r=Mu(Wm,e,t),s=c(c({},n),{},{updatedAt:Yd()});return await qd(r,s),console.log("\u2705 Document ".concat(t," mis \xe0 jour dans ").concat(e)),!0}catch(r){throw console.error("\u274c Erreur lors de la mise \xe0 jour du document ".concat(t,":"),r),r}}static async deleteDocument(e,t){try{if(!t||!e)throw new Error("ID du document et nom de collection requis");const n=Mu(Wm,e,t);return await Hd(n),console.log("\u2705 Document ".concat(t," supprim\xe9 de ").concat(e)),!0}catch(n){throw console.error("\u274c Erreur lors de la suppression du document ".concat(t,":"),n),n}}static async getVehicles(){return this.getAllVehicles()}static async getServices(){return this.getAllServices()}static async getWashing(){return this.getAllWashing()}static async createSampleData(){try{console.log("\ud83d\udd27 Cr\xe9ation de donn\xe9es de test...");const e={plate:"TEST-123",brand:"Renault",model:"Kangoo",year:2022,km:15e3,fuelType:"Diesel",status:"active",nextMaintenance:"2024-08-15",notes:"V\xe9hicule de test Firebase"},t=await this.addVehicle(e);return console.log("\u2705 Donn\xe9es de test cr\xe9\xe9es avec succ\xe8s:",t),t}catch(e){throw console.error("\u274c Erreur lors de la cr\xe9ation des donn\xe9es de test:",e),e}}};class Ig extends r.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Erreur captur\xe9e par l'Error Boundary:",e,t),this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t)}render(){var e;return this.state.hasError?(0,R.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center p-4",children:(0,R.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-red-200 p-8 max-w-md text-center",children:[(0,R.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,R.jsx)("span",{className:"text-red-600 text-2xl",children:"\u26a0\ufe0f"})}),(0,R.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Oups ! Une erreur est survenue"}),(0,R.jsx)("p",{className:"text-gray-600 mb-6",children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"Une erreur inattendue s'est produite. Veuillez r\xe9essayer."}),(0,R.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,R.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium text-gray-700 transition-all",children:"Recharger la page"}),(0,R.jsx)("button",{onClick:()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()},className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-xl font-medium text-white transition-all",children:"R\xe9essayer"})]}),(0,R.jsxs)("details",{className:"mt-4 text-left",children:[(0,R.jsx)("summary",{className:"cursor-pointer text-sm text-gray-500 hover:text-gray-700",children:"\ud83d\udd25 Informations Firebase"}),(0,R.jsxs)("div",{className:"mt-2 p-3 bg-gray-100 rounded-lg text-xs text-gray-600",children:[(0,R.jsx)("p",{children:(0,R.jsx)("strong",{children:"V\xe9rifications sugg\xe9r\xe9es :"})}),(0,R.jsxs)("ul",{className:"list-disc pl-4 space-y-1",children:[(0,R.jsx)("li",{children:"Configuration Firebase dans firebase/config.js"}),(0,R.jsx)("li",{children:'R\xe8gles Firestore (utilisez le mode "test")'}),(0,R.jsx)("li",{children:"Connexion internet"}),(0,R.jsx)("li",{children:"Console navigateur pour plus de d\xe9tails"})]})]})]})]})}):this.props.children}}const jg=e=>{let{error:t,onRetry:n}=e;return(0,R.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center p-4",children:(0,R.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-red-200 p-8 max-w-md text-center",children:[(0,R.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,R.jsx)("span",{className:"text-red-600 text-2xl",children:"\ud83d\udd25"})}),(0,R.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Erreur de connexion Firebase"}),(0,R.jsx)("p",{className:"text-gray-600 mb-6",children:(null===t||void 0===t?void 0:t.message)||"Impossible de se connecter \xe0 Firebase. V\xe9rifiez votre configuration."}),(0,R.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,R.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium text-gray-700 transition-all",children:"Recharger la page"}),n&&(0,R.jsx)("button",{onClick:n,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-xl font-medium text-white transition-all",children:"\ud83d\udd04 R\xe9essayer Firebase"})]})]})})},Ag=()=>{var e,t;const[n,s]=(0,r.useState)("dashboard"),[i,a]=(0,r.useState)({vehicles:[],interventions:[],washings:[],billing:[],lastUpdate:null,stats:{totalVehicles:0,activeVehicles:0,maintenanceVehicles:0,totalServices:0,pendingServices:0,completedServices:0,totalWashing:0}}),[o,l]=(0,r.useState)(!0),[u,d]=(0,r.useState)(null);(0,r.useEffect)((()=>{h()}),[]);const h=async()=>{l(!0),d(null);try{console.log("\ud83d\udd04 Chargement des donn\xe9es depuis Firebase...");const e=await Tg.getMockData();a(c(c({},e),{},{lastUpdate:(new Date).toISOString()})),console.log("\u2705 Donn\xe9es Firebase charg\xe9es avec succ\xe8s:",e)}catch(e){console.error("\u274c Erreur lors du chargement des donn\xe9es Firebase:",e),d(e),a({vehicles:[],interventions:[],washings:[],billing:[],lastUpdate:null,stats:{totalVehicles:0,activeVehicles:0,maintenanceVehicles:0,totalServices:0,pendingServices:0,completedServices:0,totalWashing:0}})}finally{l(!1)}},f=async()=>{try{console.log("\ud83d\udd04 Rafra\xeechissement des donn\xe9es Firebase...");const e=await Tg.getMockData();a(c(c({},e),{},{lastUpdate:(new Date).toISOString()})),d(null),console.log("\u2705 Donn\xe9es rafra\xeechies avec succ\xe8s")}catch(e){console.error("\u274c Erreur lors du rafra\xeechissement Firebase:",e),d(e)}},p={dashboard:{title:"Tableau de Bord",subtitle:"Vue d'ensemble de votre activit\xe9 (Firebase)",showSearch:!1},fleet:{title:"Gestion de la Flotte",subtitle:"Suivi et maintenance de vos v\xe9hicules (Firebase)",showSearch:!0,searchPlaceholder:"Rechercher un v\xe9hicule..."},interventions:{title:"Interventions Techniques",subtitle:"Maintenance et r\xe9parations de votre flotte (Firebase)",showSearch:!0,searchPlaceholder:"Rechercher une intervention..."},washing:{title:"Services de Lavage",subtitle:"Nettoyage professionnel de votre flotte (Firebase)",showSearch:!0,searchPlaceholder:"Rechercher un lavage..."},billing:{title:"Facturation",subtitle:"Gestion financi\xe8re et comptabilit\xe9 (Firebase)",showSearch:!0,searchPlaceholder:"Rechercher une facture..."}},m=p[n]||p.dashboard;return!u||null!==(e=i.vehicles)&&void 0!==e&&e.length||o?(0,R.jsx)(Ig,{onError:(e,t)=>{console.error("Erreur captur\xe9e par l'Error Boundary:",e,t),d(e)},onReset:()=>{d(null),h()},children:(0,R.jsxs)("div",{className:"App",children:[(0,R.jsx)(Cg,{activeTab:n,setActiveTab:s,pageTitle:m.title,pageSubtitle:m.subtitle,showSearch:m.showSearch,onSearch:e=>{console.log("\ud83d\udd0d Recherche globale Firebase: ".concat(e))},loading:o,children:(()=>{const e={data:i,onRefresh:f};switch(n){case"dashboard":default:return(0,R.jsx)(Km,c({},e));case"fleet":return(0,R.jsx)(ng,c({},e));case"interventions":return(0,R.jsx)(ig,c({},e));case"washing":return(0,R.jsx)(cg,c({},e));case"billing":return(0,R.jsx)(hg,c({},e))}})()}),o&&(0,R.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,R.jsxs)("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-4 flex items-center gap-3 shadow-lg border border-white/20",children:[(0,R.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-500 border-t-transparent"}),(0,R.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\ud83d\udd25 Synchronisation Firebase..."})]})}),u&&(null===(t=i.vehicles)||void 0===t?void 0:t.length)>0&&(0,R.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,R.jsx)("div",{className:"bg-red-50/90 backdrop-blur-md rounded-xl p-4 border border-red-200",children:(0,R.jsxs)("div",{className:"flex items-center gap-3",children:[(0,R.jsx)("div",{className:"w-5 h-5 rounded-full bg-red-500 flex items-center justify-center",children:(0,R.jsx)("span",{className:"text-white text-xs",children:"\ud83d\udd25"})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Erreur Firebase"}),(0,R.jsx)("p",{className:"text-xs text-red-600",children:"Utilisation des donn\xe9es locales"})]}),(0,R.jsx)("button",{onClick:()=>d(null),className:"text-red-500 hover:text-red-700 ml-2",children:"\xd7"})]})})}),")}"]})}):(0,R.jsx)(jg,{error:u,onRetry:h})};s.createRoot(document.getElementById("root")).render((0,R.jsx)(r.StrictMode,{children:(0,R.jsx)(Ag,{})}))})();